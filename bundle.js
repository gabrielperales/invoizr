!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=16)}([function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";(function(e){function r(){f=!0;for(var t,e,r=l.length;r;){for(e=l,l=[],t=-1;++t<r;)e[t]();r=l.length}f=!1}function n(t){1!==l.push(t)||f||o()}var o,c=e.MutationObserver||e.WebKitMutationObserver;if(c){var i=0,u=new c(r),a=e.document.createTextNode("");u.observe(a,{characterData:!0}),o=function(){a.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)o="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){r(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(r,0)};else{var s=new e.MessageChannel;s.port1.onmessage=r,o=function(){s.port2.postMessage(0)}}var f,l=[];t.exports=n}).call(e,r(0))},function(t,e,r){var n,o;(function(){"use strict";function r(t){function e(e){return function(r){return t(e,r)}}return e.arity=2,e.func=t,e}function c(t){function e(e){return function(r){return function(n){return t(e,r,n)}}}return e.arity=3,e.func=t,e}function i(t){function e(e){return function(r){return function(n){return function(o){return t(e,r,n,o)}}}}return e.arity=4,e.func=t,e}function u(t){function e(e){return function(r){return function(n){return function(o){return function(c){return t(e,r,n,o,c)}}}}}return e.arity=5,e.func=t,e}function a(t){function e(e){return function(r){return function(n){return function(o){return function(c){return function(i){return t(e,r,n,o,c,i)}}}}}}return e.arity=6,e.func=t,e}function s(t){function e(e){return function(r){return function(n){return function(o){return function(c){return function(i){return function(u){return t(e,r,n,o,c,i,u)}}}}}}}return e.arity=7,e.func=t,e}function f(t){function e(e){return function(r){return function(n){return function(o){return function(c){return function(i){return function(u){return function(a){return t(e,r,n,o,c,i,u,a)}}}}}}}}return e.arity=8,e.func=t,e}function l(t){function e(e){return function(r){return function(n){return function(o){return function(c){return function(i){return function(u){return function(a){return function(s){return t(e,r,n,o,c,i,u,a,s)}}}}}}}}}return e.arity=9,e.func=t,e}function _(t,e,r){return 2===t.arity?t.func(e,r):t(e)(r)}function d(t,e,r,n){return 3===t.arity?t.func(e,r,n):t(e)(r)(n)}function p(t,e,r,n,o){return 4===t.arity?t.func(e,r,n,o):t(e)(r)(n)(o)}function h(t,e,r,n,o,c){return 5===t.arity?t.func(e,r,n,o,c):t(e)(r)(n)(o)(c)}function v(t,e,r,n,o,c,i){return 6===t.arity?t.func(e,r,n,o,c,i):t(e)(r)(n)(o)(c)(i)}function g(t,e,r,n,o,c,i,u){return 7===t.arity?t.func(e,r,n,o,c,i,u):t(e)(r)(n)(o)(c)(i)(u)}var m=function(){function t(t){var e=new Date(t);return isNaN(e.getTime())?ht("Unable to parse '"+t+"' as a date. Dates must be in the ISO 8601 format."):vt(e)}var e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{fromString:t,year:function(t){return t.getFullYear()},month:function(t){return{ctor:r[t.getMonth()]}},day:function(t){return t.getDate()},hour:function(t){return t.getHours()},minute:function(t){return t.getMinutes()},second:function(t){return t.getSeconds()},millisecond:function(t){return t.getMilliseconds()},toTime:function(t){return t.getTime()},fromTime:function(t){return new Date(t)},dayOfWeek:function(t){return{ctor:e[t.getDay()]}}}}(),y=function(){function t(t,e){return t/e|0}function e(t,e){return t%e}function n(t,e){if(0===e)throw new Error("Cannot perform mod 0. Division by zero error.");var r=t%e,o=0===t?0:e>0?t>=0?r:r+e:-n(-t,-e);return o===e?0:o}function o(t,e){return Math.log(e)/Math.log(t)}function i(t){return-t}function u(t){return t<0?-t:t}function a(t,e){return b.cmp(t,e)<0?t:e}function s(t,e){return b.cmp(t,e)>0?t:e}function f(t,e,r){return b.cmp(r,t)<0?t:b.cmp(r,e)>0?e:r}function l(t,e){return{ctor:w[b.cmp(t,e)+1]}}function _(t,e){return t!==e}function d(t){return!t}function p(t){return t===1/0||t===-1/0}function h(t){return 0|t}function v(t){return t*Math.PI/180}function g(t){return 2*Math.PI*t}function m(t){var e=t._0,r=t._1;return b.Tuple2(e*Math.cos(r),e*Math.sin(r))}function y(t){var e=t._0,r=t._1;return b.Tuple2(Math.sqrt(e*e+r*r),Math.atan2(r,e))}var w=["LT","EQ","GT"];return{div:r(t),rem:r(e),mod:r(n),pi:Math.PI,e:Math.E,cos:Math.cos,sin:Math.sin,tan:Math.tan,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:r(Math.atan2),degrees:v,turns:g,fromPolar:m,toPolar:y,sqrt:Math.sqrt,logBase:r(o),negate:i,abs:u,min:r(a),max:r(s),clamp:c(f),compare:r(l),xor:r(_),not:d,truncate:h,ceiling:Math.ceil,floor:Math.floor,round:Math.round,toFloat:function(t){return t},isNaN:isNaN,isInfinite:p}}(),b=function(){function t(t,r){for(var n,o=[],c=e(t,r,0,o);c&&(n=o.pop());)c=e(n.x,n.y,0,o);return c}function e(t,r,n,o){if(n>100)return o.push({x:t,y:r}),!0;if(t===r)return!0;if("object"!=typeof t){if("function"==typeof t)throw new Error('Trying to use `(==)` on functions. There is no way to know if functions are "the same" in the Elm sense. Read more about this at http://package.elm-lang.org/packages/elm-lang/core/latest/Basics#== which describes why it is this way and what the better version will look like.');return!1}if(null===t||null===r)return!1;if(t instanceof Date)return t.getTime()===r.getTime();if(!("ctor"in t)){for(var c in t)if(!e(t[c],r[c],n+1,o))return!1;return!0}if("RBNode_elm_builtin"!==t.ctor&&"RBEmpty_elm_builtin"!==t.ctor||(t=$t(t),r=$t(r)),"Set_elm_builtin"===t.ctor&&(t=_elm_lang$core$Set$toList(t),r=_elm_lang$core$Set$toList(r)),"::"===t.ctor){for(var i=t,u=r;"::"===i.ctor&&"::"===u.ctor;){if(!e(i._0,u._0,n+1,o))return!1;i=i._1,u=u._1}return i.ctor===u.ctor}if("_Array"===t.ctor){var a=on.toJSArray(t),s=on.toJSArray(r);if(a.length!==s.length)return!1;for(var f=0;f<a.length;f++)if(!e(a[f],s[f],n+1,o))return!1;return!0}if(!e(t.ctor,r.ctor,n+1,o))return!1;for(var c in t)if(!e(t[c],r[c],n+1,o))return!1;return!0}function n(t,e){if("object"!=typeof t)return t===e?v:t<e?h:g;if(t instanceof String){var r=t.valueOf(),o=e.valueOf();return r===o?v:r<o?h:g}if("::"===t.ctor||"[]"===t.ctor){for(;"::"===t.ctor&&"::"===e.ctor;){var c=n(t._0,e._0);if(c!==v)return c;t=t._1,e=e._1}return t.ctor===e.ctor?v:"[]"===t.ctor?h:g}if("_Tuple"===t.ctor.slice(0,6)){var c,i=t.ctor.slice(6)-0;if(0===i)return v;if(i>=1){if((c=n(t._0,e._0))!==v)return c;if(i>=2){if((c=n(t._1,e._1))!==v)return c;if(i>=3){if((c=n(t._2,e._2))!==v)return c;if(i>=4){if((c=n(t._3,e._3))!==v)return c;if(i>=5){if((c=n(t._4,e._4))!==v)return c;if(i>=6){if((c=n(t._5,e._5))!==v)return c;if(i>=7)throw new Error("Comparison error: cannot compare tuples with more than 6 elements.")}}}}}}return v}throw new Error("Comparison error: comparison is only defined on ints, floats, times, chars, strings, lists of comparable values, and tuples of comparable values.")}function o(t,e){return{ctor:"_Tuple2",_0:t,_1:e}}function c(t){return new String(t)}function i(t){return y++}function u(t,e){var r={};for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r}function a(t,e){return{ctor:"::",_0:t,_1:e}}function s(t,e){if("string"==typeof t)return t+e;if("[]"===t.ctor)return e;var r=a(t._0,b),n=r;for(t=t._1;"[]"!==t.ctor;)n._1=a(t._0,b),t=t._1,n=n._1;return n._1=e,r}function f(t,e){return function(r){throw new Error("Ran into a `Debug.crash` in module `"+t+"` "+_(e)+"\nThe message provided by the code author is:\n\n    "+r)}}function l(t,e,r){return function(n){throw new Error("Ran into a `Debug.crash` in module `"+t+"`\n\nThis was caused by the `case` expression "+_(e)+".\nOne of the branches ended with a crash and the following value got through:\n\n    "+d(r)+"\n\nThe message provided by the code author is:\n\n    "+n)}}function _(t){return t.start.line==t.end.line?"on line "+t.start.line:"between lines "+t.start.line+" and "+t.end.line}function d(t){var e=typeof t;if("function"===e)return"<function>";if("boolean"===e)return t?"True":"False";if("number"===e)return t+"";if(t instanceof String)return"'"+p(t,!0)+"'";if("string"===e)return'"'+p(t,!1)+'"';if(null===t)return"null";if("object"===e&&"ctor"in t){var r=t.ctor.substring(0,5);if("_Tupl"===r){var n=[];for(var o in t)"ctor"!==o&&n.push(d(t[o]));return"("+n.join(",")+")"}if("_Task"===r)return"<task>";if("_Array"===t.ctor){return"Array.fromList "+d(_n(t))}if("<decoder>"===t.ctor)return"<decoder>";if("_Process"===t.ctor)return"<process:"+t.id+">";if("::"===t.ctor){var n="["+d(t._0);for(t=t._1;"::"===t.ctor;)n+=","+d(t._0),t=t._1;return n+"]"}if("[]"===t.ctor)return"[]";if("Set_elm_builtin"===t.ctor)return"Set.fromList "+d(_elm_lang$core$Set$toList(t));if("RBNode_elm_builtin"===t.ctor||"RBEmpty_elm_builtin"===t.ctor)return"Dict.fromList "+d($t(t));var n="";for(var c in t)if("ctor"!==c){var i=d(t[c]),u=i[0],a="{"===u||"("===u||"<"===u||'"'===u||i.indexOf(" ")<0;n+=" "+(a?i:"("+i+")")}return t.ctor+n}if("object"===e){if(t instanceof Date)return"<"+t.toString()+">";if(t.elm_web_socket)return"<websocket>";var n=[];for(var o in t)n.push(o+" = "+d(t[o]));return 0===n.length?"{}":"{ "+n.join(", ")+" }"}return"<internal structure>"}function p(t,e){var r=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return e?r.replace(/\'/g,"\\'"):r.replace(/\"/g,'\\"')}var h=-1,v=0,g=1,m={ctor:"_Tuple0"},y=0,b={ctor:"[]"};return{eq:t,cmp:n,Tuple0:m,Tuple2:o,chr:c,update:u,guid:i,append:r(s),crash:f,crashCase:l,toString:d}}(),w=(r(function(t,e){var r=e;return _(t,r._0,r._1)}),c(function(t,e,r){return t({ctor:"_Tuple2",_0:e,_1:r})}),c(function(t,e,r){return _(t,r,e)})),k=r(function(t,e){return t}),T=function(t){return t},E=E||{};E["<|"]=r(function(t,e){return t(e)});var E=E||{};E["|>"]=r(function(t,e){return e(t)});var E=E||{};E[">>"]=c(function(t,e,r){return e(t(r))});var E=E||{};E["<<"]=c(function(t,e,r){return t(e(r))});var E=E||{};E["++"]=b.append;var S=b.toString,E=(y.isInfinite,y.isNaN,y.toFloat,y.ceiling,y.floor,y.truncate,y.round,y.not,y.xor,E||{});E["||"]=y.or;var E=E||{};E["&&"]=y.and;var x=(y.max,y.min,y.compare),E=E||{};E[">="]=y.ge;var E=E||{};E["<="]=y.le;var E=E||{};E[">"]=y.gt;var E=E||{};E["<"]=y.lt;var E=E||{};E["/="]=y.neq;var E=E||{};E["=="]=y.eq;var E=(y.e,y.pi,y.clamp,y.logBase,y.abs,y.negate,y.sqrt,y.atan2,y.atan,y.asin,y.acos,y.tan,y.sin,y.cos,E||{});E["^"]=y.exp;var E=E||{};E["%"]=y.mod;var A=y.rem,E=E||{};E["//"]=y.div;var E=E||{};E["/"]=y.floatDiv;var E=E||{};E["*"]=y.mul;var E=E||{};E["-"]=y.sub;var E=E||{};E["+"]=y.add;var q=(y.toPolar,y.fromPolar,y.turns,y.degrees,r(function(t,e){var r=e;return"Just"===r.ctor?r._0:t})),N={ctor:"Nothing"},O=(r(function(t,e){var r=e;return"Just"===r.ctor?t(r._0):N}),function(t){return{ctor:"Just",_0:t}}),C=r(function(t,e){var r=e;return"Just"===r.ctor?O(t(r._0)):N}),D=(c(function(t,e,r){var n={ctor:"_Tuple2",_0:e,_1:r};return"_Tuple2"===n.ctor&&"Just"===n._0.ctor&&"Just"===n._1.ctor?O(_(t,n._0._0,n._1._0)):N}),i(function(t,e,r,n){var o={ctor:"_Tuple3",_0:e,_1:r,_2:n};return"_Tuple3"===o.ctor&&"Just"===o._0.ctor&&"Just"===o._1.ctor&&"Just"===o._2.ctor?O(d(t,o._0._0,o._1._0,o._2._0)):N}),u(function(t,e,r,n,o){var c={ctor:"_Tuple4",_0:e,_1:r,_2:n,_3:o};return"_Tuple4"===c.ctor&&"Just"===c._0.ctor&&"Just"===c._1.ctor&&"Just"===c._2.ctor&&"Just"===c._3.ctor?O(p(t,c._0._0,c._1._0,c._2._0,c._3._0)):N}),a(function(t,e,r,n,o,c){var i={ctor:"_Tuple5",_0:e,_1:r,_2:n,_3:o,_4:c};return"_Tuple5"===i.ctor&&"Just"===i._0.ctor&&"Just"===i._1.ctor&&"Just"===i._2.ctor&&"Just"===i._3.ctor&&"Just"===i._4.ctor?O(h(t,i._0._0,i._1._0,i._2._0,i._3._0,i._4._0)):N}),function(){function t(t,e){return{ctor:"::",_0:t,_1:e}}function e(e){for(var r=y,n=e.length;n--;)r=t(e[n],r);return r}function n(t){for(var e=[];"[]"!==t.ctor;)e.push(t._0),t=t._1;return e}function o(t,e,r){for(var o=n(r),c=e,i=o.length;i--;)c=_(t,o[i],c);return c}function s(t,r,n){for(var o=[];"[]"!==r.ctor&&"[]"!==n.ctor;)o.push(_(t,r._0,n._0)),r=r._1,n=n._1;return e(o)}function f(t,r,n,o){for(var c=[];"[]"!==r.ctor&&"[]"!==n.ctor&&"[]"!==o.ctor;)c.push(d(t,r._0,n._0,o._0)),r=r._1,n=n._1,o=o._1;return e(c)}function l(t,r,n,o,c){for(var i=[];"[]"!==r.ctor&&"[]"!==n.ctor&&"[]"!==o.ctor&&"[]"!==c.ctor;)i.push(p(t,r._0,n._0,o._0,c._0)),r=r._1,n=n._1,o=o._1,c=c._1;return e(i)}function v(t,r,n,o,c,i){for(var u=[];"[]"!==r.ctor&&"[]"!==n.ctor&&"[]"!==o.ctor&&"[]"!==c.ctor&&"[]"!==i.ctor;)u.push(h(t,r._0,n._0,o._0,c._0,i._0)),r=r._1,n=n._1,o=o._1,c=c._1,i=i._1;return e(u)}function g(t,r){return e(n(r).sort(function(e,r){return b.cmp(t(e),t(r))}))}function m(t,r){return e(n(r).sort(function(e,r){var n=t(e)(r).ctor;return"EQ"===n?0:"LT"===n?-1:1}))}var y={ctor:"[]"};return{Nil:y,Cons:t,cons:r(t),toArray:n,fromArray:e,foldr:c(o),map2:c(s),map3:i(f),map4:u(l),map5:a(v),sortBy:r(g),sortWith:r(m)}}()),R=(D.sortWith,D.sortBy,function(t){return{ctor:"::",_0:t,_1:{ctor:"[]"}}}),I=(r(function(t,e){for(;;){if(b.cmp(t,0)<1)return e;var r=e;if("[]"===r.ctor)return e;var n=t-1,o=r._1;t=n,e=o}}),D.map5,D.map4,D.map3,D.map2),L=r(function(t,e){for(;;){var r=e;if("[]"===r.ctor)return!1;if(t(r._0))return!0;var n=t,o=r._1;t=n,e=o}}),B=(r(function(t,e){return!_(L,function(e){return!t(e)},e)}),D.foldr),j=c(function(t,e,r){for(;;){var n=r;if("[]"===n.ctor)return e;var o=t,c=_(t,n._0,e),i=n._1;t=o,e=c,r=i}}),M=function(t){return d(j,r(function(t,e){return e+1}),0,t)},P=(r(function(t,e){return _(L,function(e){return b.eq(e,t)},e)}),function(t){return"[]"===t.ctor}),F=F||{};F["::"]=D.cons;var U=r(function(t,e){return d(B,r(function(e,r){return{ctor:"::",_0:t(e),_1:r}}),{ctor:"[]"},e)}),J=r(function(t,e){var n=r(function(e,r){return t(e)?{ctor:"::",_0:e,_1:r}:r});return d(B,n,{ctor:"[]"},e)}),W=c(function(t,e,r){var n=t(e);return"Just"===n.ctor?{ctor:"::",_0:n._0,_1:r}:r}),z=r(function(t,e){return d(B,W(t),{ctor:"[]"},e)}),H=function(t){return d(j,r(function(t,e){return{ctor:"::",_0:t,_1:e}}),{ctor:"[]"},t)},K=(c(function(t,e,n){var o=r(function(e,r){var n=r;return"::"===n.ctor?{ctor:"::",_0:_(t,e,n._0),_1:r}:{ctor:"[]"}});return H(d(j,o,{ctor:"::",_0:e,_1:{ctor:"[]"}},n))}),r(function(t,e){return"[]"===e.ctor?t:d(B,r(function(t,e){return{ctor:"::",_0:t,_1:e}}),e,t)})),V=function(t){return d(B,K,{ctor:"[]"},t)},X=r(function(t,e){return V(_(U,t,e))}),G=(r(function(t,e){var n=r(function(e,r){var n=r,o=n._0,c=n._1;return t(e)?{ctor:"_Tuple2",_0:{ctor:"::",_0:e,_1:o},_1:c}:{ctor:"_Tuple2",_0:o,_1:{ctor:"::",_0:e,_1:c}}});return d(B,n,{ctor:"_Tuple2",_0:{ctor:"[]"},_1:{ctor:"[]"}},e)}),r(function(t,e){var n=e;if("[]"===n.ctor)return{ctor:"[]"};var o=r(function(e,r){return{ctor:"::",_0:t,_1:{ctor:"::",_0:e,_1:r}}}),c=d(B,o,{ctor:"[]"},n._1);return{ctor:"::",_0:n._0,_1:c}})),Q=c(function(t,e,r){for(;;){if(b.cmp(t,0)<1)return r;var n=e;if("[]"===n.ctor)return r;var o=t-1,c=n._1,i={ctor:"::",_0:n._0,_1:r};t=o,e=c,r=i}}),$=r(function(t,e){return H(d(Q,t,e,{ctor:"[]"}))}),Y=c(function(t,e,r){if(b.cmp(e,0)<1)return{ctor:"[]"};var n={ctor:"_Tuple2",_0:e,_1:r};t:{e:{if("_Tuple2"!==n.ctor)break t;if("[]"===n._1.ctor)return r;if("::"!==n._1._1.ctor){if(1===n._0)break e;break t}switch(n._0){case 1:break e;case 2:return{ctor:"::",_0:n._1._0,_1:{ctor:"::",_0:n._1._1._0,_1:{ctor:"[]"}}};case 3:if("::"===n._1._1._1.ctor)return{ctor:"::",_0:n._1._0,_1:{ctor:"::",_0:n._1._1._0,_1:{ctor:"::",_0:n._1._1._1._0,_1:{ctor:"[]"}}}};break t;default:if("::"===n._1._1._1.ctor&&"::"===n._1._1._1._1.ctor){var o=n._1._1._1._0,c=n._1._1._0,i=n._1._0,u=n._1._1._1._1._0,a=n._1._1._1._1._1;return b.cmp(t,1e3)>0?{ctor:"::",_0:i,_1:{ctor:"::",_0:c,_1:{ctor:"::",_0:o,_1:{ctor:"::",_0:u,_1:_($,e-4,a)}}}}:{ctor:"::",_0:i,_1:{ctor:"::",_0:c,_1:{ctor:"::",_0:o,_1:{ctor:"::",_0:u,_1:d(Y,t+1,e-4,a)}}}}}break t}}return{ctor:"::",_0:n._1._0,_1:{ctor:"[]"}}}return r}),Z=(r(function(t,e){return d(Y,0,t,e)}),c(function(t,e,r){for(;;){if(b.cmp(e,0)<1)return t;var n={ctor:"::",_0:r,_1:t},o=e-1,c=r;t=n,e=o,r=c}})),tt=(r(function(t,e){return d(Z,{ctor:"[]"},t,e)}),c(function(t,e,r){for(;;){if(!(b.cmp(t,e)<1))return r;var n=t,o=e-1,c={ctor:"::",_0:e,_1:r};t=n,e=o,r=c}})),et=r(function(t,e){return d(tt,t,e,{ctor:"[]"})}),rt=r(function(t,e){return d(I,t,_(et,0,M(e)-1),e)}),nt=function(){function t(t){return{ctor:"_Task_succeed",value:t}}function e(t){return{ctor:"_Task_fail",value:t}}function n(t){return{ctor:"_Task_nativeBinding",callback:t,cancel:null}}function o(t,e){return{ctor:"_Task_andThen",callback:t,task:e}}function c(t,e){return{ctor:"_Task_onError",callback:t,task:e}}function i(t){return{ctor:"_Task_receive",callback:t}}function u(t){var e={ctor:"_Process",id:b.guid(),root:t,stack:null,mailbox:[]};return p(e),e}function a(e){return n(function(r){r(t(u(e)))})}function s(t,e){t.mailbox.push(e),p(t)}function f(e,r){return n(function(n){s(e,r),n(t(b.Tuple0))})}function l(e){return n(function(r){var n=e.root;"_Task_nativeBinding"===n.ctor&&n.cancel&&n.cancel(),e.root=null,r(t(b.Tuple0))})}function _(e){return n(function(r){var n=setTimeout(function(){r(t(b.Tuple0))},e);return function(){clearTimeout(n)}})}function d(t,e){for(;t<v;){var r=e.root.ctor;if("_Task_succeed"!==r)if("_Task_fail"!==r)if("_Task_andThen"!==r)if("_Task_onError"!==r){if("_Task_nativeBinding"===r){e.root.cancel=e.root.callback(function(t){e.root=t,p(e)});break}if("_Task_receive"!==r)throw new Error(r);var n=e.mailbox;if(0===n.length)break;e.root=e.root.callback(n.shift()),++t}else e.stack={ctor:"_Task_onError",callback:e.root.callback,rest:e.stack},e.root=e.root.task,++t;else e.stack={ctor:"_Task_andThen",callback:e.root.callback,rest:e.stack},e.root=e.root.task,++t;else{for(;e.stack&&"_Task_andThen"===e.stack.ctor;)e.stack=e.stack.rest;if(null===e.stack)break;e.root=e.stack.callback(e.root.value),e.stack=e.stack.rest,++t}else{for(;e.stack&&"_Task_onError"===e.stack.ctor;)e.stack=e.stack.rest;if(null===e.stack)break;e.root=e.stack.callback(e.root.value),e.stack=e.stack.rest,++t}}return t<v?t+1:(p(e),t)}function p(t){m.push(t),g||(setTimeout(h,0),g=!0)}function h(){for(var t,e=0;e<v&&(t=m.shift());)t.root&&(e=d(e,t));if(!t)return void(g=!1);setTimeout(h,0)}var v=1e4,g=!1,m=[];return{succeed:t,fail:e,nativeBinding:n,andThen:r(o),onError:r(c),receive:i,spawn:a,kill:l,sleep:_,send:r(f),rawSpawn:u,rawSend:s}}(),ot=function(){function t(t){return function(e){return function(e,r){e.worker=function(e){if(void 0!==e)throw new Error("The `"+r+"` module does not need flags.\nCall "+r+".worker() with no arguments and you should be all set!");return i(t.init,t.update,t.subscriptions,n)}}}}function e(t){return function(e){return function(r,o){r.worker=function(r){if(void 0===e)throw new Error("Are you trying to sneak a Never value into Elm? Trickster!\nIt looks like "+o+".main is defined with `programWithFlags` but has type `Program Never`.\nUse `program` instead if you do not want flags.");var c=_(hn.run,e,r);if("Err"===c.ctor)throw new Error(o+".worker(...) was called with an unexpected argument.\nI tried to convert it to an Elm value, but ran into this problem:\n\n"+c._0);return i(t.init(c._0),t.update,t.subscriptions,n)}}}}function n(t,e){return function(t){}}function o(t){var e=v(D.Nil),n=b.Tuple2(b.Tuple0,e);return Uu({init:n,view:function(t){return main},update:r(function(t,e){return n}),subscriptions:function(t){return e}})}function i(t,e,r,n){function o(t,n){return nt.nativeBinding(function(o){var c=_(e,t,n);n=c._0,i(n);var u=c._1,s=r(n);m(a,u,s),o(nt.succeed(n))})}function c(t){nt.rawSend(f,t)}var i,a={},s=nt.nativeBinding(function(e){var o=t._0;i=n(c,o);var u=t._1,s=r(o);m(a,u,s),e(nt.succeed(o))}),f=l(s,o),d=u(a,c);return d?{ports:d}:{}}function u(t,e){var r;for(var n in q){var o=q[n];o.isForeign&&(r=r||{},r[n]="cmd"===o.tag?S(n):A(n,e)),t[n]=a(o,e)}return r}function a(t,e){function r(t,e){if("self"===t.ctor)return d(i,n,t._0,e);var r=t._0;switch(o){case"cmd":return d(c,n,r.cmds,e);case"sub":return d(c,n,r.subs,e);case"fx":return p(c,n,r.cmds,r.subs,e)}}var n={main:e,self:void 0},o=t.tag,c=t.onEffects,i=t.onSelfMsg,u=l(t.init,r);return n.self=u,u}function s(t,e){return nt.nativeBinding(function(r){t.main(e),r(nt.succeed(b.Tuple0))})}function f(t,e){return _(nt.send,t.self,{ctor:"self",_0:e})}function l(t,e){function r(t){var o=nt.receive(function(r){return e(r,t)});return _(n,r,o)}var n=nt.andThen,o=_(n,r,t);return nt.rawSpawn(o)}function h(t){return function(e){return{type:"leaf",home:t,value:e}}}function v(t){return{type:"node",branches:t}}function g(t,e){return{type:"map",tagger:t,tree:e}}function m(t,e,r){var n={};y(!0,e,n,null),y(!1,r,n,null);for(var o in t){var c=o in n?n[o]:{cmds:D.Nil,subs:D.Nil};nt.rawSend(t[o],{ctor:"fx",_0:c})}}function y(t,e,r,n){switch(e.type){case"leaf":var o=e.home,c=w(t,o,n,e.value);return void(r[o]=k(t,c,r[o]));case"node":for(var i=e.branches;"[]"!==i.ctor;)y(t,i._0,r,n),i=i._1;return;case"map":return void y(t,e.tree,r,{tagger:e.tagger,rest:n})}}function w(t,e,r,n){function o(t){for(var e=r;e;)t=e.tagger(t),e=e.rest;return t}return _(t?q[e].cmdMap:q[e].subMap,o,n)}function k(t,e,r){return r=r||{cmds:D.Nil,subs:D.Nil},t?(r.cmds=D.Cons(e,r.cmds),r):(r.subs=D.Cons(e,r.subs),r)}function T(t){if(t in q)throw new Error("There can only be one port named `"+t+"`, but your program has multiple.")}function E(t,e){return T(t),q[t]={tag:"cmd",cmdMap:N,converter:e,isForeign:!0},h(t)}function S(t){function e(t,e,r){for(;"[]"!==e.ctor;){for(var n=o,c=i(e._0),a=0;a<n.length;a++)n[a](c);e=e._1}return u}function r(t){o.push(t)}function n(t){o=o.slice();var e=o.indexOf(t);e>=0&&o.splice(e,1)}var o=[],i=q[t].converter,u=nt.succeed(null);return q[t].init=u,q[t].onEffects=c(e),{subscribe:r,unsubscribe:n}}function x(t,e){return T(t),q[t]={tag:"sub",subMap:O,converter:e,isForeign:!0},h(t)}function A(t,e){function r(t,e,r){for(var o=n(t,e,r),c=0;c<s.length;c++)u(s[c]);return s=null,p=u,d=n,o}function n(t,e,r){return f=e,h}function o(t,e,r){return d(t,e,r)}function i(t){s.push(t)}function u(t){for(var r=f;"[]"!==r.ctor;)e(r._0(t)),r=r._1}function a(e){var r=_(An,l,e);if("Err"===r.ctor)throw new Error("Trying to send an unexpected type of value through port `"+t+"`:\n"+r._0);p(r._0)}var s=[],f=D.Nil,l=q[t].converter,d=r,p=i,h=nt.succeed(null);return q[t].init=h,q[t].onEffects=c(o),{send:a}}var q={},N=r(function(t,e){return e}),O=r(function(t,e){return function(r){return t(e(r))}});return{sendToApp:r(s),sendToSelf:r(f),effectManagers:q,outgoingPort:E,incomingPort:x,htmlToProgram:o,program:t,programWithFlags:e,initialize:i,leaf:h,batch:v,map:r(g)}}(),ct=ot.batch,it=ct({ctor:"[]"}),ut=ut||{};ut["!"]=r(function(t,e){return{ctor:"_Tuple2",_0:t,_1:ct(e)}});var at=ot.map,st=ot.batch,ft=st({ctor:"[]"}),lt=ot.map,_t=(nt.succeed,ot.sendToSelf),dt=ot.sendToApp,pt=(ot.programWithFlags,ot.program,r(function(t,e){var r=e;return"Ok"===r.ctor?r._0:t})),ht=function(t){return{ctor:"Err",_0:t}},vt=(r(function(t,e){var r=e;return"Ok"===r.ctor?t(r._0):ht(r._0)}),function(t){return{ctor:"Ok",_0:t}}),gt=(r(function(t,e){var r=e;return"Ok"===r.ctor?vt(t(r._0)):ht(r._0)}),c(function(t,e,r){var n={ctor:"_Tuple2",_0:e,_1:r};return"Ok"===n._0.ctor?"Ok"===n._1.ctor?vt(_(t,n._0._0,n._1._0)):ht(n._1._0):ht(n._0._0)}),i(function(t,e,r,n){var o={ctor:"_Tuple3",_0:e,_1:r,_2:n};return"Ok"===o._0.ctor?"Ok"===o._1.ctor?"Ok"===o._2.ctor?vt(d(t,o._0._0,o._1._0,o._2._0)):ht(o._2._0):ht(o._1._0):ht(o._0._0)}),u(function(t,e,r,n,o){var c={ctor:"_Tuple4",_0:e,_1:r,_2:n,_3:o};return"Ok"===c._0.ctor?"Ok"===c._1.ctor?"Ok"===c._2.ctor?"Ok"===c._3.ctor?vt(p(t,c._0._0,c._1._0,c._2._0,c._3._0)):ht(c._3._0):ht(c._2._0):ht(c._1._0):ht(c._0._0)}),a(function(t,e,r,n,o,c){var i={ctor:"_Tuple5",_0:e,_1:r,_2:n,_3:o,_4:c};return"Ok"===i._0.ctor?"Ok"===i._1.ctor?"Ok"===i._2.ctor?"Ok"===i._3.ctor?"Ok"===i._4.ctor?vt(h(t,i._0._0,i._1._0,i._2._0,i._3._0,i._4._0)):ht(i._4._0):ht(i._3._0):ht(i._2._0):ht(i._1._0):ht(i._0._0)}),r(function(t,e){var r=e;return"Ok"===r.ctor?vt(r._0):ht(t(r._0))}),r(function(t,e){var r=e;return"Just"===r.ctor?vt(r._0):ht(t)}),nt.onError),mt=nt.andThen,yt=r(function(t,e){var r=e;return nt.spawn(_(mt,dt(t),r._0))}),bt=nt.fail,wt=(r(function(t,e){return _(gt,function(e){return bt(t(e))},e)}),nt.succeed),kt=r(function(t,e){return _(mt,function(e){return wt(t(e))},e)}),Tt=c(function(t,e,r){return _(mt,function(e){return _(mt,function(r){return wt(_(t,e,r))},r)},e)}),Et=(i(function(t,e,r,n){return _(mt,function(e){return _(mt,function(r){return _(mt,function(n){return wt(d(t,e,r,n))},n)},r)},e)}),u(function(t,e,r,n,o){return _(mt,function(e){return _(mt,function(r){return _(mt,function(n){return _(mt,function(o){return wt(p(t,e,r,n,o))},o)},n)},r)},e)}),a(function(t,e,r,n,o,c){return _(mt,function(e){return _(mt,function(r){return _(mt,function(n){return _(mt,function(o){return _(mt,function(c){return wt(h(t,e,r,n,o,c))},c)},o)},n)},r)},e)}),function(t){var e=t;return"[]"===e.ctor?wt({ctor:"[]"}):d(Tt,r(function(t,e){return{ctor:"::",_0:t,_1:e}}),e._0,Et(e._1))}),St=c(function(t,e,r){return _(kt,function(t){return{ctor:"_Tuple0"}},Et(_(U,yt(t),e)))}),xt=wt({ctor:"_Tuple0"}),At=c(function(t,e,r){return wt({ctor:"_Tuple0"})}),qt=ot.leaf("Task"),Nt=function(t){return{ctor:"Perform",_0:t}},Ot=r(function(t,e){return qt(Nt(_(kt,t,e)))}),Ct=r(function(t,e){return qt(Nt(_(gt,function(e){return wt(t(ht(e)))},_(mt,function(e){return wt(t(vt(e)))},e))))}),Dt=r(function(t,e){return Nt(_(kt,t,e._0))});ot.effectManagers.Task={pkg:"elm-lang/core",init:xt,onEffects:St,onSelfMsg:At,tag:"cmd",cmdMap:Dt};var Rt=function(){function t(t,e){var r=t+": "+b.toString(e),n=n||{};return n.stdout?n.stdout.write(r):console.log(r),e}function e(t){throw new Error(t)}return{crash:e,log:r(t)}}(),It=function(){function t(t){return 0===t.length}function e(t,e){return t+e}function n(t){var e=t[0];return e?O(b.Tuple2(b.chr(e),t.slice(1))):N}function o(t,e){return t+e}function i(t){return D.toArray(t).join("")}function u(t){return t.length}function a(t,e){for(var r=e.split(""),n=r.length;n--;)r[n]=t(b.chr(r[n]));return r.join("")}function s(t,e){return e.split("").map(b.chr).filter(t).join("")}function f(t){return t.split("").reverse().join("")}function l(t,e,r){for(var n=r.length,o=0;o<n;++o)e=_(t,b.chr(r[o]),e);return e}function d(t,e,r){for(var n=r.length;n--;)e=_(t,b.chr(r[n]),e);return e}function p(t,e){return D.fromArray(e.split(t))}function h(t,e){return D.toArray(e).join(t)}function v(t,e){for(var r="";t>0;)1&t&&(r+=e),t>>=1,e+=e;return r}function g(t,e,r){return r.slice(t,e)}function m(t,e){return t<1?"":e.slice(0,t)}function y(t,e){return t<1?"":e.slice(-t)}function w(t,e){return t<1?e:e.slice(t)}function k(t,e){return t<1?e:e.slice(0,-t)}function T(t,e,r){var n=(t-r.length)/2;return v(Math.ceil(n),e)+r+v(0|n,e)}function E(t,e,r){return r+v(t-r.length,e)}function S(t,e,r){return v(t-r.length,e)+r}function x(t){return t.trim()}function A(t){return t.replace(/^\s+/,"")}function q(t){return t.replace(/\s+$/,"")}function C(t){return D.fromArray(t.trim().split(/\s+/g))}function R(t){return D.fromArray(t.split(/\r\n|\r|\n/g))}function I(t){return t.toUpperCase()}function L(t){return t.toLowerCase()}function B(t,e){for(var r=e.length;r--;)if(t(b.chr(e[r])))return!0;return!1}function j(t,e){for(var r=e.length;r--;)if(!t(b.chr(e[r])))return!1;return!0}function M(t,e){return e.indexOf(t)>-1}function P(t,e){return 0===e.indexOf(t)}function F(t,e){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}function U(t,e){var r=t.length;if(r<1)return D.Nil;for(var n=0,o=[];(n=e.indexOf(t,n))>-1;)o.push(n),n+=r;return D.fromArray(o)}function J(t){var e=t.length;if(0===e)return W(t);var r=t[0];if("0"===r&&"x"===t[1]){for(var n=2;n<e;++n){var r=t[n];if(!("0"<=r&&r<="9"||"A"<=r&&r<="F"||"a"<=r&&r<="f"))return W(t)}return vt(parseInt(t,16))}if(r>"9"||r<"0"&&"-"!==r&&"+"!==r)return W(t);for(var n=1;n<e;++n){var r=t[n];if(r<"0"||"9"<r)return W(t)}return vt(parseInt(t,10))}function W(t){return ht("could not convert string '"+t+"' to an Int")}function z(t){if(0===t.length||/[\sxbo]/.test(t))return H(t);var e=+t;return e===e?vt(e):H(t)}function H(t){return ht("could not convert string '"+t+"' to a Float")}function K(t){return D.fromArray(t.split("").map(b.chr))}function V(t){return D.toArray(t).join("")}return{isEmpty:t,cons:r(e),uncons:n,append:r(o),concat:i,length:u,map:r(a),filter:r(s),reverse:f,foldl:c(l),foldr:c(d),split:r(p),join:r(h),repeat:r(v),slice:c(g),left:r(m),right:r(y),dropLeft:r(w),dropRight:r(k),pad:c(T),padLeft:c(S),padRight:c(E),trim:x,trimLeft:A,trimRight:q,words:C,lines:R,toUpper:I,toLower:L,any:r(B),all:r(j),contains:r(M),startsWith:r(P),endsWith:r(F),indexes:r(U),toInt:J,toFloat:z,toList:K,fromList:V}}(),Lt=function(){return{fromCode:function(t){return b.chr(String.fromCharCode(t))},toCode:function(t){return t.charCodeAt(0)},toUpper:function(t){return b.chr(t.toUpperCase())},toLower:function(t){return b.chr(t.toLowerCase())},toLocaleUpper:function(t){return b.chr(t.toLocaleUpperCase())},toLocaleLower:function(t){return b.chr(t.toLocaleLowerCase())}}}(),Bt=(Lt.fromCode,Lt.toCode),jt=(Lt.toLocaleLower,Lt.toLocaleUpper,Lt.toLower,Lt.toUpper,c(function(t,e,r){var n=Bt(r);return b.cmp(n,Bt(t))>-1&&b.cmp(n,Bt(e))<1})),Mt=(_(jt,b.chr("A"),b.chr("Z")),_(jt,b.chr("a"),b.chr("z")),_(jt,b.chr("0"),b.chr("9")),_(jt,b.chr("0"),b.chr("7")),It.fromList,It.toList,It.toFloat),Pt=(It.toInt,It.indexes,It.indexes,It.endsWith,It.startsWith,It.contains),Ft=(It.all,It.any,It.toLower,It.toUpper,It.lines,It.words,It.trimRight,It.trimLeft,It.trim,It.padRight),Ut=It.padLeft,Jt=(It.pad,It.dropRight,It.dropLeft,It.right),Wt=It.left,zt=(It.slice,It.repeat,It.join),Ht=It.split,Kt=(It.foldr,It.foldl,It.reverse,It.filter,It.map,It.length),Vt=It.concat,Xt=(It.append,It.uncons,It.cons,It.isEmpty,c(function(t,e,r){for(;;){var n=r;if("RBEmpty_elm_builtin"===n.ctor)return e;var o=t,c=d(t,n._1,n._2,d(Xt,t,e,n._4)),i=n._3;t=o,e=c,r=i}})),Gt=function(t){return d(Xt,c(function(t,e,r){return{ctor:"::",_0:t,_1:r}}),{ctor:"[]"},t)},Qt=function(t){return d(Xt,c(function(t,e,r){return{ctor:"::",_0:e,_1:r}}),{ctor:"[]"},t)},$t=function(t){return d(Xt,c(function(t,e,r){return{ctor:"::",_0:{ctor:"_Tuple2",_0:t,_1:e},_1:r}}),{ctor:"[]"},t)},Yt=c(function(t,e,r){for(;;){var n=r;if("RBEmpty_elm_builtin"===n.ctor)return e;var o=t,c=d(t,n._1,n._2,d(Yt,t,e,n._3)),i=n._4;t=o,e=c,r=i}}),Zt=a(function(t,e,n,o,i,u){var a=c(function(r,o,c){for(;;){var i=c,u=i._1,a=i._0,s=a;if("[]"===s.ctor)return{ctor:"_Tuple2",_0:a,_1:d(n,r,o,u)};var f=s._1,l=s._0._1,_=s._0._0;if(!(b.cmp(_,r)<0))return b.cmp(_,r)>0?{ctor:"_Tuple2",_0:a,_1:d(n,r,o,u)}:{ctor:"_Tuple2",_0:f,_1:p(e,_,l,o,u)};var h=r,v=o,g={ctor:"_Tuple2",_0:f,_1:d(t,_,l,u)};r=h,o=v,c=g}}),s=d(Yt,a,{ctor:"_Tuple2",_0:$t(o),_1:u},i),f=s._0,l=s._1;return d(j,r(function(e,r){var n=e;return d(t,n._0,n._1,r)}),l,f)}),te=i(function(t,e,r,n){return Rt.crash(Vt({ctor:"::",_0:"Internal red-black tree invariant violated, expected ",_1:{ctor:"::",_0:t,_1:{ctor:"::",_0:" and got ",_1:{ctor:"::",_0:S(e),_1:{ctor:"::",_0:"/",_1:{ctor:"::",_0:r,_1:{ctor:"::",_0:"/",_1:{ctor:"::",_0:n,_1:{ctor:"::",_0:"\nPlease report this bug to <https://github.com/elm-lang/core/issues>",_1:{ctor:"[]"}}}}}}}}}}))}),ee=function(t){var e=t;t:{if("RBNode_elm_builtin"===e.ctor){if("BBlack"===e._0.ctor)return!0;break t}if("LBBlack"===e._0.ctor)return!0;break t}return!1},re=r(function(t,e){for(;;){var r=e;if("RBEmpty_elm_builtin"===r.ctor)return t;var n=_(re,t+1,r._4),o=r._3;t=n,e=o}}),ne=function(t){return _(re,0,t)},oe=r(function(t,e){t:for(;;){var r=e;if("RBEmpty_elm_builtin"===r.ctor)return N;var n=_(x,t,r._1);switch(n.ctor){case"LT":var o=t,c=r._3;t=o,e=c;continue t;case"EQ":return O(r._2);default:var i=t,u=r._4;t=i,e=u;continue t}}}),ce=r(function(t,e){return"Just"===_(oe,t,e).ctor}),ie=c(function(t,e,r){for(;;){var n=r;if("RBEmpty_elm_builtin"===n.ctor)return{ctor:"_Tuple2",_0:t,_1:e};var o=n._1,c=n._2,i=n._4;t=o,e=c,r=i}}),ue={ctor:"NBlack"},ae={ctor:"BBlack"},se={ctor:"Black"},fe=function(t){var e=t;if("RBNode_elm_builtin"===e.ctor){var r=e._0;return b.eq(r,se)||b.eq(r,ae)}return!0},le={ctor:"Red"},_e=function(t){switch(t.ctor){case"Black":return ae;case"Red":return se;case"NBlack":return le;default:return Rt.crash("Can't make a double black node more black!")}},de=function(t){switch(t.ctor){case"BBlack":return se;case"Black":return le;case"Red":return ue;default:return Rt.crash("Can't make a negative black node less black!")}},pe={ctor:"LBBlack"},he={ctor:"LBlack"},ve=function(t){return{ctor:"RBEmpty_elm_builtin",_0:t}},ge=ve(he),me=function(t){return b.eq(t,ge)},ye=u(function(t,e,r,n,o){return{ctor:"RBNode_elm_builtin",_0:t,_1:e,_2:r,_3:n,_4:o}}),be=function(t){var e=t;return"RBNode_elm_builtin"===e.ctor&&"Red"===e._0.ctor?h(ye,se,e._1,e._2,e._3,e._4):t},we=function(t){var e=t;return"RBNode_elm_builtin"===e.ctor?h(ye,de(e._0),e._1,e._2,e._3,e._4):ve(he)},ke=function(t){return function(e){return function(r){return function(n){return function(o){return function(c){return function(i){return function(u){return function(a){return function(s){return function(f){return h(ye,de(t),n,o,h(ye,se,e,r,u,a),h(ye,se,c,i,s,f))}}}}}}}}}}},Te=function(t){var e=t;return"RBEmpty_elm_builtin"===e.ctor?ve(he):h(ye,se,e._1,e._2,e._3,e._4)},Ee=function(t){var e=t;return"RBEmpty_elm_builtin"===e.ctor?Rt.crash("can't make a Leaf red"):h(ye,le,e._1,e._2,e._3,e._4)},Se=function(t){var e=t;t:{e:{r:{n:{o:{c:{i:{if("RBNode_elm_builtin"!==e.ctor)break t;if("RBNode_elm_builtin"===e._3.ctor)if("RBNode_elm_builtin"===e._4.ctor)switch(e._3._0.ctor){case"Red":switch(e._4._0.ctor){case"Red":if("RBNode_elm_builtin"===e._3._3.ctor&&"Red"===e._3._3._0.ctor)break i;if("RBNode_elm_builtin"===e._3._4.ctor&&"Red"===e._3._4._0.ctor)break c;if("RBNode_elm_builtin"===e._4._3.ctor&&"Red"===e._4._3._0.ctor)break o;if("RBNode_elm_builtin"===e._4._4.ctor&&"Red"===e._4._4._0.ctor)break n;break t;case"NBlack":if("RBNode_elm_builtin"===e._3._3.ctor&&"Red"===e._3._3._0.ctor)break i;if("RBNode_elm_builtin"===e._3._4.ctor&&"Red"===e._3._4._0.ctor)break c;if("BBlack"===e._0.ctor&&"RBNode_elm_builtin"===e._4._3.ctor&&"Black"===e._4._3._0.ctor&&"RBNode_elm_builtin"===e._4._4.ctor&&"Black"===e._4._4._0.ctor)break r;break t;default:if("RBNode_elm_builtin"===e._3._3.ctor&&"Red"===e._3._3._0.ctor)break i;if("RBNode_elm_builtin"===e._3._4.ctor&&"Red"===e._3._4._0.ctor)break c;break t}case"NBlack":switch(e._4._0.ctor){case"Red":if("RBNode_elm_builtin"===e._4._3.ctor&&"Red"===e._4._3._0.ctor)break o;if("RBNode_elm_builtin"===e._4._4.ctor&&"Red"===e._4._4._0.ctor)break n;if("BBlack"===e._0.ctor&&"RBNode_elm_builtin"===e._3._3.ctor&&"Black"===e._3._3._0.ctor&&"RBNode_elm_builtin"===e._3._4.ctor&&"Black"===e._3._4._0.ctor)break e;break t;case"NBlack":if("BBlack"===e._0.ctor){if("RBNode_elm_builtin"===e._4._3.ctor&&"Black"===e._4._3._0.ctor&&"RBNode_elm_builtin"===e._4._4.ctor&&"Black"===e._4._4._0.ctor)break r;if("RBNode_elm_builtin"===e._3._3.ctor&&"Black"===e._3._3._0.ctor&&"RBNode_elm_builtin"===e._3._4.ctor&&"Black"===e._3._4._0.ctor)break e;break t}break t;default:if("BBlack"===e._0.ctor&&"RBNode_elm_builtin"===e._3._3.ctor&&"Black"===e._3._3._0.ctor&&"RBNode_elm_builtin"===e._3._4.ctor&&"Black"===e._3._4._0.ctor)break e;break t}default:switch(e._4._0.ctor){case"Red":if("RBNode_elm_builtin"===e._4._3.ctor&&"Red"===e._4._3._0.ctor)break o;if("RBNode_elm_builtin"===e._4._4.ctor&&"Red"===e._4._4._0.ctor)break n;break t;case"NBlack":if("BBlack"===e._0.ctor&&"RBNode_elm_builtin"===e._4._3.ctor&&"Black"===e._4._3._0.ctor&&"RBNode_elm_builtin"===e._4._4.ctor&&"Black"===e._4._4._0.ctor)break r;break t;default:break t}}else switch(e._3._0.ctor){case"Red":if("RBNode_elm_builtin"===e._3._3.ctor&&"Red"===e._3._3._0.ctor)break i;if("RBNode_elm_builtin"===e._3._4.ctor&&"Red"===e._3._4._0.ctor)break c;break t;case"NBlack":if("BBlack"===e._0.ctor&&"RBNode_elm_builtin"===e._3._3.ctor&&"Black"===e._3._3._0.ctor&&"RBNode_elm_builtin"===e._3._4.ctor&&"Black"===e._3._4._0.ctor)break e;break t;default:break t}else{if("RBNode_elm_builtin"!==e._4.ctor)break t;switch(e._4._0.ctor){case"Red":if("RBNode_elm_builtin"===e._4._3.ctor&&"Red"===e._4._3._0.ctor)break o;if("RBNode_elm_builtin"===e._4._4.ctor&&"Red"===e._4._4._0.ctor)break n;break t;case"NBlack":if("BBlack"===e._0.ctor&&"RBNode_elm_builtin"===e._4._3.ctor&&"Black"===e._4._3._0.ctor&&"RBNode_elm_builtin"===e._4._4.ctor&&"Black"===e._4._4._0.ctor)break r;break t;default:break t}}}return ke(e._0)(e._3._3._1)(e._3._3._2)(e._3._1)(e._3._2)(e._1)(e._2)(e._3._3._3)(e._3._3._4)(e._3._4)(e._4)}return ke(e._0)(e._3._1)(e._3._2)(e._3._4._1)(e._3._4._2)(e._1)(e._2)(e._3._3)(e._3._4._3)(e._3._4._4)(e._4)}return ke(e._0)(e._1)(e._2)(e._4._3._1)(e._4._3._2)(e._4._1)(e._4._2)(e._3)(e._4._3._3)(e._4._3._4)(e._4._4)}return ke(e._0)(e._1)(e._2)(e._4._1)(e._4._2)(e._4._4._1)(e._4._4._2)(e._3)(e._4._3)(e._4._4._3)(e._4._4._4)}return h(ye,se,e._4._3._1,e._4._3._2,h(ye,se,e._1,e._2,e._3,e._4._3._3),h(xe,se,e._4._1,e._4._2,e._4._3._4,Ee(e._4._4)))}return h(ye,se,e._3._4._1,e._3._4._2,h(xe,se,e._3._1,e._3._2,Ee(e._3._3),e._3._4._3),h(ye,se,e._1,e._2,e._3._4._4,e._4))}return t},xe=u(function(t,e,r,n,o){var c=h(ye,t,e,r,n,o);return fe(c)?Se(c):c}),Ae=u(function(t,e,r,n,o){return ee(n)||ee(o)?h(xe,_e(t),e,r,we(n),we(o)):h(ye,t,e,r,n,o)}),qe=u(function(t,e,r,n,o){var c=o;return"RBEmpty_elm_builtin"===c.ctor?d(Ne,t,n,o):h(Ae,t,e,r,n,h(qe,c._0,c._1,c._2,c._3,c._4))}),Ne=c(function(t,e,r){var n={ctor:"_Tuple2",_0:e,_1:r};if("RBEmpty_elm_builtin"!==n._0.ctor){if("RBEmpty_elm_builtin"===n._1.ctor){var o=n._1._0,c=n._0._0,i={ctor:"_Tuple3",_0:t,_1:c,_2:o};return"_Tuple3"===i.ctor&&"Black"===i._0.ctor&&"Red"===i._1.ctor&&"LBlack"===i._2.ctor?h(ye,se,n._0._1,n._0._2,n._0._3,n._0._4):p(te,"Black/Red/LBlack",t,S(c),S(o))}var u=n._0._2,a=n._0._4,s=n._0._1,f=h(qe,n._0._0,s,u,n._0._3,a),l=d(ie,s,u,a),_=l._0,v=l._1;return h(Ae,t,_,v,f,r)}if("RBEmpty_elm_builtin"!==n._1.ctor){var g=n._1._0,m=n._0._0,y={ctor:"_Tuple3",_0:t,_1:m,_2:g};return"_Tuple3"===y.ctor&&"Black"===y._0.ctor&&"LBlack"===y._1.ctor&&"Red"===y._2.ctor?h(ye,se,n._1._1,n._1._2,n._1._3,n._1._4):p(te,"Black/LBlack/Red",t,S(m),S(g))}switch(t.ctor){case"Red":return ve(he);case"Black":return ve(pe);default:return Rt.crash("cannot have bblack or nblack nodes at this point")}}),Oe=r(function(t,e){var r=e;if("RBEmpty_elm_builtin"===r.ctor)return ve(he);var n=r._1;return h(ye,r._0,n,_(t,n,r._2),_(Oe,t,r._3),_(Oe,t,r._4))}),Ce={ctor:"Same"},De={ctor:"Remove"},Re={ctor:"Insert"},Ie=c(function(t,e,r){var n=function(r){var o=r;if("RBEmpty_elm_builtin"===o.ctor){var c=e(N);return"Nothing"===c.ctor?{ctor:"_Tuple2",_0:Ce,_1:ge}:{ctor:"_Tuple2",_0:Re,_1:h(ye,le,t,c._0,ge,ge)}}var i=o._2,u=o._4,a=o._3,s=o._1,f=o._0;switch(_(x,t,s).ctor){case"EQ":var l=e(O(i));return"Nothing"===l.ctor?{ctor:"_Tuple2",_0:De,_1:d(Ne,f,a,u)}:{ctor:"_Tuple2",_0:Ce,_1:h(ye,f,s,l._0,a,u)};case"LT":var p=n(a),v=p._0,g=p._1;switch(v.ctor){case"Same":return{ctor:"_Tuple2",_0:Ce,_1:h(ye,f,s,i,g,u)};case"Insert":return{ctor:"_Tuple2",_0:Re,_1:h(xe,f,s,i,g,u)};default:return{ctor:"_Tuple2",_0:De,_1:h(Ae,f,s,i,g,u)}}default:var m=n(u),v=m._0,y=m._1;switch(v.ctor){case"Same":return{ctor:"_Tuple2",_0:Ce,_1:h(ye,f,s,i,a,y)};case"Insert":return{ctor:"_Tuple2",_0:Re,_1:h(xe,f,s,i,a,y)};default:return{ctor:"_Tuple2",_0:De,_1:h(Ae,f,s,i,a,y)}}}},o=n(r),c=o._0,i=o._1;switch(c.ctor){case"Same":return i;case"Insert":return be(i);default:return Te(i)}}),Le=c(function(t,e,r){return d(Ie,t,k(O(e)),r)}),Be=(r(function(t,e){return d(Le,t,e,ge)}),r(function(t,e){return d(Yt,Le,e,t)}),r(function(t,e){var r=c(function(e,r,n){return _(t,e,r)?d(Le,e,r,n):n});return d(Yt,r,ge,e)})),je=(r(function(t,e){return _(Be,r(function(t,r){return _(ce,t,e)}),t)}),r(function(t,e){var r=c(function(e,r,n){var o=n,c=o._1,i=o._0;return _(t,e,r)?{ctor:"_Tuple2",_0:d(Le,e,r,i),_1:c}:{ctor:"_Tuple2",_0:i,_1:d(Le,e,r,c)}});return d(Yt,r,{ctor:"_Tuple2",_0:ge,_1:ge},e)}),function(t){return d(j,r(function(t,e){var r=t;return d(Le,r._0,r._1,e)}),ge,t)}),Me=r(function(t,e){return d(Ie,t,k(N),e)}),Pe=(r(function(t,e){return d(Yt,c(function(t,e,r){return _(Me,t,r)}),t,e)}),function(){function t(t,e){return nt.nativeBinding(function(r){var n=setInterval(function(){nt.rawSpawn(e)},t);return function(){clearInterval(n)}})}return{now:nt.nativeBinding(function(t){t(nt.succeed(Date.now()))}),setInterval_:r(t)}}()),Fe=Pe.setInterval_,Ue=c(function(t,e,r){var n=e;if("[]"===n.ctor)return wt(r);var o=n._0,c=function(e){return d(Ue,t,n._1,d(Le,o,e,r))},i=nt.spawn(_(Fe,o,_(_t,t,o)));return _(mt,c,i)}),Je=r(function(t,e){var r=t,n=r._1,o=r._0,c=_(oe,o,e);return"Nothing"===c.ctor?d(Le,o,{ctor:"::",_0:n,_1:{ctor:"[]"}},e):d(Le,o,{ctor:"::",_0:n,_1:c._0},e)}),We=Pe.now,ze=c(function(t,e,r){var n=_(oe,e,r.taggers);if("Nothing"===n.ctor)return wt(r);var o=function(e){return Et(_(U,function(r){return _(dt,t,r(e))},n._0))};return _(mt,function(t){return wt(r)},_(mt,o,We))}),He=ot.leaf("Time"),Ke=r(function(t,e){return{taggers:t,processes:e}}),Ve=wt(_(Ke,ge,ge)),Xe=c(function(t,e,r){var n=r,o=c(function(t,e,r){var n=r;return{ctor:"_Tuple3",_0:n._0,_1:n._1,_2:_(mt,function(t){return n._2},nt.kill(e))}}),u=i(function(t,e,r,n){var o=n;return{ctor:"_Tuple3",_0:o._0,_1:d(Le,t,r,o._1),_2:o._2}}),a=c(function(t,e,r){var n=r;return{ctor:"_Tuple3",_0:{ctor:"::",_0:t,_1:n._0},_1:n._1,_2:n._2}}),s=d(j,Je,ge,e),f=v(Zt,a,u,o,s,n.processes,{ctor:"_Tuple3",_0:{ctor:"[]"},_1:ge,_2:wt({ctor:"_Tuple0"})}),l=f._0,p=f._1,h=f._2;return _(mt,function(t){return wt(_(Ke,s,t))},_(mt,function(e){return d(Ue,t,l,p)},h))}),Ge=r(function(t,e){return{ctor:"Every",_0:t,_1:e}}),Qe=(r(function(t,e){return He(_(Ge,t,e))}),r(function(t,e){var r=e;return _(Ge,r._0,function(e){return t(r._1(e))})}));ot.effectManagers.Time={pkg:"elm-lang/core",init:Ve,onEffects:Xe,onSelfMsg:ze,tag:"sub",subMap:Qe};var $e,Ye,Ze=(m.millisecond,m.second,m.minute,m.hour,m.dayOfWeek),tr=m.day,er=m.month,rr=m.year,nr=m.fromTime,or=m.toTime,cr=m.fromString,ir=_(kt,nr,We),ur={ctor:"Sun"},ar={ctor:"Sat"},sr={ctor:"Fri"},fr={ctor:"Thu"},lr={ctor:"Wed"},_r={ctor:"Tue"},dr={ctor:"Mon"},pr={ctor:"Dec"},hr={ctor:"Nov"},vr={ctor:"Oct"},gr={ctor:"Sep"},mr={ctor:"Aug"},yr={ctor:"Jul"},br={ctor:"Jun"},wr={ctor:"May"},kr={ctor:"Apr"},Tr={ctor:"Mar"},Er={ctor:"Feb"},Sr={ctor:"Jan"},xr=(Rt.crash,Rt.log,r(function(t,e){var r=e;return{ctor:"_Tuple2",_0:r._0,_1:t(r._1)}}),r(function(t,e){var r=e;return{ctor:"_Tuple2",_0:t(r._0),_1:r._1}}),function(t){return t._1}),Ar=function(t){return t._0},qr=function(t){var e=cr(t);return"Err"===e.ctor?b.crashCase("DatePicker.Date",{start:{line:541,column:5},end:{line:546,column:17}},e)(_(E["++"],"unsafeDate: failed to parse date:",e._0)):e._0},Nr=function(t){return b.eq(_(E["%"],t,400),0)||!b.eq(_(E["%"],t,100),0)&&b.eq(_(E["%"],t,4),0)},Or=r(function(t,e){switch(e.ctor){case"Jan":return 31;case"Feb":return Nr(t)?29:28;case"Mar":return 31;case"Apr":return 30;case"May":return 31;case"Jun":return 30;case"Jul":case"Aug":return 31;case"Sep":return 30;case"Oct":return 31;case"Nov":return 30;default:return 31}}),Cr=function(t){var e=t;switch(e){case 1:return Sr;case 2:return Er;case 3:return Tr;case 4:return kr;case 5:return wr;case 6:return br;case 7:return yr;case 8:return mr;case 9:return gr;case 10:return vr;case 11:return hr;case 12:return pr;default:return b.crashCase("DatePicker.Date",{start:{line:440,column:5},end:{line:478,column:72}},e)(_(E["++"],"monthFromInt: invalid month: ",S(e)))}},Dr=function(t){switch(t.ctor){case"Jan":return 1;case"Feb":return 2;case"Mar":return 3;case"Apr":return 4;case"May":return 5;case"Jun":return 6;case"Jul":return 7;case"Aug":return 8;case"Sep":return 9;case"Oct":return 10;case"Nov":return 11;default:return 12}},Rr=function(t){return Cr(_(r(function(t,e){return t+e}),1,d(w,A,12,Dr(t))))},Ir=function(t){var e=d(w,A,12,Dr(t)-1);return b.eq(e,0)?pr:Cr(e)},Lr=function(t){var e=Dr(t);return b.cmp(e,10)<0?_(E["++"],"0",S(e)):S(e)},Br=function(t){var e=t;switch(e){case 1:return dr;case 2:return _r;case 3:return lr;case 4:return fr;case 5:return sr;case 6:return ar;case 7:return ur;default:return b.crashCase("DatePicker.Date",{start:{line:339,column:5},end:{line:362,column:70}},e)(_(E["++"],"dayFromInt: invalid day: ",S(t)))}},jr=function(t){switch(t.ctor){case"Mon":return 1;case"Tue":return 2;case"Wed":return 3;case"Thu":return 4;case"Fri":return 5;case"Sat":return 6;default:return 7}},Mr=function(t){return b.cmp(t,10)<0?_(E["++"],"0",S(t)):S(t)},Pr=c(function(t,e,r){return qr(_(E["++"],S(t),_(E["++"],"/",_(E["++"],Lr(e),_(E["++"],"/",Mr(r))))))}),Fr=function(t){var e=d(w,A,7,jr(t)-1);return b.eq(e,0)?ur:Br(e)},Ur=function(t){return Br(_(r(function(t,e){return t+e}),1,d(w,A,7,jr(t))))},Jr=function(t){var e=tr(t)-1,r=rr(t),n=er(t),o=Ir(n),c=b.eq(o,pr)?r-1:r;return b.cmp(e,1)<0?d(Pr,c,o,_(Or,c,o)):d(Pr,r,n,e)},Wr=function(t){var e=tr(t)+1,r=rr(t),n=er(t),o=_(Or,r,n),c=Rr(n),i=b.eq(c,Sr)?r+1:r;return b.cmp(e,o)>0?d(Pr,i,c,1):d(Pr,r,n,e)},zr=function(t){var e=Ir(er(t)),r=b.eq(e,pr)?rr(t)-1:rr(t);return d(Pr,r,e,1)},Hr=function(t){var e=Rr(er(t)),r=b.eq(e,Sr)?rr(t)+1:rr(t);return d(Pr,r,e,1)},Kr=function(t){return d(Pr,rr(t),er(t),1)},Vr=function(t){return r(function(e,r){for(;;){if(b.eq(e,0))return r;var n=e-1,o=t(r);e=n,r=o}})},Xr=Vr(Wr),Gr=Vr(Jr),Qr=Vr(Ur),$r=(Vr(Ur),function(t){return{ctor:"_Tuple3",_0:rr(t),_1:Dr(er(t)),_2:tr(t)}}),Yr=r(function(t,e){var r=Fr(t);return H(function(t){for(;;){var e=t;if("[]"===e.ctor)return{ctor:"[]"};if(b.eq(Ze(e._0),r))return t;t=e._1}}(H(function(e){for(;;){var r=e;if("[]"===r.ctor)return{ctor:"[]"};if(b.eq(Ze(r._0),t))return e;e=r._1}}(e))))}),Zr=c(function(t,e,n){var o=r(function(t,r){for(;;){var n=Jr(t);if(b.eq($r(n),$r(e)))return{ctor:"::",_0:n,_1:r};var o=n,c={ctor:"::",_0:n,_1:r};t=o,r=c}});return _(Yr,t,_(o,n,{ctor:"[]"}))}),tn=function(t){switch(t.ctor){case"Jan":return"January";case"Feb":return"February";case"Mar":return"March";case"Apr":return"April";case"May":return"May";case"Jun":return"June";case"Jul":return"July";case"Aug":return"August";case"Sep":return"September";case"Oct":return"October";case"Nov":return"November";default:return"December"}},en=function(t){switch(t.ctor){case"Mon":return"Mo";case"Tue":return"Tu";case"Wed":return"We";case"Thu":return"Th";case"Fri":return"Fr";case"Sat":return"Sa";default:return"Su"}},rn=function(t){return _(E["++"],S(rr(t)),_(E["++"],"/",_(E["++"],Lr(er(t)),_(E["++"],"/",Mr(tr(t))))))},nn=d(Pr,1992,wr,29),on=function(){function t(t,r){if(t<0||t>=j(r))throw new Error("Index "+t+" is out of range. Check the length of your array first or use getMaybe or getWithDefault.");return e(t,r)}function e(t,e){for(var r=e.height;r>0;r--){for(var n=t>>5*r;e.lengths[n]<=t;)n++;n>0&&(t-=e.lengths[n-1]),e=e.table[n]}return e.table[t]}function n(t,e,r){return t<0||j(r)<=t?r:o(t,e,r)}function o(t,e,r){if(r=B(r),0===r.height)r.table[t]=e;else{var n=M(t,r);n>0&&(t-=r.lengths[n-1]),r.table[n]=o(t,e,r.table[n])}return r}function i(t,e){return t<=0?X:u(e,Math.floor(Math.log(t)/Math.log(K)),0,t)}function u(t,e,r,n){if(0===e){for(var o=new Array((n-r)%(K+1)),c=0;c<o.length;c++)o[c]=t(r+c);return{ctor:"_Array",height:0,table:o}}for(var i=Math.pow(K,e),o=new Array(Math.ceil((n-r)/i)),a=new Array(o.length),c=0;c<o.length;c++)o[c]=u(t,e-1,r+c*i,Math.min(r+(c+1)*i,n)),a[c]=j(o[c])+(c>0?a[c-1]:0);return{ctor:"_Array",height:e,table:o,lengths:a}}function a(t){if("[]"===t.ctor)return X;for(var e=new Array(K),r=[],n=0;"[]"!==t.ctor;)if(e[n]=t._0,t=t._1,++n===K){var o={ctor:"_Array",height:0,table:e};s(o,r),e=new Array(K),n=0}if(n>0){var o={ctor:"_Array",height:0,table:e.splice(0,n)};s(o,r)}for(var c=0;c<r.length-1;c++)r[c].table.length>0&&s(r[c],r);var i=r[r.length-1];return i.height>0&&1===i.table.length?i.table[0]:i}function s(t,e){var r=t.height;if(e.length===r){var n={ctor:"_Array",height:r+1,table:[],lengths:[]};e.push(n)}e[r].table.push(t);var o=j(t);e[r].lengths.length>0&&(o+=e[r].lengths[e[r].lengths.length-1]),e[r].lengths.push(o),e[r].table.length===K&&(s(e[r],e),e[r]={ctor:"_Array",height:r+1,table:[],lengths:[]})}function f(t,e){var r=l(t,e);return null!==r?r:U(e,P(t,e.height))}function l(t,e){if(0===e.height){if(e.table.length<K){var r={ctor:"_Array",height:0,table:e.table.slice()};return r.table.push(t),r}return null}var n=l(t,I(e));if(null!==n){var r=B(e);return r.table[r.table.length-1]=n,r.lengths[r.lengths.length-1]++,r}if(e.table.length<K){var o=P(t,e.height-1),r=B(e);return r.table.push(o),r.lengths.push(r.lengths[r.lengths.length-1]+j(o)),r}return null}function d(t){return p(D.Nil,t)}function p(t,e){for(var r=e.table.length-1;r>=0;r--)t=0===e.height?D.Cons(e.table[r],t):p(t,e.table[r]);return t}function h(t,e){var r={ctor:"_Array",height:e.height,table:new Array(e.table.length)};e.height>0&&(r.lengths=e.lengths);for(var n=0;n<e.table.length;n++)r.table[n]=0===e.height?t(e.table[n]):h(t,e.table[n]);return r}function v(t,e){return g(t,e,0)}function g(t,e,r){var n={ctor:"_Array",height:e.height,table:new Array(e.table.length)};e.height>0&&(n.lengths=e.lengths);for(var o=0;o<e.table.length;o++)n.table[o]=0===e.height?_(t,r+o,e.table[o]):g(t,e.table[o],0==o?r:r+e.lengths[o-1]);return n}function m(t,e,r){if(0===r.height)for(var n=0;n<r.table.length;n++)e=_(t,r.table[n],e);else for(var n=0;n<r.table.length;n++)e=m(t,e,r.table[n]);return e}function y(t,e,r){if(0===r.height)for(var n=r.table.length;n--;)e=_(t,r.table[n],e);else for(var n=r.table.length;n--;)e=y(t,e,r.table[n]);return e}function b(t,e,r){return t<0&&(t+=j(r)),e<0&&(e+=j(r)),k(t,w(e,r))}function w(t,e){if(t===j(e))return e;if(0===e.height){var r={ctor:"_Array",height:0};return r.table=e.table.slice(0,t),r}var n=M(t,e),o=w(t-(n>0?e.lengths[n-1]:0),e.table[n]);if(0===n)return o;var r={ctor:"_Array",height:e.height,table:e.table.slice(0,n),lengths:e.lengths.slice(0,n)};return o.table.length>0&&(r.table[n]=o,r.lengths[n]=j(o)+(n>0?r.lengths[n-1]:0)),r}function k(t,e){if(0===t)return e;if(0===e.height){var r={ctor:"_Array",height:0};return r.table=e.table.slice(t,e.table.length+1),r}var n=M(t,e),o=k(t-(n>0?e.lengths[n-1]:0),e.table[n]);if(n===e.table.length-1)return o;var r={ctor:"_Array",height:e.height,table:e.table.slice(n,e.table.length+1),lengths:new Array(e.table.length-n)};r.table[0]=o;for(var c=0,i=0;i<r.table.length;i++)c+=j(r.table[i]),r.lengths[i]=c;return r}function T(t,e){if(0===t.table.length)return e;if(0===e.table.length)return t;var r=E(t,e);if(r[0].table.length+r[1].table.length<=K){if(0===r[0].table.length)return r[1];if(0===r[1].table.length)return r[0];if(r[0].table=r[0].table.concat(r[1].table),r[0].height>0){for(var n=j(r[0]),o=0;o<r[1].lengths.length;o++)r[1].lengths[o]+=n;r[0].lengths=r[0].lengths.concat(r[1].lengths)}return r[0]}if(r[0].height>0){var c=A(t,e);c>V&&(r=R(r[0],r[1],c))}return U(r[0],r[1])}function E(t,e){if(0===t.height&&0===e.height)return[t,e];if(1!==t.height||1!==e.height)if(t.height===e.height){t=B(t),e=B(e);var r=E(I(t),L(e));S(t,r[1]),x(e,r[0])}else if(t.height>e.height){t=B(t);var r=E(I(t),e);S(t,r[0]),e=F(r[1],r[1].height+1)}else{e=B(e);var r=E(t,L(e)),n=0===r[0].table.length?0:1,o=0===n?1:0;x(e,r[n]),t=F(r[o],r[o].height+1)}if(0===t.table.length||0===e.table.length)return[t,e];var c=A(t,e);return c<=V?[t,e]:R(t,e,c)}function S(t,e){var r=t.table.length-1;t.table[r]=e,t.lengths[r]=j(e),t.lengths[r]+=r>0?t.lengths[r-1]:0}function x(t,e){if(e.table.length>0){t.table[0]=e,t.lengths[0]=j(e);for(var r=j(t.table[0]),n=1;n<t.lengths.length;n++)r+=j(t.table[n]),t.lengths[n]=r}else{t.table.shift();for(var n=1;n<t.lengths.length;n++)t.lengths[n]=t.lengths[n]-t.lengths[0];t.lengths.shift()}}function A(t,e){for(var r=0,n=0;n<t.table.length;n++)r+=t.table[n].table.length;for(var n=0;n<e.table.length;n++)r+=e.table[n].table.length;return t.table.length+e.table.length-(Math.floor((r-1)/K)+1)}function q(t,e,r){return r<t.length?t[r]:e[r-t.length]}function N(t,e,r,n){r<t.length?t[r]=n:e[r-t.length]=n}function O(t,e,r,n){N(t.table,e.table,r,n);var o=0===r||r===t.lengths.length?0:q(t.lengths,t.lengths,r-1);N(t.lengths,e.lengths,r,o+j(n))}function C(t,e){e<0&&(e=0);var r={ctor:"_Array",height:t,table:new Array(e)};return t>0&&(r.lengths=new Array(e)),r}function R(t,e,r){for(var n=C(t.height,Math.min(K,t.table.length+e.table.length-r)),o=C(t.height,n.table.length-(t.table.length+e.table.length-r)),c=0;q(t.table,e.table,c).table.length%K==0;)N(n.table,o.table,c,q(t.table,e.table,c)),N(n.lengths,o.lengths,c,q(t.lengths,e.lengths,c)),c++;for(var i=c,u=new C(t.height-1,0),a=0;c-i-(u.table.length>0?1:0)<r;){var s=q(t.table,e.table,c),f=Math.min(K-u.table.length,s.table.length);if(u.table=u.table.concat(s.table.slice(a,f)),u.height>0)for(var l=u.lengths.length,_=l;_<l+f-a;_++)u.lengths[_]=j(u.table[_]),u.lengths[_]+=_>0?u.lengths[_-1]:0;a+=f,s.table.length<=f&&(c++,a=0),u.table.length===K&&(O(n,o,i,u),u=C(t.height-1,0),i++)}for(u.table.length>0&&(O(n,o,i,u),i++);c<t.table.length+e.table.length;)O(n,o,i,q(t.table,e.table,c)),c++,i++;return[n,o]}function I(t){return t.table[t.table.length-1]}function L(t){return t.table[0]}function B(t){var e={ctor:"_Array",height:t.height,table:t.table.slice()};return t.height>0&&(e.lengths=t.lengths.slice()),e}function j(t){return 0===t.height?t.table.length:t.lengths[t.lengths.length-1]}function M(t,e){for(var r=t>>5*e.height;e.lengths[r]<=t;)r++;return r}function P(t,e){return 0===e?{ctor:"_Array",height:0,table:[t]}:{ctor:"_Array",height:e,table:[P(t,e-1)],lengths:[1]}}function F(t,e){return e===t.height?t:{ctor:"_Array",height:e,table:[F(t,e-1)],lengths:[j(t)]}}function U(t,e){return{ctor:"_Array",height:t.height+1,table:[t,e],lengths:[j(t),j(t)+j(e)]}}function J(t){var e=new Array(j(t));return W(e,0,t),e}function W(t,e,r){for(var n=0;n<r.table.length;n++)if(0===r.height)t[e+n]=r.table[n];else{var o=0===n?0:r.lengths[n-1];W(t,e+o,r.table[n])}}function z(t){return 0===t.length?X:H(t,Math.floor(Math.log(t.length)/Math.log(K)),0,t.length)}function H(t,e,r,n){if(0===e)return{ctor:"_Array",height:0,table:t.slice(r,n)};for(var o=Math.pow(K,e),c=new Array(Math.ceil((n-r)/o)),i=new Array(c.length),u=0;u<c.length;u++)c[u]=H(t,e-1,r+u*o,Math.min(r+(u+1)*o,n)),i[u]=j(c[u])+(u>0?i[u-1]:0);return{ctor:"_Array",height:e,table:c,lengths:i}}var K=32,V=2,X={ctor:"_Array",height:0,table:[]};return{empty:X,fromList:a,toList:d,initialize:r(i),append:r(T),push:r(f),slice:c(b),get:r(t),set:c(n),map:r(h),indexedMap:r(v),foldl:c(m),foldr:c(y),length:j,toJSArray:J,fromJSArray:z}}(),cn=(on.append,on.length),un=(on.slice,on.set,r(function(t,e){return b.cmp(0,t)<1&&b.cmp(t,on.length(e))<0?O(_(on.get,t,e)):N})),an=on.push,sn=on.empty,fn=(r(function(t,e){var n=r(function(e,r){return t(e)?_(on.push,e,r):r});return d(on.foldl,n,on.empty,e)}),on.foldr),ln=on.foldl,_n=(on.indexedMap,on.map,on.toList),dn=on.fromList,pn=on.initialize,hn=(r(function(t,e){return _(pn,t,k(e))}),function(){function t(t){return{ctor:"<decoder>",tag:"succeed",msg:t}}function e(t){return{ctor:"<decoder>",tag:"fail",msg:t}}function n(t){return{ctor:"<decoder>",tag:t}}function o(t,e){return{ctor:"<decoder>",tag:t,decoder:e}}function _(t){return{ctor:"<decoder>",tag:"null",value:t}}function d(t,e){return{ctor:"<decoder>",tag:"field",field:t,decoder:e}}function p(t,e){return{ctor:"<decoder>",tag:"index",index:t,decoder:e}}function h(t){return{ctor:"<decoder>",tag:"key-value",decoder:t}}function v(t,e){return{ctor:"<decoder>",tag:"map-many",func:t,decoders:e}}function g(t,e){return{ctor:"<decoder>",tag:"andThen",decoder:e,callback:t}}function m(t){return{ctor:"<decoder>",tag:"oneOf",decoders:t}}function y(t,e){return v(t,[e])}function w(t,e,r){return v(t,[e,r])}function k(t,e,r,n){return v(t,[e,r,n])}function T(t,e,r,n,o){return v(t,[e,r,n,o])}function E(t,e,r,n,o,c){return v(t,[e,r,n,o,c])}function S(t,e,r,n,o,c,i){return v(t,[e,r,n,o,c,i])}function x(t,e,r,n,o,c,i,u){return v(t,[e,r,n,o,c,i,u])}function A(t,e,r,n,o,c,i,u,a){return v(t,[e,r,n,o,c,i,u,a])}function q(t){return{tag:"ok",value:t}}function C(t,e){return{tag:"primitive",type:t,value:e}}function R(t,e){return{tag:"index",index:t,rest:e}}function I(t,e){return{tag:"field",field:t,rest:e}}function R(t,e){return{tag:"index",index:t,rest:e}}function L(t){return{tag:"oneOf",problems:t}}function B(t){return{tag:"fail",msg:t}}function j(t){for(var e="_";t;)switch(t.tag){case"primitive":return"Expecting "+t.type+("_"===e?"":" at "+e)+" but instead got: "+M(t.value);case"index":e+="["+t.index+"]",t=t.rest;break;case"field":e+="."+t.field,t=t.rest;break;case"oneOf":for(var r=t.problems,n=0;n<r.length;n++)r[n]=j(r[n]);return"I ran into the following problems"+("_"===e?"":" at "+e)+":\n\n"+r.join("\n");case"fail":return"I ran into a `fail` decoder"+("_"===e?"":" at "+e)+": "+t.msg}}function M(t){return void 0===t?"undefined":JSON.stringify(t)}function P(t,e){var r;try{r=JSON.parse(e)}catch(t){return ht("Given an invalid JSON: "+t.message)}return F(t,r)}function F(t,e){var r=U(t,e);return"ok"===r.tag?vt(r.value):ht(j(r))}function U(t,e){switch(t.tag){case"bool":return"boolean"==typeof e?q(e):C("a Bool",e);case"int":return"number"!=typeof e?C("an Int",e):-2147483647<e&&e<2147483647&&(0|e)===e?q(e):!isFinite(e)||e%1?C("an Int",e):q(e);case"float":return"number"==typeof e?q(e):C("a Float",e);case"string":return"string"==typeof e?q(e):e instanceof String?q(e+""):C("a String",e);case"null":return null===e?q(t.value):C("null",e);case"value":return q(e);case"list":if(!(e instanceof Array))return C("a List",e);for(var r=D.Nil,n=e.length;n--;){var o=U(t.decoder,e[n]);if("ok"!==o.tag)return R(n,o);r=D.Cons(o.value,r)}return q(r);case"array":if(!(e instanceof Array))return C("an Array",e);for(var c=e.length,i=new Array(c),n=c;n--;){var o=U(t.decoder,e[n]);if("ok"!==o.tag)return R(n,o);i[n]=o.value}return q(on.fromJSArray(i));case"maybe":var o=U(t.decoder,e);return q("ok"===o.tag?O(o.value):N);case"field":var u=t.field;if("object"!=typeof e||null===e||!(u in e))return C("an object with a field named `"+u+"`",e);var o=U(t.decoder,e[u]);return"ok"===o.tag?o:I(u,o);case"index":var a=t.index;if(!(e instanceof Array))return C("an array",e);if(a>=e.length)return C("a longer array. Need index "+a+" but there are only "+e.length+" entries",e);var o=U(t.decoder,e[a]);return"ok"===o.tag?o:R(a,o);case"key-value":if("object"!=typeof e||null===e||e instanceof Array)return C("an object",e);var s=D.Nil;for(var f in e){var o=U(t.decoder,e[f]);if("ok"!==o.tag)return I(f,o);var l=b.Tuple2(f,o.value);s=D.Cons(l,s)}return q(s);case"map-many":for(var _=t.func,d=t.decoders,n=0;n<d.length;n++){var o=U(d[n],e);if("ok"!==o.tag)return o;_=_(o.value)}return q(_);case"andThen":var o=U(t.decoder,e);return"ok"!==o.tag?o:U(t.callback(o.value),e);case"oneOf":for(var p=[],h=t.decoders;"[]"!==h.ctor;){var o=U(h._0,e);if("ok"===o.tag)return o;p.push(o),h=h._1}return L(p);case"fail":return B(t.msg);case"succeed":return q(t.msg)}}function J(t,e){if(t===e)return!0;if(t.tag!==e.tag)return!1;switch(t.tag){case"succeed":case"fail":return t.msg===e.msg;case"bool":case"int":case"float":case"string":case"value":return!0;case"null":return t.value===e.value;case"list":case"array":case"maybe":case"key-value":return J(t.decoder,e.decoder);case"field":return t.field===e.field&&J(t.decoder,e.decoder);case"index":return t.index===e.index&&J(t.decoder,e.decoder);case"map-many":return t.func===e.func&&W(t.decoders,e.decoders);case"andThen":return t.callback===e.callback&&J(t.decoder,e.decoder);case"oneOf":return W(t.decoders,e.decoders)}}function W(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(!J(t[n],e[n]))return!1;return!0}function z(t,e){return JSON.stringify(e,null,t)}function H(t){return t}function K(t){for(var e={};"[]"!==t.ctor;){var r=t._0;e[r._0]=r._1,t=t._1}return e}return{encode:r(z),runOnString:r(P),run:r(F),decodeNull:_,decodePrimitive:n,decodeContainer:r(o),decodeField:r(d),decodeIndex:r(p),map1:r(y),map2:c(w),map3:i(k),map4:u(T),map5:a(E),map6:s(S),map7:f(x),map8:l(A),decodeKeyValuePairs:h,andThen:r(g),fail:e,succeed:t,oneOf:m,identity:H,encodeNull:null,encodeArray:on.toJSArray,encodeList:D.toArray,encodeObject:K,equality:J}}()),vn=hn.encodeList,gn=(hn.encodeArray,hn.encodeObject),mn=hn.encodeNull,yn=hn.identity,bn=hn.identity,wn=(hn.identity,hn.identity),kn=hn.encode,Tn=hn.decodeNull,En=hn.decodePrimitive("value"),Sn=hn.andThen,xn=(hn.fail,hn.succeed),An=hn.run,qn=hn.runOnString,Nn=(hn.map8,hn.map7,hn.map6),On=hn.map5,Cn=(hn.map4,hn.map3),Dn=hn.map2,Rn=hn.map1,In=hn.oneOf,Ln=(hn.decodeIndex,hn.decodeField),Bn=r(function(t,e){return d(B,Ln,e,t)}),jn=hn.decodeKeyValuePairs,Mn=function(t){return _(Rn,je,jn(t))},Pn=function(t){return _(hn.decodeContainer,"list",t)},Fn=(hn.decodePrimitive("float"),hn.decodePrimitive("int")),Un=hn.decodePrimitive("bool"),Jn=hn.decodePrimitive("string"),Wn=function(){function t(t){return{type:"text",text:t}}function e(t){return r(function(e,r){return n(t,e,r)})}function n(t,e,r){for(var n=h(e),o=n.namespace,c=n.facts,i=[],u=0;"[]"!==r.ctor;){var a=r._0;u+=a.descendantsCount||0,i.push(a),r=r._1}return u+=i.length,{type:"node",tag:t,facts:c,children:i,namespace:o,descendantsCount:u}}function o(t,e,r){for(var n=h(e),o=n.namespace,c=n.facts,i=[],u=0;"[]"!==r.ctor;){var a=r._0;u+=a._1.descendantsCount||0,i.push(a),r=r._1}return u+=i.length,{type:"keyed-node",tag:t,facts:c,children:i,namespace:o,descendantsCount:u}}function u(t,e,r){return{type:"custom",facts:h(t).facts,model:e,impl:r}}function a(t,e){return{type:"tagger",tagger:t,node:e,descendantsCount:1+(e.descendantsCount||0)}}function s(t,e,r){return{type:"thunk",func:t,args:e,thunk:r,node:void 0}}function f(t,e){return s(t,[e],function(){return t(e)})}function l(t,e,r){return s(t,[e,r],function(){return _(t,e,r)})}function p(t,e,r,n){return s(t,[e,r,n],function(){return d(t,e,r,n)})}function h(t){for(var e,r={};"[]"!==t.ctor;){var n=t._0,o=n.key;if(o===gt||o===mt||o===vt){var c=r[o]||{};c[n.realKey]=n.value,r[o]=c}else if(o===ht){for(var i=r[o]||{},u=n.value;"[]"!==u.ctor;){var a=u._0;i[a._0]=a._1,u=u._1}r[o]=i}else if("namespace"===o)e=n.value;else if("className"===o){var s=r[o];r[o]=void 0===s?n.value:s+" "+n.value}else r[o]=n.value;t=t._1}return{facts:r,namespace:e}}function v(t){return{key:ht,value:t}}function g(t,e){return{key:t,value:e}}function m(t,e){return{key:gt,realKey:t,value:e}}function y(t,e,r){return{key:mt,realKey:e,value:{value:r,namespace:t}}}function w(t,e,r){return{key:vt,realKey:t,value:{options:e,decoder:r}}}function k(t,e){return(t.options===e.options||t.options.stopPropagation===e.options.stopPropagation&&t.options.preventDefault===e.options.preventDefault)&&hn.equality(t.decoder,e.decoder)}function T(t,e){return e.key!==vt?e:w(e.realKey,e.value.options,_(Rn,t,e.value.decoder))}function E(t,e){switch(t.type){case"thunk":return t.node||(t.node=t.thunk()),E(t.node,e);case"tagger":for(var r=t.node,n=t.tagger;"tagger"===r.type;)"object"!=typeof n?n=[n,r.tagger]:n.push(r.tagger),r=r.node;var o={tagger:n,parent:e},c=E(r,o);return c.elm_event_node_ref=o,c;case"text":return yt.createTextNode(t.text);case"node":var c=t.namespace?yt.createElementNS(t.namespace,t.tag):yt.createElement(t.tag);S(c,e,t.facts);for(var i=t.children,u=0;u<i.length;u++)c.appendChild(E(i[u],e));return c;case"keyed-node":var c=t.namespace?yt.createElementNS(t.namespace,t.tag):yt.createElement(t.tag);S(c,e,t.facts);for(var i=t.children,u=0;u<i.length;u++)c.appendChild(E(i[u]._1,e));return c;case"custom":var c=t.impl.render(t.model);return S(c,e,t.facts),c}}function S(t,e,r){for(var n in r){var o=r[n];switch(n){case ht:x(t,o);break;case vt:A(t,e,o);break;case gt:N(t,o);break;case mt:O(t,o);break;case"value":t[n]!==o&&(t[n]=o);break;default:t[n]=o}}}function x(t,e){var r=t.style;for(var n in e)r[n]=e[n]}function A(t,e,r){var n=t.elm_handlers||{};for(var o in r){var c=n[o],i=r[o];if(void 0===i)t.removeEventListener(o,c),n[o]=void 0;else if(void 0===c){var c=q(e,i);t.addEventListener(o,c),n[o]=c}else c.info=i}t.elm_handlers=n}function q(t,e){function r(e){var n=r.info,o=_(hn.run,n.decoder,e);if("Ok"===o.ctor){var c=n.options;c.stopPropagation&&e.stopPropagation(),c.preventDefault&&e.preventDefault();for(var i=o._0,u=t;u;){var a=u.tagger;if("function"==typeof a)i=a(i);else for(var s=a.length;s--;)i=a[s](i);u=u.parent}}}return r.info=e,r}function N(t,e){for(var r in e){var n=e[r];void 0===n?t.removeAttribute(r):t.setAttribute(r,n)}}function O(t,e){for(var r in e){var n=e[r],o=n.namespace,c=n.value;void 0===c?t.removeAttributeNS(o,r):t.setAttributeNS(o,r,c)}}function C(t,e){var r=[];return R(t,e,r,0),r}function D(t,e,r){return{index:e,type:t,data:r,domNode:void 0,eventNode:void 0}}function R(t,e,r,n){if(t!==e){var o=t.type,c=e.type;if(o!==c)return void r.push(D("p-redraw",n,e));switch(c){case"thunk":for(var i=t.args,u=e.args,a=i.length,s=t.func===e.func&&a===u.length;s&&a--;)s=i[a]===u[a];if(s)return void(e.node=t.node);e.node=e.thunk();var f=[];return R(t.node,e.node,f,0),void(f.length>0&&r.push(D("p-thunk",n,f)));case"tagger":for(var l=t.tagger,_=e.tagger,d=!1,p=t.node;"tagger"===p.type;)d=!0,"object"!=typeof l?l=[l,p.tagger]:l.push(p.tagger),p=p.node;for(var h=e.node;"tagger"===h.type;)d=!0,"object"!=typeof _?_=[_,h.tagger]:_.push(h.tagger),h=h.node;return d&&l.length!==_.length?void r.push(D("p-redraw",n,e)):((d?I(l,_):l===_)||r.push(D("p-tagger",n,_)),void R(p,h,r,n+1));case"text":if(t.text!==e.text)return void r.push(D("p-text",n,e.text));return;case"node":if(t.tag!==e.tag||t.namespace!==e.namespace)return void r.push(D("p-redraw",n,e));var v=L(t.facts,e.facts);return void 0!==v&&r.push(D("p-facts",n,v)),void B(t,e,r,n);case"keyed-node":if(t.tag!==e.tag||t.namespace!==e.namespace)return void r.push(D("p-redraw",n,e));var v=L(t.facts,e.facts);return void 0!==v&&r.push(D("p-facts",n,v)),void j(t,e,r,n);case"custom":if(t.impl!==e.impl)return void r.push(D("p-redraw",n,e));var v=L(t.facts,e.facts);void 0!==v&&r.push(D("p-facts",n,v));var g=e.impl.diff(t,e);if(g)return void r.push(D("p-custom",n,g));return}}}function I(t,e){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function L(t,e,r){var n;for(var o in t)if(o!==ht&&o!==vt&&o!==gt&&o!==mt)if(o in e){var c=t[o],i=e[o];c===i&&"value"!==o||r===vt&&k(c,i)||(n=n||{},n[o]=i)}else n=n||{},n[o]=void 0===r?"string"==typeof t[o]?"":null:r===ht?"":r===vt||r===gt?void 0:{namespace:t[o].namespace,value:void 0};else{var u=L(t[o],e[o]||{},o);u&&(n=n||{},n[o]=u)}for(var a in e)a in t||(n=n||{},n[a]=e[a]);return n}function B(t,e,r,n){var o=t.children,c=e.children,i=o.length,u=c.length;i>u?r.push(D("p-remove-last",n,i-u)):i<u&&r.push(D("p-append",n,c.slice(i)));for(var a=n,s=i<u?i:u,f=0;f<s;f++){a++;var l=o[f];R(l,c[f],r,a),a+=l.descendantsCount||0}}function j(t,e,r,n){for(var o=[],c={},i=[],u=t.children,a=e.children,s=u.length,f=a.length,l=0,_=0,d=n;l<s&&_<f;){var p=u[l],h=a[_],v=p._0,g=h._0,m=p._1,y=h._1;if(v!==g){var b=l+1<s,w=_+1<f;if(b)var k=u[l+1],T=k._0,E=k._1,S=g===T;if(w)var x=a[_+1],A=x._0,q=x._1,N=v===A;if(b&&w&&N&&S)d++,R(m,q,o,d),M(c,o,v,y,_,i),d+=m.descendantsCount||0,d++,P(c,o,v,E,d),d+=E.descendantsCount||0,l+=2,_+=2;else if(w&&N)d++,M(c,o,g,y,_,i),R(m,q,o,d),d+=m.descendantsCount||0,l+=1,_+=2;else if(b&&S)d++,P(c,o,v,m,d),d+=m.descendantsCount||0,d++,R(E,y,o,d),d+=E.descendantsCount||0,l+=2,_+=1;else{if(!b||!w||T!==A)break;d++,P(c,o,v,m,d),M(c,o,g,y,_,i),d+=m.descendantsCount||0,d++,R(E,q,o,d),d+=E.descendantsCount||0,l+=2,_+=2}}else d++,R(m,y,o,d),d+=m.descendantsCount||0,l++,_++}for(;l<s;){d++;var p=u[l],m=p._1;P(c,o,p._0,m,d),d+=m.descendantsCount||0,l++}for(var O;_<f;){O=O||[];var h=a[_];M(c,o,h._0,h._1,void 0,O),_++}(o.length>0||i.length>0||void 0!==O)&&r.push(D("p-reorder",n,{patches:o,inserts:i,endInserts:O}))}function M(t,e,r,n,o,c){var i=t[r];if(void 0===i)return i={tag:"insert",vnode:n,index:o,data:void 0},c.push({index:o,entry:i}),void(t[r]=i);if("remove"===i.tag){c.push({index:o,entry:i}),i.tag="move";var u=[];return R(i.vnode,n,u,i.index),i.index=o,void(i.data.data={patches:u,entry:i})}M(t,e,r+bt,n,o,c)}function P(t,e,r,n,o){var c=t[r];if(void 0===c){var i=D("p-remove",o,void 0);return e.push(i),void(t[r]={tag:"remove",vnode:n,index:o,data:i})}if("insert"===c.tag){c.tag="move";var u=[];R(n,c.vnode,u,o);var i=D("p-remove",o,{patches:u,entry:c});return void e.push(i)}P(t,e,r+bt,n,o)}function F(t,e,r,n){U(t,e,r,0,0,e.descendantsCount,n)}function U(t,e,r,n,o,c,i){for(var u=r[n],a=u.index;a===o;){var s=u.type;if("p-thunk"===s)F(t,e.node,u.data,i);else if("p-reorder"===s){u.domNode=t,u.eventNode=i;var f=u.data.patches;f.length>0&&U(t,e,f,0,o,c,i)}else if("p-remove"===s){u.domNode=t,u.eventNode=i;var l=u.data;if(void 0!==l){l.entry.data=t;var f=l.patches;f.length>0&&U(t,e,f,0,o,c,i)}}else u.domNode=t,u.eventNode=i;if(n++,!(u=r[n])||(a=u.index)>c)return n}switch(e.type){case"tagger":for(var _=e.node;"tagger"===_.type;)_=_.node;return U(t,_,r,n,o+1,c,t.elm_event_node_ref);case"node":for(var d=e.children,p=t.childNodes,h=0;h<d.length;h++){o++;var v=d[h],g=o+(v.descendantsCount||0);if(o<=a&&a<=g&&(n=U(p[h],v,r,n,o,g,i),!(u=r[n])||(a=u.index)>c))return n;o=g}return n;case"keyed-node":for(var d=e.children,p=t.childNodes,h=0;h<d.length;h++){o++;var v=d[h]._1,g=o+(v.descendantsCount||0);if(o<=a&&a<=g&&(n=U(p[h],v,r,n,o,g,i),!(u=r[n])||(a=u.index)>c))return n;o=g}return n;case"text":case"thunk":throw new Error("should never traverse `text` or `thunk` nodes like this")}}function J(t,e,r,n){return 0===r.length?t:(F(t,e,r,n),W(t,r))}function W(t,e){for(var r=0;r<e.length;r++){var n=e[r],o=n.domNode,c=z(o,n);o===t&&(t=c)}return t}function z(t,e){switch(e.type){case"p-redraw":return H(t,e.data,e.eventNode);case"p-facts":return S(t,e.eventNode,e.data),t;case"p-text":return t.replaceData(0,t.length,e.data),t;case"p-thunk":return W(t,e.data);case"p-tagger":return void 0!==t.elm_event_node_ref?t.elm_event_node_ref.tagger=e.data:t.elm_event_node_ref={tagger:e.data,parent:e.eventNode},t;case"p-remove-last":for(var r=e.data;r--;)t.removeChild(t.lastChild);return t;case"p-append":for(var n=e.data,r=0;r<n.length;r++)t.appendChild(E(n[r],e.eventNode));return t;case"p-remove":var o=e.data;if(void 0===o)return t.parentNode.removeChild(t),t;var c=o.entry;return void 0!==c.index&&t.parentNode.removeChild(t),c.data=W(t,o.patches),t;case"p-reorder":return K(t,e);case"p-custom":var i=e.data;return i.applyPatch(t,i.data);default:throw new Error("Ran into an unknown patch!")}}function H(t,e,r){var n=t.parentNode,o=E(e,r);return void 0===o.elm_event_node_ref&&(o.elm_event_node_ref=t.elm_event_node_ref),n&&o!==t&&n.replaceChild(o,t),o}function K(t,e){var r=e.data,n=V(r.endInserts,e);t=W(t,r.patches);for(var o=r.inserts,c=0;c<o.length;c++){var i=o[c],u=i.entry,a="move"===u.tag?u.data:E(u.vnode,e.eventNode);t.insertBefore(a,t.childNodes[i.index])}return void 0!==n&&t.appendChild(n),t}function V(t,e){if(void 0!==t){for(var r=yt.createDocumentFragment(),n=0;n<t.length;n++){var o=t[n],c=o.entry;r.appendChild("move"===c.tag?c.data:E(c.vnode,e.eventNode))}return r}}function X(t){return r(function(e,r){return function(n){return function(o,c,i){var u=t(n,c);void 0===i?Z(r,o,c,u):rt(_(e,i,r),o,c,u)}}})}function G(t){var e=b.Tuple2(b.Tuple0,it);return _(wt,$e,{init:e,view:function(){return t},update:r(function(){return e}),subscriptions:function(){return ft}})()}function Q(t,e){return function(t,r,n){if(void 0===r)return t;Y("The `"+e+"` module does not need flags.\nInitialize it with no arguments and you should be all set!",n)}}function $(t,e){return function(r,n,o){if(void 0===t){var c="Are you trying to sneak a Never value into Elm? Trickster!\nIt looks like "+e+".main is defined with `programWithFlags` but has type `Program Never`.\nUse `program` instead if you do not want flags.";Y(c,o)}var i=_(hn.run,t,n);if("Ok"===i.ctor)return r(i._0);var c="Trying to initialize the `"+e+"` module with an unexpected flag.\nI tried to convert it to an Elm value, but ran into this problem:\n\n"+i._0;Y(c,o)}}function Y(t,e){throw e&&(e.innerHTML='<div style="padding-left:1em;"><h2 style="font-weight:normal;"><b>Oops!</b> Something went wrong when starting your Elm program.</h2><pre style="padding-left:1em;">'+t+"</pre></div>"),new Error(t)}function Z(t,e,r,n){e.embed=function(e,r){for(;e.lastChild;)e.removeChild(e.lastChild);return ot.initialize(n(t.init,r,e),t.update,t.subscriptions,tt(e,t.view))},e.fullscreen=function(e){return ot.initialize(n(t.init,e,document.body),t.update,t.subscriptions,tt(document.body,t.view))}}function tt(t,e){return function(r,n){var o={tagger:r,parent:void 0},c=e(n),i=E(c,o);return t.appendChild(i),et(i,e,c,o)}}function et(t,e,r,n){function o(){switch(i){case"NO_REQUEST":throw new Error("Unexpected draw callback.\nPlease report this to <https://github.com/elm-lang/virtual-dom/issues>.");case"PENDING_REQUEST":Tt(o),i="EXTRA_REQUEST";var r=e(c),a=C(u,r);return t=J(t,u,a,n),void(u=r);case"EXTRA_REQUEST":return void(i="NO_REQUEST")}}var c,i="NO_REQUEST",u=r;return function(t){"NO_REQUEST"===i&&Tt(o),i="PENDING_REQUEST",c=t}}function rt(t,e,r,n){e.fullscreen=function(e){var o={doc:void 0};return ot.initialize(n(t.init,e,document.body),t.update(ct(o)),t.subscriptions,ut(r,document.body,o,t.view,t.viewIn,t.viewOut))},e.embed=function(e,o){var c={doc:void 0};return ot.initialize(n(t.init,o,e),t.update(ct(c)),t.subscriptions,ut(r,e,c,t.view,t.viewIn,t.viewOut))}}function ct(t){return nt.nativeBinding(function(e){var r=t.doc;if(r){var n=r.getElementsByClassName("debugger-sidebar-messages")[0];n&&(n.scrollTop=n.scrollHeight)}e(nt.succeed(b.Tuple0))})}function ut(t,e,r,n,o,c){return function(i,u){var a={tagger:i,parent:void 0},s={tagger:i,parent:void 0},f=n(u),l=E(f,a);e.appendChild(l);var _=et(l,n,f,a),d=o(u)._1,p=E(d,s);e.appendChild(p);var h=lt(a,p,o),v=et(p,h,d,s),g=at(u,c,s,e,t,r);return function(t){_(t),v(t),g(t)}}}function at(t,e,r,n,o,c){var i,u;return function(t){if(t.isDebuggerOpen){if(!c.doc)return i=e(t),void(u=st(o,c,i,r));yt=c.doc;var n=e(t),a=C(i,n);u=J(u,i,a,r),i=n,yt=document}}}function st(t,e,r,n){function o(){e.doc=void 0,u.close()}var c=screen.width-900,i=screen.height-360,u=window.open("","","width=900,height=360,left="+c+",top="+i);yt=u.document,e.doc=yt,yt.title="Debugger - "+t,yt.body.style.margin="0",yt.body.style.padding="0";var a=E(r,n);return yt.body.appendChild(a),yt.addEventListener("keydown",function(t){t.metaKey&&82===t.which&&window.location.reload(),38===t.which&&(n.tagger({ctor:"Up"}),t.preventDefault()),40===t.which&&(n.tagger({ctor:"Down"}),t.preventDefault())}),window.addEventListener("unload",o),u.addEventListener("unload",function(){e.doc=void 0,window.removeEventListener("unload",o),n.tagger({ctor:"Close"})}),yt=document,a}function lt(t,e,r){var n,o=pt(e),c="Normal",i=t.tagger,u=function(){};return function(e){var a=r(e),s=a._0.ctor;return t.tagger="Normal"===s?i:u,c!==s&&(_t("removeEventListener",o,c),_t("addEventListener",o,s),"Normal"===c&&(n=document.body.style.overflow,document.body.style.overflow="hidden"),"Normal"===s&&(document.body.style.overflow=n),c=s),a._1}}function _t(t,e,r){switch(r){case"Normal":return;case"Pause":return dt(t,e,Et);case"Message":return dt(t,e,St)}}function dt(t,e,r){for(var n=0;n<r.length;n++)document.body[t](r[n],e,!0)}function pt(t){return function(e){if("keydown"!==e.type||!e.metaKey||82!==e.which){for(var r="scroll"===e.type||"wheel"===e.type,n=e.target;null!==n;){if("elm-overlay-message-details"===n.className&&r)return;if(n===t&&!r)return;n=n.parentNode}e.stopPropagation(),e.preventDefault()}}}var ht="STYLE",vt="EVENT",gt="ATTR",mt="ATTR_NS",yt="undefined"!=typeof document?document:{},bt="_elmW6BL",wt=X(Q),kt=X($),Tt="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,1e3/60)},Et=["click","dblclick","mousemove","mouseup","mousedown","mouseenter","mouseleave","touchstart","touchend","touchcancel","touchmove","pointerdown","pointerup","pointerover","pointerout","pointerenter","pointerleave","pointermove","pointercancel","dragstart","drag","dragend","dragenter","dragover","dragleave","drop","keyup","keydown","keypress","input","change","focus","blur"],St=Et.concat("wheel","scroll");return{node:e,text:t,custom:u,map:r(a),on:c(w),style:v,property:r(g),attribute:r(m),attributeNS:c(y),mapProperty:r(T),lazy:r(f),lazy2:c(l),lazy3:i(p),keyedNode:c(o),program:wt,programWithFlags:kt,staticProgram:G}}(),zn=function(){function t(t){return t}function e(t,e){return nt.nativeBinding(function(r){var n="history-"+t+".txt",o=JSON.stringify(e),c="text/plain;charset=utf-8",i=nt.succeed(b.Tuple0);if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([o],{type:c}),n),r(i);var u=document.createElement("a");u.setAttribute("href","data:"+c+","+encodeURIComponent(o)),u.setAttribute("download",n),u.style.display="none",document.body.appendChild(u),u.click(),document.body.removeChild(u),r(i)})}function n(t){switch(typeof t){case"boolean":return t?"True":"False";case"number":return t+"";case"string":return'"'+s(t,!1)+'"'}if(t instanceof String)return"'"+s(t,!0)+"'";if("object"!=typeof t||null===t||!("ctor"in t))return"…";var e=t.ctor.substring(0,5);if("_Tupl"===e||"_Task"===e)return"…";if(["_Array","<decoder>","_Process","::","[]","Set_elm_builtin","RBNode_elm_builtin","RBEmpty_elm_builtin"].indexOf(t.ctor)>=0)return"…";var r=Object.keys(t);switch(r.length){case 1:return t.ctor;case 2:return t.ctor+" "+n(t._0);default:return t.ctor+" … "+n(t[r[r.length-1]])}}function o(t){return{ctor:"Primitive",_0:t}}function i(t){var e=typeof t;if("boolean"===e)return{ctor:"Constructor",_0:O(t?"True":"False"),_1:!0,_2:D.Nil};if("number"===e)return o(t+"");if("string"===e)return{ctor:"S",_0:'"'+s(t,!1)+'"'};if(t instanceof String)return{ctor:"S",_0:"'"+s(t,!0)+"'"};if(t instanceof Date)return o("<"+t.toString()+">");if(null===t)return o("XXX");if("object"===e&&"ctor"in t){var r=t.ctor;if("::"===r||"[]"===r)return{ctor:"Sequence",_0:{ctor:"ListSeq"},_1:!0,_2:_(U,i,t)};if("Set_elm_builtin"===r)return{ctor:"Sequence",_0:{ctor:"SetSeq"},_1:!0,_2:d(_elm_lang$core$Set$foldr,l,D.Nil,t)};if("RBNode_elm_builtin"===r||"RBEmpty_elm_builtin"==r)return{ctor:"Dictionary",_0:!0,_1:d(Xt,p,D.Nil,t)};if("_Array"===r)return{ctor:"Sequence",_0:{ctor:"ArraySeq"},_1:!0,_2:d(fn,l,D.Nil,t)};var n=t.ctor.substring(0,5);if("_Task"===n)return o("<task>");if("<decoder>"===r)return o(r);if("_Process"===r)return o("<process>");var c=D.Nil;for(var u in t)"ctor"!==u&&(c=D.Cons(i(t[u]),c));return{ctor:"Constructor",_0:"_Tupl"===n?N:O(r),_1:!0,_2:H(c)}}if("object"===e){var a=ge;for(var u in t)a=d(Le,u,i(t[u]),a);return{ctor:"Record",_0:!0,_1:a}}return o("XXX")}function u(t,e){return D.Cons(i(t),e)}function a(t,e,r){return D.Cons(b.Tuple2(i(t),i(e)),r)}function s(t,e){var r=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return e?r.replace(/\'/g,"\\'"):r.replace(/\"/g,'\\"')}var f=nt.nativeBinding(function(t){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","text/json"),e.style.display="none",e.addEventListener("change",function(r){var n=new FileReader;n.onload=function(e){t(nt.succeed(e.target.result))},n.readAsText(r.target.files[0]),document.body.removeChild(e)}),document.body.appendChild(e),e.click()}),l=r(u),p=c(a);return{upload:f,download:r(e),unsafeCoerce:t,messageToString:n,init:i}}(),Hn=(Wn.keyedNode,Wn.lazy3),Kn=Wn.lazy2,Vn=(Wn.lazy,{stopPropagation:!1,preventDefault:!1}),Xn=Wn.on,Gn=r(function(t,e){return d(Xn,t,Vn,e)}),Qn=function(t){return _(Gn,"click",xn(t))},$n=Wn.style,Yn=Wn.attribute,Zn=Yn("id"),to=Wn.property,eo=function(t){return _(to,"className",wn(t))},ro=function(t){return _(to,"href",wn(t))},no=Wn.map,oo=Wn.text,co=Wn.node,io=co("div"),uo=co("span"),ao=co("a"),so=(co("h1"),r(function(t,e){return{stopPropagation:t,preventDefault:e}}),$n({ctor:"::",_0:{ctor:"_Tuple2",_0:"color",_1:"rgb(136, 19, 145)"},_1:{ctor:"[]"}})),fo=$n({ctor:"::",_0:{ctor:"_Tuple2",_0:"color",_1:"rgb(28, 0, 207)"},_1:{ctor:"[]"}}),lo=$n({ctor:"::",_0:{ctor:"_Tuple2",_0:"color",_1:"rgb(196, 26, 22)"},_1:{ctor:"[]"}}),_o=function(t){return $n("Nothing"===t.ctor?{ctor:"[]"}:{ctor:"::",_0:{ctor:"_Tuple2",_0:"padding-left",_1:"4ch"},_1:{ctor:"[]"}})},po=function(t){return _(uo,{ctor:"::",_0:$n({ctor:"::",_0:{ctor:"_Tuple2",_0:"color",_1:"#777"},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"padding-left",_1:"2ch"},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"width",_1:"2ch"},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"display",_1:"inline-block"},_1:{ctor:"[]"}}}}}),_1:{ctor:"[]"}},{ctor:"::",_0:oo(t),_1:{ctor:"[]"}})},ho=c(function(t,e,r){var n=function(){var t=e;return po("Nothing"===t.ctor?"":!0===t._0?"▸":"▾")}(),o=t;return"Nothing"===o.ctor?{ctor:"::",_0:n,_1:r}:{ctor:"::",_0:n,_1:{ctor:"::",_0:_(uo,{ctor:"::",_0:so,_1:{ctor:"[]"}},{ctor:"::",_0:oo(o._0),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:oo(" = "),_1:r}}}}),vo=c(function(t,e,r){var n=r;if("[]"===n.ctor)return{ctor:"_Tuple2",_0:t+1,_1:{ctor:"::",_0:oo("}"),_1:{ctor:"[]"}}};var o=n._0,c=t+Kt(o)+1;if(b.cmp(c,18)>0)return{ctor:"_Tuple2",_0:t+2,_1:{ctor:"::",_0:oo("…}"),_1:{ctor:"[]"}}};var i=d(vo,c,",",n._1),u=i._0,a=i._1;return{ctor:"_Tuple2",_0:u,_1:{ctor:"::",_0:oo(e),_1:{ctor:"::",_0:_(uo,{ctor:"::",_0:so,_1:{ctor:"[]"}},{ctor:"::",_0:oo(o),_1:{ctor:"[]"}}),_1:a}}}}),go=function(t){return b.cmp(Kt(t),18)<1?t:_(E["++"],_(Wt,8,t),_(E["++"],"...",_(Jt,8,t)))},mo=function(t){return{ctor:"_Tuple2",_0:Kt(t),_1:{ctor:"::",_0:oo(t),_1:{ctor:"[]"}}}},yo=c(function(t,e,r){var n=r;if("[]"===n.ctor)return{ctor:"[]"};var o=n._1,c=n._0;return b.cmp(t,0)<1?{ctor:"::",_0:e(c),_1:o}:{ctor:"::",_0:c,_1:d(yo,t-1,e,o)}}),bo=r(function(t,e){switch(e.ctor){case"ListSeq":return _(E["++"],"List(",_(E["++"],S(t),")"));case"SetSeq":return _(E["++"],"Set(",_(E["++"],S(t),")"));default:return _(E["++"],"Array(",_(E["++"],S(t),")"))}}),wo=function(t){var e=t;switch(e.ctor){case"S":var r=go(e._0);return{ctor:"_Tuple2",_0:Kt(r),_1:{ctor:"::",_0:_(uo,{ctor:"::",_0:lo,_1:{ctor:"[]"}},{ctor:"::",_0:oo(r),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}};case"Primitive":var n=e._0;return{ctor:"_Tuple2",_0:Kt(n),_1:{ctor:"::",_0:_(uo,{ctor:"::",_0:fo,_1:{ctor:"[]"}},{ctor:"::",_0:oo(n),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}};case"Sequence":return mo(_(bo,M(e._2),e._0));case"Dictionary":return mo(_(E["++"],"Dict(",_(E["++"],S(M(e._1)),")")));case"Record":return ko(e._1);default:return mo("[]"===e._2.ctor?_(q,"Unit",e._0):function(){var t=e._0;return"Nothing"===t.ctor?_(E["++"],"Tuple(",_(E["++"],S(M(e._2)),")")):_(E["++"],t._0," …")}())}},ko=function(t){return me(t)?{ctor:"_Tuple2",_0:2,_1:{ctor:"::",_0:oo("{}"),_1:{ctor:"[]"}}}:d(To,0,"{ ",$t(t))},To=c(function(t,e,r){var n=r;if("[]"===n.ctor)return{ctor:"_Tuple2",_0:t+2,_1:{ctor:"::",_0:oo(" }"),_1:{ctor:"[]"}}};var o=n._0._0,c=Eo(n._0._1),i=c._0,u=c._1,a=Kt(o),s=t+a+i+5;if(b.cmp(s,60)>0)return{ctor:"_Tuple2",_0:t+4,_1:{ctor:"::",_0:oo(", … }"),_1:{ctor:"[]"}}};var f=d(To,s,", ",n._1),l=f._0,p=f._1;return{ctor:"_Tuple2",_0:l,_1:{ctor:"::",_0:oo(e),_1:{ctor:"::",_0:_(uo,{ctor:"::",_0:so,_1:{ctor:"[]"}},{ctor:"::",_0:oo(o),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:oo(" = "),_1:{ctor:"::",_0:_(uo,{ctor:"[]"},u),_1:p}}}}}}),Eo=function(t){var e=t;return"Record"===e.ctor?d(vo,0,"{",Gt(e._1)):wo(t)},So=c(function(t,e,r){return{ctor:"Constructor",_0:t,_1:e,_2:r}}),xo=r(function(t,e){return{ctor:"Record",_0:t,_1:e}}),Ao=r(function(t,e){return{ctor:"Dictionary",_0:t,_1:e}}),qo=c(function(t,e,r){return{ctor:"Sequence",_0:t,_1:e,_2:r}}),No=r(function(t,e){var n=e;switch(n.ctor){case"S":case"Primitive":return e;case"Sequence":var o=n._0,c=n._2;return t?d(qo,o,!1,_(U,No(!1),c)):b.cmp(M(c),8)<1?d(qo,o,!1,c):e;case"Dictionary":var i=n._1;return t?_(Ao,!1,_(U,function(t){var e=t;return{ctor:"_Tuple2",_0:e._0,_1:_(No,!1,e._1)}},i)):b.cmp(M(i),8)<1?_(Ao,!1,i):e;case"Record":var u=n._1;return t?_(xo,!1,_(Oe,r(function(t,e){return _(No,!1,e)}),u)):b.cmp(ne(u),4)<1?_(xo,!1,u):e;default:var a=n._0,s=n._2;return t?d(So,a,!1,_(U,No(!1),s)):b.cmp(M(s),4)<1?d(So,a,!1,s):e}}),Oo=function(t){return _(No,!0,zn.init(t))},Co=r(function(t,e){var r={ctor:"_Tuple2",_0:t,_1:e};t:{if("_Tuple2"!==r.ctor)break t;switch(r._1.ctor){case"S":case"Primitive":return e;case"Sequence":if("Sequence"===r._0.ctor)return d(qo,r._1._0,r._0._1,_(Ro,r._0._2,r._1._2));break t;case"Dictionary":if("Dictionary"===r._0.ctor)return _(Ao,r._0._0,r._1._1);break t;case"Record":if("Record"===r._0.ctor)return _(xo,r._0._0,_(Oe,Do(r._0._1),r._1._1));break t;default:if("Constructor"===r._0.ctor)return d(So,r._1._0,r._0._1,_(Ro,r._0._2,r._1._2));break t}}return e}),Do=c(function(t,e,r){var n=_(oe,e,t);return"Nothing"===n.ctor?r:_(Co,n._0,r)}),Ro=r(function(t,e){var r={ctor:"_Tuple2",_0:t,_1:e};return"[]"===r._0.ctor?e:"[]"===r._1.ctor?e:{ctor:"::",_0:_(Co,r._0._0,r._1._0),_1:_(Ro,r._0._1,r._1._1)}}),Io=r(function(t,e){return _(Co,e,zn.init(t))}),Lo=r(function(t,e){var r=e;switch(r.ctor){case"S":case"Primitive":return b.crashCase("VirtualDom.Expando",{start:{line:168,column:3},end:{line:235,column:50}},r)("No messages for primitives");case"Sequence":var n=r._2,o=r._0,c=r._1,i=t;switch(i.ctor){case"Toggle":return d(qo,o,!c,n);case"Index":return"None"===i._0.ctor?d(qo,o,c,d(yo,i._1,Lo(i._2),n)):b.crashCase("VirtualDom.Expando",{start:{line:176,column:7},end:{line:188,column:46}},i)("No redirected indexes on sequences");default:return b.crashCase("VirtualDom.Expando",{start:{line:176,column:7},end:{line:188,column:46}},i)("No field on sequences")}case"Dictionary":var u=r._1,a=r._0,s=t;switch(s.ctor){case"Toggle":return _(Ao,!a,u);case"Index":var f=s._2,l=s._1,p=s._0;switch(p.ctor){case"None":return b.crashCase("VirtualDom.Expando",{start:{line:196,column:11},end:{line:206,column:81}},p)("must have redirect for dictionaries");case"Key":return _(Ao,a,d(yo,l,function(t){var e=t;return{ctor:"_Tuple2",_0:_(Lo,f,e._0),_1:e._1}},u));default:return _(Ao,a,d(yo,l,function(t){var e=t;return{ctor:"_Tuple2",_0:e._0,_1:_(Lo,f,e._1)}},u))}default:return b.crashCase("VirtualDom.Expando",{start:{line:191,column:7},end:{line:209,column:50}},s)("no field for dictionaries")}case"Record":var h=r._1,v=r._0,g=t;switch(g.ctor){case"Toggle":return _(xo,!v,h);case"Index":return b.crashCase("VirtualDom.Expando",{start:{line:212,column:7},end:{line:220,column:77}},g)("No index for records");default:return _(xo,v,d(Ie,g._0,Bo(g._1),h))}default:var m=r._2,y=r._0,w=r._1,k=t;switch(k.ctor){case"Toggle":return d(So,y,!w,m);case"Index":return"None"===k._0.ctor?d(So,y,w,d(yo,k._1,Lo(k._2),m)):b.crashCase("VirtualDom.Expando",{start:{line:223,column:7},end:{line:235,column:50}},k)("No redirected indexes on sequences");default:return b.crashCase("VirtualDom.Expando",{start:{line:223,column:7},end:{line:235,column:50}},k)("No field for constructors")}}}),Bo=r(function(t,e){var r=e;return"Nothing"===r.ctor?b.crashCase("VirtualDom.Expando",{start:{line:253,column:3},end:{line:258,column:32}},r)("key does not exist"):O(_(Lo,t,r._0))}),jo=r(function(t,e){return{ctor:"Field",_0:t,_1:e}}),Mo=c(function(t,e,r){return{ctor:"Index",_0:t,_1:e,_2:r}}),Po={ctor:"Toggle"},Fo={ctor:"Value"},Uo={ctor:"Key"},Jo={ctor:"None"},Wo=r(function(t,e){return _(no,_(Mo,Jo,t),_(zo,O(S(t)),e))}),zo=r(function(t,e){var r=e;switch(r.ctor){case"S":return _(io,{ctor:"::",_0:_o(t),_1:{ctor:"[]"}},d(ho,t,N,{ctor:"::",_0:_(uo,{ctor:"::",_0:lo,_1:{ctor:"[]"}},{ctor:"::",_0:oo(r._0),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}));case"Primitive":return _(io,{ctor:"::",_0:_o(t),_1:{ctor:"[]"}},d(ho,t,N,{ctor:"::",_0:_(uo,{ctor:"::",_0:fo,_1:{ctor:"[]"}},{ctor:"::",_0:oo(r._0),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}));case"Sequence":return p(tc,t,r._0,r._1,r._2);case"Dictionary":return d(Yo,t,r._0,r._1);case"Record":return d(Zo,t,r._0,r._1);default:return p(Ho,t,r._0,r._1,r._2)}}),Ho=i(function(t,e,n,o){var c=function(){var t=o;if("[]"===t.ctor)return{ctor:"_Tuple2",_0:N,_1:_(io,{ctor:"[]"},{ctor:"[]"})};if("[]"!==t._1.ctor)return{ctor:"_Tuple2",_0:O(n),_1:n?_(io,{ctor:"[]"},{ctor:"[]"}):Ko(o)};var e=t._0;switch(e.ctor){case"S":case"Primitive":return{ctor:"_Tuple2",_0:N,_1:_(io,{ctor:"[]"},{ctor:"[]"})};case"Sequence":return{ctor:"_Tuple2",_0:O(n),_1:n?_(io,{ctor:"[]"},{ctor:"[]"}):_(no,_(Mo,Jo,0),$o(e._2))};case"Dictionary":return{ctor:"_Tuple2",_0:O(n),_1:n?_(io,{ctor:"[]"},{ctor:"[]"}):_(no,_(Mo,Jo,0),Vo(e._1))};case"Record":return{ctor:"_Tuple2",_0:O(n),_1:n?_(io,{ctor:"[]"},{ctor:"[]"}):_(no,_(Mo,Jo,0),Go(e._1))};default:return{ctor:"_Tuple2",_0:O(n),_1:n?_(io,{ctor:"[]"},{ctor:"[]"}):_(no,_(Mo,Jo,0),Ko(e._2))}}}(),i=c._0,u=c._1,a=_(U,function(t){return xr(Eo(t))},o),s=function(){var t={ctor:"_Tuple2",_0:e,_1:a};return"Nothing"===t._0.ctor?"[]"===t._1.ctor?{ctor:"::",_0:oo("()"),_1:{ctor:"[]"}}:{ctor:"::",_0:oo("( "),_1:{ctor:"::",_0:_(uo,{ctor:"[]"},t._1._0),_1:d(B,r(function(t,e){return{ctor:"::",_0:oo(", "),_1:{ctor:"::",_0:_(uo,{ctor:"[]"},t),_1:e}}}),{ctor:"::",_0:oo(" )"),_1:{ctor:"[]"}},t._1._1)}}:"[]"===t._1.ctor?{ctor:"::",_0:oo(t._0._0),_1:{ctor:"[]"}}:{ctor:"::",_0:oo(_(E["++"],t._0._0," ")),_1:{ctor:"::",_0:_(uo,{ctor:"[]"},t._1._0),_1:d(B,r(function(t,e){return{ctor:"::",_0:oo(" "),_1:{ctor:"::",_0:_(uo,{ctor:"[]"},t),_1:e}}}),{ctor:"[]"},t._1._1)}}}();return _(io,{ctor:"::",_0:_o(t),_1:{ctor:"[]"}},{ctor:"::",_0:_(io,{ctor:"::",_0:Qn(Po),_1:{ctor:"[]"}},d(ho,t,i,s)),_1:{ctor:"::",_0:u,_1:{ctor:"[]"}}})}),Ko=function(t){return _(io,{ctor:"[]"},_(rt,Wo,t))},Vo=function(t){return _(io,{ctor:"[]"},_(rt,Xo,t))},Xo=r(function(t,e){var r=e,n=r._1,o=r._0,c=o;switch(c.ctor){case"S":case"Primitive":return _(no,_(Mo,Fo,t),_(zo,O(c._0),n));default:return _(io,{ctor:"[]"},{ctor:"::",_0:_(no,_(Mo,Uo,t),_(zo,O("key"),o)),_1:{ctor:"::",_0:_(no,_(Mo,Fo,t),_(zo,O("value"),n)),_1:{ctor:"[]"}}})}}),Go=function(t){return _(io,{ctor:"[]"},_(U,Qo,$t(t)))},Qo=function(t){var e=t,r=e._0;return _(no,jo(r),_(zo,O(r),e._1))},$o=function(t){return _(io,{ctor:"[]"},_(rt,Wo,t))},Yo=c(function(t,e,r){var n=_(E["++"],"Dict(",_(E["++"],S(M(r)),")"));return _(io,{ctor:"::",_0:_o(t),_1:{ctor:"[]"}},{ctor:"::",_0:_(io,{ctor:"::",_0:Qn(Po),_1:{ctor:"[]"}},d(ho,t,O(e),{ctor:"::",_0:oo(n),_1:{ctor:"[]"}})),_1:{ctor:"::",_0:e?oo(""):Vo(r),_1:{ctor:"[]"}}})}),Zo=c(function(t,e,r){var n=e?{ctor:"_Tuple3",_0:xr(ko(r)),_1:oo(""),_2:oo("")}:{ctor:"_Tuple3",_0:{ctor:"::",_0:oo("{"),_1:{ctor:"[]"}},_1:Go(r),_2:_(io,{ctor:"::",_0:_o(O({ctor:"_Tuple0"})),_1:{ctor:"[]"}},{ctor:"::",_0:oo("}"),_1:{ctor:"[]"}})},o=n._0,c=n._1,i=n._2;return _(io,{ctor:"::",_0:_o(t),_1:{ctor:"[]"}},{ctor:"::",_0:_(io,{ctor:"::",_0:Qn(Po),_1:{ctor:"[]"}},d(ho,t,O(e),o)),_1:{ctor:"::",_0:c,_1:{ctor:"::",_0:i,_1:{ctor:"[]"}}}})}),tc=i(function(t,e,r,n){var o=_(bo,M(n),e);return _(io,{ctor:"::",_0:_o(t),_1:{ctor:"[]"}},{ctor:"::",_0:_(io,{ctor:"::",_0:Qn(Po),_1:{ctor:"[]"}},d(ho,t,O(r),{ctor:"::",_0:oo(o),_1:{ctor:"[]"}})),_1:{ctor:"::",_0:r?oo(""):$o(n),_1:{ctor:"[]"}}})}),ec=function(t){return!P(t)},rc=i(function(t,e,r,n){return{removed:t,changed:e,added:r,argsMatch:n}}),nc=function(t){return p(rc,{ctor:"[]"},{ctor:"[]"},{ctor:"[]"},t)},oc=function(t){return b.eq(t,p(rc,{ctor:"[]"},{ctor:"[]"},{ctor:"[]"},!0))},cc=function(t){return{ctor:"SomethingChanged",_0:t}},ic=r(function(t,e){return{ctor:"MessageChanged",_0:t,_1:e}}),uc=r(function(t,e){return{ctor:"VersionChanged",_0:t,_1:e}}),ac={ctor:"CorruptHistory"},sc=r(function(t,e){return{ctor:"UnionChange",_0:t,_1:e}}),fc=function(t){return{ctor:"AliasChange",_0:t}},lc={ctor:"Fine"},_c={ctor:"Risky"},dc={ctor:"Impossible"},pc=r(function(t,e){t:for(;;){var r=e;if("[]"===r.ctor)return t;switch(r._0.ctor){case"Impossible":return dc;case"Risky":var n=_c,o=r._1;t=n,e=o;continue t;default:var c=t,i=r._1;t=c,e=i;continue t}}}),hc=function(t){var e=t;return"AliasChange"===e.ctor?dc:!e._1.argsMatch||ec(e._1.changed)||ec(e._1.removed)?dc:ec(e._1.added)?_c:lc},vc=function(t){var e=t;switch(e.ctor){case"CorruptHistory":case"VersionChanged":case"MessageChanged":return dc;default:return _(pc,lc,_(U,hc,e._0))}},gc=r(function(t,e){return gn($t(_(Oe,r(function(e,r){return t(r)}),e)))}),mc=function(t){var e=t;return gn({ctor:"::",_0:{ctor:"_Tuple2",_0:"args",_1:vn(_(U,wn,e.args))},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"tags",_1:_(gc,function(t){return vn(_(U,wn,t))},e.tags)},_1:{ctor:"[]"}}})},yc=function(t){var e=t;return gn({ctor:"::",_0:{ctor:"_Tuple2",_0:"args",_1:vn(_(U,wn,e.args))},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"type",_1:wn(e.tipe)},_1:{ctor:"[]"}}})},bc=function(t){var e=t;return gn({ctor:"::",_0:{ctor:"_Tuple2",_0:"message",_1:wn(e.message)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"aliases",_1:_(gc,yc,e.aliases)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"unions",_1:_(gc,mc,e.unions)},_1:{ctor:"[]"}}}})},wc=function(t){return gn({ctor:"::",_0:{ctor:"_Tuple2",_0:"elm",_1:wn(t.elm)},_1:{ctor:"[]"}})},kc=function(t){var e=t;return gn({ctor:"::",_0:{ctor:"_Tuple2",_0:"versions",_1:wc(e.versions)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"types",_1:bc(e.types)},_1:{ctor:"[]"}}})},Tc=i(function(t,e,r,n){return b.eq(e,r)?n:b.update(n,{changed:{ctor:"::",_0:t,_1:n.changed}})}),Ec=c(function(t,e,r){return b.update(r,{added:{ctor:"::",_0:t,_1:r.added}})}),Sc=c(function(t,e,r){return b.update(r,{removed:{ctor:"::",_0:t,_1:r.removed}})}),xc=i(function(t,e,r,n){var o=v(Zt,Sc,Tc,Ec,e.tags,r.tags,nc(b.eq(e.args,r.args)));return oc(o)?n:{ctor:"::",_0:_(sc,t,o),_1:n}}),Ac=i(function(t,e,r,n){return b.eq(e.tipe,r.tipe)&&b.eq(e.args,r.args)?n:{ctor:"::",_0:fc(t),_1:n}}),qc=c(function(t,e,r){return r}),Nc=r(function(t,e){return b.eq(t.message,e.message)?cc(v(Zt,qc,xc,qc,t.unions,e.unions,v(Zt,qc,Ac,qc,t.aliases,e.aliases,{ctor:"[]"}))):_(ic,t.message,e.message)}),Oc=r(function(t,e){return b.eq(t.versions.elm,e.versions.elm)?_(Nc,t.types,e.types):_(uc,t.versions.elm,e.versions.elm)}),Cc=r(function(t,e){var r=e;return _(Pt,r._1,t)?O(r._0):N}),Dc=r(function(t,e){return{versions:t,types:e}}),Rc=function(t){return{elm:t}},Ic=_(Rn,Rc,_(Ln,"elm",Jn)),Lc=c(function(t,e,r){return{message:t,aliases:e,unions:r}}),Bc=r(function(t,e){return{args:t,tipe:e}}),jc=d(Dn,Bc,_(Ln,"args",Pn(Jn)),_(Ln,"type",Jn)),Mc=r(function(t,e){return{args:t,tags:e}}),Pc=d(Dn,Mc,_(Ln,"args",Pn(Jn)),_(Ln,"tags",Mn(Pn(Jn)))),Fc=p(Cn,Lc,_(Ln,"message",Jn),_(Ln,"aliases",Mn(jc)),_(Ln,"unions",Mn(Pc))),Uc=d(Dn,Dc,_(Ln,"versions",Ic),_(Ln,"types",Fc)),Jc=r(function(t,e){return{message:t,problems:e}}),Wc=r(function(t,e){return{name:t,problems:e}}),zc={ctor:"VirtualDom"},Hc={ctor:"Program"},Kc={ctor:"Request"},Vc={ctor:"Socket"},Xc={ctor:"Process"},Gc={ctor:"Task"},Qc={ctor:"Decoder"},$c={ctor:"Function"},Yc={ctor:"::",_0:{ctor:"_Tuple2",_0:$c,_1:"->"},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:Qc,_1:"Json.Decode.Decoder"},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:Gc,_1:"Task.Task"},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:Xc,_1:"Process.Id"},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:Vc,_1:"WebSocket.LowLevel.WebSocket"},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:Kc,_1:"Http.Request"},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:Hc,_1:"Platform.Program"},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:zc,_1:"VirtualDom.Node"},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:zc,_1:"VirtualDom.Attribute"},_1:{ctor:"[]"}}}}}}}}}},Zc=function(t){return _(z,Cc(t),Yc)},ti=c(function(t,e,r){var n=e,o=Zc(n.tipe);return"[]"===o.ctor?r:{ctor:"::",_0:_(Wc,t,o),_1:r}}),ei=c(function(t,e,r){var n=e,o=_(X,Zc,V(Qt(n.tags)));return"[]"===o.ctor?r:{ctor:"::",_0:_(Wc,t,o),_1:r}}),ri=function(t){var e=t,r=e.types,n=d(Yt,ti,{ctor:"[]"},r.aliases),o=d(Yt,ei,n,r.unions);return"[]"===o.ctor?N:O(_(Jc,r.message,o))},ni=function(t){var e=_(An,Uc,t);if("Err"===e.ctor)return b.crashCase("VirtualDom.Metadata",{start:{line:229,column:3},end:{line:239,column:20}},e)("Compiler is generating bad metadata. Report this at <https://github.com/elm-lang/virtual-dom/issues>.");var r=e._0,n=ri(r);return"Nothing"===n.ctor?vt(r):ht(n._0)},oi=c(function(t,e,r){var n=zn.messageToString(r),o=b.eq(t,e)?"messages-entry messages-entry-selected":"messages-entry";return _(io,{ctor:"::",_0:eo(o),_1:{ctor:"::",_0:_(Gn,"click",xn(e)),_1:{ctor:"[]"}}},{ctor:"::",_0:_(uo,{ctor:"::",_0:eo("messages-entry-content"),_1:{ctor:"::",_0:_(Yn,"title",n),_1:{ctor:"[]"}}},{ctor:"::",_0:oo(n),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(uo,{ctor:"::",_0:eo("messages-entry-index"),_1:{ctor:"[]"}},{ctor:"::",_0:oo(S(e)),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}})}),ci=c(function(t,e,r){var n=r,o=n._0;return{ctor:"_Tuple2",_0:o-1,_1:{ctor:"::",_0:p(Hn,oi,t,o,e),_1:n._1}}}),ii=c(function(t,e,r){var n=r;return _(io,{ctor:"[]"},xr(d(ln,ci(t),{ctor:"_Tuple2",_0:e-1,_1:{ctor:"[]"}},n.messages)))}),ui=function(t){var e=t;return"Done"===e.ctor?{ctor:"_Tuple2",_0:e._1,_1:e._0}:b.crashCase("VirtualDom.History",{start:{line:195,column:3},end:{line:200,column:39}},e)("Bug in History.get")},ai=zn.unsafeCoerce,si=r(function(t,e){return d(ln,r(function(t,e){return{ctor:"::",_0:ai(t),_1:e}}),e,t.messages)}),fi=function(t){var e=t,r=_(U,ai,H(e.recent.messages));return vn(d(fn,si,r,e.snapshots))},li=zn.unsafeCoerce,_i=function(t){var e=t,r=_(un,0,e.snapshots);return"Just"===r.ctor?r._0.model:e.recent.model},di=function(t){return t.numMessages},pi=c(function(t,e,r){var n=r,o=n._0,c=o-64,i=b.cmp(c,t)<1&&b.cmp(t,o)<0?t:-1;return{ctor:"_Tuple2",_0:o-64,_1:{ctor:"::",_0:p(Hn,ii,i,o,e),_1:n._1}}}),hi=r(function(t,e){var r=64*cn(e);return _(io,{ctor:"[]"},xr(d(fn,pi(t),{ctor:"_Tuple2",_0:r,_1:{ctor:"[]"}},e)))}),vi=r(function(t,e){var r=e,n=function(){var e=t;return"Nothing"===e.ctor?{ctor:"_Tuple2",_0:-1,_1:"debugger-sidebar-messages"}:{ctor:"_Tuple2",_0:e._0,_1:"debugger-sidebar-messages-paused"}}(),o=n._0,c=n._1,i=d(Kn,hi,o,r.snapshots),u=xr(d(j,ci(o),{ctor:"_Tuple2",_0:r.numMessages-1,_1:{ctor:"[]"}},r.recent.messages));return _(io,{ctor:"::",_0:eo(c),_1:{ctor:"[]"}},{ctor:"::",_0:i,_1:u})}),gi=c(function(t,e,r){return{snapshots:t,recent:e,numMessages:r}}),mi=c(function(t,e,r){return{model:t,messages:e,numMessages:r}}),yi=function(t){return d(gi,sn,d(mi,t,{ctor:"[]"},0),0)},bi=r(function(t,e){return{model:t,messages:e}}),wi=c(function(t,e,r){var n=r,o=n.numMessages,c=n.model,i=n.messages;return b.eq(o,64)?{ctor:"_Tuple2",_0:O(_(bi,c,dn(i))),_1:d(mi,e,{ctor:"::",_0:t,_1:{ctor:"[]"}},1)}:{ctor:"_Tuple2",_0:N,_1:d(mi,c,{ctor:"::",_0:t,_1:i},o+1)}}),ki=c(function(t,e,r){var n=r,o=n.snapshots,c=n.numMessages,i=d(wi,t,e,n.recent);return"Just"===i._0.ctor?d(gi,_(an,i._0._0,o),i._1,c+1):d(gi,o,i._1,c+1)}),Ti=r(function(t,e){var n=r(function(t,r){var n=r,o=n._0,c=li(t);return{ctor:"_Tuple2",_0:_(e,c,o),_1:d(ki,c,o,n._1)}});return _(Rn,function(e){return d(j,n,{ctor:"_Tuple2",_0:t,_1:yi(t)},e)},Pn(En))}),Ei=r(function(t,e){return{ctor:"Done",_0:t,_1:e}}),Si=r(function(t,e){return{ctor:"Stepping",_0:t,_1:e}}),xi=c(function(t,e,r){var n=r;if("Done"===n.ctor)return r;var o=n._0,c=n._1;return b.eq(o,0)?_(Ei,e,Ar(_(t,e,c))):_(Si,o-1,Ar(_(t,e,c)))}),Ai=c(function(t,e,r){var n=r,o=n.recent,c=n.numMessages-o.numMessages;if(b.cmp(e,c)>-1)return ui(d(B,xi(t),_(Si,e-c,o.model),o.messages));var i=_(un,e/64|0,n.snapshots);return"Nothing"===i.ctor?b.crashCase("VirtualDom.History",{start:{line:165,column:7},end:{line:171,column:95}},i)("UI should only let you ask for real indexes!"):ui(d(fn,xi(t),_(Si,_(A,e,64),i._0.model),i._0.messages))}),qi=d(co,"style",{ctor:"[]"},{ctor:"::",_0:oo("\n\n.elm-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  color: white;\n  pointer-events: none;\n  font-family: 'Trebuchet MS', 'Lucida Grande', 'Bitstream Vera Sans', 'Helvetica Neue', sans-serif;\n}\n\n.elm-overlay-resume {\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  text-align: center;\n  pointer-events: auto;\n  background-color: rgba(200, 200, 200, 0.7);\n}\n\n.elm-overlay-resume-words {\n  position: absolute;\n  top: calc(50% - 40px);\n  font-size: 80px;\n  line-height: 80px;\n  height: 80px;\n  width: 100%;\n}\n\n.elm-mini-controls {\n  position: fixed;\n  bottom: 0;\n  right: 6px;\n  border-radius: 4px;\n  background-color: rgb(61, 61, 61);\n  font-family: monospace;\n  pointer-events: auto;\n}\n\n.elm-mini-controls-button {\n  padding: 6px;\n  cursor: pointer;\n  text-align: center;\n  min-width: 24ch;\n}\n\n.elm-mini-controls-import-export {\n  padding: 4px 0;\n  font-size: 0.8em;\n  text-align: center;\n  background-color: rgb(50, 50, 50);\n}\n\n.elm-overlay-message {\n  position: absolute;\n  width: 600px;\n  height: 100%;\n  padding-left: calc(50% - 300px);\n  padding-right: calc(50% - 300px);\n  background-color: rgba(200, 200, 200, 0.7);\n  pointer-events: auto;\n}\n\n.elm-overlay-message-title {\n  font-size: 36px;\n  height: 80px;\n  background-color: rgb(50, 50, 50);\n  padding-left: 22px;\n  vertical-align: middle;\n  line-height: 80px;\n}\n\n.elm-overlay-message-details {\n  padding: 8px 20px;\n  overflow-y: auto;\n  max-height: calc(100% - 156px);\n  background-color: rgb(61, 61, 61);\n}\n\n.elm-overlay-message-details-type {\n  font-size: 1.5em;\n}\n\n.elm-overlay-message-details ul {\n  list-style-type: none;\n  padding-left: 20px;\n}\n\n.elm-overlay-message-details ul ul {\n  list-style-type: disc;\n  padding-left: 2em;\n}\n\n.elm-overlay-message-details li {\n  margin: 8px 0;\n}\n\n.elm-overlay-message-buttons {\n  height: 60px;\n  line-height: 60px;\n  text-align: right;\n  background-color: rgb(50, 50, 50);\n}\n\n.elm-overlay-message-buttons button {\n  margin-right: 20px;\n}\n\n"),_1:{ctor:"[]"}}),Ni=r(function(t,e){return _(uo,{ctor:"::",_0:Qn(t),_1:{ctor:"::",_0:$n({ctor:"::",_0:{ctor:"_Tuple2",_0:"cursor",_1:"pointer"},_1:{ctor:"[]"}}),_1:{ctor:"[]"}}},{ctor:"::",_0:oo(e),_1:{ctor:"[]"}})}),Oi=c(function(t,e,r){return _(io,t,{ctor:"::",_0:_(Ni,e,"Import"),_1:{ctor:"::",_0:oo(" / "),_1:{ctor:"::",_0:_(Ni,r,"Export"),_1:{ctor:"[]"}}}})}),Ci=r(function(t,e){return _(io,{ctor:"::",_0:eo("elm-mini-controls"),_1:{ctor:"[]"}},{ctor:"::",_0:_(io,{ctor:"::",_0:Qn(t.open),_1:{ctor:"::",_0:eo("elm-mini-controls-button"),_1:{ctor:"[]"}}},{ctor:"::",_0:oo(_(E["++"],"Explore History (",_(E["++"],S(e),")"))),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:d(Oi,{ctor:"::",_0:eo("elm-mini-controls-import-export"),_1:{ctor:"[]"}},t.importHistory,t.exportHistory),_1:{ctor:"[]"}}})}),Di=function(t){var e=t;return"[]"===e.ctor?"":"[]"===e._1.ctor?e._0:"[]"===e._1._1.ctor?_(E["++"],e._0,_(E["++"]," and ",e._1._0)):_(zt,", ",_(E["++"],e._1,{ctor:"::",_0:_(E["++"]," and ",e._0),_1:{ctor:"[]"}}))},Ri=function(t){switch(t.ctor){case"Function":return"functions";case"Decoder":return"JSON decoders";case"Task":return"tasks";case"Process":return"processes";case"Socket":return"web sockets";case"Request":return"HTTP requests";case"Program":return"programs";default:return"virtual DOM values"}},Ii=function(t){return d(co,"code",{ctor:"[]"},{ctor:"::",_0:oo(t),_1:{ctor:"[]"}})},Li=r(function(t,e){var r=_(U,Ii,H(t));return"[]"===r.ctor?oo(""):"[]"===r._1.ctor?d(co,"li",{ctor:"[]"},{ctor:"::",_0:oo(e),_1:{ctor:"::",_0:r._0,_1:{ctor:"::",_0:oo("."),_1:{ctor:"[]"}}}}):"[]"===r._1._1.ctor?d(co,"li",{ctor:"[]"},{ctor:"::",_0:oo(e),_1:{ctor:"::",_0:r._1._0,_1:{ctor:"::",_0:oo(" and "),_1:{ctor:"::",_0:r._0,_1:{ctor:"::",_0:oo("."),_1:{ctor:"[]"}}}}}}):d(co,"li",{ctor:"[]"},{ctor:"::",_0:oo(e),_1:_(E["++"],_(G,oo(", "),H(r._1)),{ctor:"::",_0:oo(", and "),_1:{ctor:"::",_0:r._0,_1:{ctor:"::",_0:oo("."),_1:{ctor:"[]"}}}})})}),Bi=function(t){return d(co,"li",{ctor:"[]"},function(){var e=t;return"AliasChange"===e.ctor?{ctor:"::",_0:_(uo,{ctor:"::",_0:eo("elm-overlay-message-details-type"),_1:{ctor:"[]"}},{ctor:"::",_0:Ii(e._0),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}:{ctor:"::",_0:_(uo,{ctor:"::",_0:eo("elm-overlay-message-details-type"),_1:{ctor:"[]"}},{ctor:"::",_0:Ii(e._0),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:d(co,"ul",{ctor:"[]"},{ctor:"::",_0:_(Li,e._1.removed,"Removed "),_1:{ctor:"::",_0:_(Li,e._1.changed,"Changed "),_1:{ctor:"::",_0:_(Li,e._1.added,"Added "),_1:{ctor:"[]"}}}}),_1:{ctor:"::",_0:oo(e._1.argsMatch?"":"This may be due to the fact that the type variable names changed."),_1:{ctor:"[]"}}}}}())},ji=function(t){var e=t;return d(co,"li",{ctor:"[]"},{ctor:"::",_0:Ii(e.name),_1:{ctor:"::",_0:oo(_(E["++"]," can contain ",_(E["++"],Di(_(U,Ri,e.problems)),"."))),_1:{ctor:"[]"}}})},Mi=function(t){var e=t;return{ctor:"::",_0:d(co,"p",{ctor:"[]"},{ctor:"::",_0:oo("The "),_1:{ctor:"::",_0:Ii(e.message),_1:{ctor:"::",_0:oo(" type of your program cannot be reliably serialized for history files."),_1:{ctor:"[]"}}}}),_1:{ctor:"::",_0:d(co,"p",{ctor:"[]"},{ctor:"::",_0:oo("Functions cannot be serialized, nor can values that contain functions. This is a problem in these places:"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:d(co,"ul",{ctor:"[]"},_(U,ji,e.problems)),_1:{ctor:"::",_0:d(co,"p",{ctor:"[]"},{ctor:"::",_0:oo("\nThe good news is that having values like this in your message type is not\nso great in the long run. You are better off using simpler data, like\n"),_1:{ctor:"::",_0:_(ao,{ctor:"::",_0:ro("https://guide.elm-lang.org/types/union_types.html"),_1:{ctor:"[]"}},{ctor:"::",_0:oo("union types"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:oo(", in your messages. From there, your "),_1:{ctor:"::",_0:Ii("update"),_1:{ctor:"::",_0:oo("\nfunction can pattern match on that data and call whatever functions, JSON\ndecoders, etc. you need. This makes the code much more explicit and easy to\nfollow for other readers (or you in a few months!)\n"),_1:{ctor:"[]"}}}}}}),_1:{ctor:"[]"}}}}}},Pi=r(function(t,e){var r=e;switch(r.ctor){case"CorruptHistory":return{ctor:"::",_0:oo("Looks like this history file is corrupt. I cannot understand it."),_1:{ctor:"[]"}};case"VersionChanged":return{ctor:"::",_0:oo(_(E["++"],"This history was created with Elm ",_(E["++"],r._0,_(E["++"],", but you are using Elm ",_(E["++"],r._1," right now."))))),_1:{ctor:"[]"}};case"MessageChanged":return{ctor:"::",_0:oo(_(E["++"],"To import some other history, the overall message type must"," be the same. The old history has ")),_1:{ctor:"::",_0:Ii(r._0),_1:{ctor:"::",_0:oo(" messages, but the new program works with "),_1:{ctor:"::",_0:Ii(r._1),_1:{ctor:"::",_0:oo(" messages."),_1:{ctor:"[]"}}}}}};default:return{ctor:"::",_0:d(co,"p",{ctor:"[]"},{ctor:"::",_0:oo(t?"\nThe messages in this history do not match the messages handled by your\nprogram. I noticed changes in the following types:\n":"\nThis history seems old. It will work with this program, but some\nmessages have been added since the history was created:\n"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:d(co,"ul",{ctor:"[]"},_(U,Bi,r._0)),_1:{ctor:"[]"}}}}}),Fi=function(t){return _(io,{ctor:"::",_0:eo("elm-overlay-resume"),_1:{ctor:"::",_0:Qn(t.resume),_1:{ctor:"[]"}}},{ctor:"::",_0:_(io,{ctor:"::",_0:eo("elm-overlay-resume-words"),_1:{ctor:"[]"}},{ctor:"::",_0:oo("Click to Resume"),_1:{ctor:"[]"}}),_1:{ctor:"[]"}})},Ui=d(Dn,r(function(t,e){return{ctor:"_Tuple2",_0:t,_1:e}}),_(Ln,"metadata",Uc),_(Ln,"history",En)),Ji=r(function(t,e){var r=e;switch(r.ctor){case"None":case"BadMetadata":case"BadImport":return N;default:return"Cancel"===t.ctor?N:O(r._1)}}),Wi=(u(function(t,e,r,n,o){return{resume:t,open:e,importHistory:r,exportHistory:n,wrap:o}}),r(function(t,e){return{ctor:"RiskyImport",_0:t,_1:e}})),zi=function(t){return{ctor:"BadImport",_0:t}},Hi=zi(ac),Ki=r(function(t,e){var r=_(qn,Ui,e);if("Err"===r.ctor)return ht(Hi);var n=r._0._1,o=_(Oc,r._0._0,t);switch(vc(o).ctor){case"Impossible":return ht(zi(o));case"Risky":return ht(_(Wi,o,n));default:return vt(n)}}),Vi=function(t){return{ctor:"BadMetadata",_0:t}},Xi=Vi,Gi={ctor:"None"},Qi=Gi,$i={ctor:"Proceed"},Yi={ctor:"Cancel"},Zi=function(t){return _(io,{ctor:"::",_0:eo("elm-overlay-message-buttons"),_1:{ctor:"[]"}},function(){var e=t;return"Accept"===e.ctor?{ctor:"::",_0:d(co,"button",{ctor:"::",_0:Qn($i),_1:{ctor:"[]"}},{ctor:"::",_0:oo(e._0),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}:{ctor:"::",_0:d(co,"button",{ctor:"::",_0:Qn(Yi),_1:{ctor:"[]"}},{ctor:"::",_0:oo(e._0),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:d(co,"button",{ctor:"::",_0:Qn($i),_1:{ctor:"[]"}},{ctor:"::",_0:oo(e._1),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}}())},tu={ctor:"Message"},eu=i(function(t,e,r,n){return{ctor:"_Tuple2",_0:tu,_1:{ctor:"::",_0:_(io,{ctor:"::",_0:eo("elm-overlay-message"),_1:{ctor:"[]"}},{ctor:"::",_0:_(io,{ctor:"::",_0:eo("elm-overlay-message-title"),_1:{ctor:"[]"}},{ctor:"::",_0:oo(e),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(io,{ctor:"::",_0:eo("elm-overlay-message-details"),_1:{ctor:"[]"}},r),_1:{ctor:"::",_0:_(no,t.wrap,Zi(n)),_1:{ctor:"[]"}}}}),_1:{ctor:"[]"}}}}),ru={ctor:"Pause"},nu={ctor:"Normal"},ou=r(function(t,e){return{ctor:"Choose",_0:t,_1:e}}),cu=function(t){return{ctor:"Accept",_0:t}},iu=u(function(t,e,r,n,o){var c=o;switch(c.ctor){case"None":var i=r?{ctor:"[]"}:{ctor:"::",_0:_(Ci,t,n),_1:{ctor:"[]"}};return{ctor:"_Tuple2",_0:e?ru:nu,_1:e&&!r?{ctor:"::",_0:Fi(t),_1:i}:i};case"BadMetadata":return p(eu,t,"Cannot use Import or Export",Mi(c._0),cu("Ok"));case"BadImport":return p(eu,t,"Cannot Import History",_(Pi,!0,c._0),cu("Ok"));default:return p(eu,t,"Warning",_(Pi,!1,c._0),_(ou,"Cancel","Import Anyway"))}}),uu=u(function(t,e,r,n,o){var c=h(iu,t,e,r,n,o),i=c._0,u=c._1;return{ctor:"_Tuple2",_0:i,_1:_(io,{ctor:"::",_0:eo("elm-overlay"),_1:{ctor:"[]"}},{ctor:"::",_0:qi,_1:u})}}),au=d(co,"style",{ctor:"[]"},{ctor:"::",_0:oo("\n\nhtml {\n    overflow: hidden;\n    height: 100%;\n}\n\nbody {\n    height: 100%;\n    overflow: auto;\n}\n\n#debugger {\n  width: 100%\n  height: 100%;\n  font-family: monospace;\n}\n\n#values {\n  display: block;\n  float: left;\n  height: 100%;\n  width: calc(100% - 30ch);\n  margin: 0;\n  overflow: auto;\n  cursor: default;\n}\n\n.debugger-sidebar {\n  display: block;\n  float: left;\n  width: 30ch;\n  height: 100%;\n  color: white;\n  background-color: rgb(61, 61, 61);\n}\n\n.debugger-sidebar-controls {\n  width: 100%;\n  text-align: center;\n  background-color: rgb(50, 50, 50);\n}\n\n.debugger-sidebar-controls-import-export {\n  width: 100%;\n  height: 24px;\n  line-height: 24px;\n  font-size: 12px;\n}\n\n.debugger-sidebar-controls-resume {\n  width: 100%;\n  height: 30px;\n  line-height: 30px;\n  cursor: pointer;\n}\n\n.debugger-sidebar-controls-resume:hover {\n  background-color: rgb(41, 41, 41);\n}\n\n.debugger-sidebar-messages {\n  width: 100%;\n  overflow-y: auto;\n  height: calc(100% - 24px);\n}\n\n.debugger-sidebar-messages-paused {\n  width: 100%;\n  overflow-y: auto;\n  height: calc(100% - 54px);\n}\n\n.messages-entry {\n  cursor: pointer;\n  width: 100%;\n}\n\n.messages-entry:hover {\n  background-color: rgb(41, 41, 41);\n}\n\n.messages-entry-selected, .messages-entry-selected:hover {\n  background-color: rgb(10, 10, 10);\n}\n\n.messages-entry-content {\n  width: calc(100% - 7ch);\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 1ch;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  display: inline-block;\n}\n\n.messages-entry-index {\n  color: #666;\n  width: 5ch;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-right: 1ch;\n  text-align: right;\n  display: block;\n  float: right;\n}\n\n"),_1:{ctor:"[]"}}),su=r(function(t,e){return _(uo,{ctor:"::",_0:Qn(t),_1:{ctor:"::",_0:$n({ctor:"::",_0:{ctor:"_Tuple2",_0:"cursor",_1:"pointer"},_1:{ctor:"[]"}}),_1:{ctor:"[]"}}},{ctor:"::",_0:oo(e),_1:{ctor:"[]"}})}),fu=function(t){var e=t;return"Running"===e.ctor?e._0:e._2},lu=r(function(t,e){var r=t.metadata;return"Ok"===r.ctor?e(r._0):_(ut["!"],b.update(t,{overlay:Xi(r._0)}),{ctor:"[]"})}),_u=(a(function(t,e,r,n,o,c){return{history:t,state:e,expando:r,metadata:n,overlay:o,isDebuggerOpen:c}}),c(function(t,e,r){return{ctor:"Paused",_0:t,_1:e,_2:r}})),du=function(t){return{ctor:"Running",_0:t}},pu=c(function(t,e,n){var o=r(function(t,r){return Ar(_(e,t,r))}),c=_i(n.history),i=_(Ti,c,o),u=_(An,i,t);if("Err"===u.ctor)return _(ut["!"],b.update(n,{overlay:Hi}),{ctor:"[]"});var a=u._0._0;return _(ut["!"],b.update(n,{history:u._0._1,state:du(a),expando:Oo(a),overlay:Qi}),{ctor:"[]"})}),hu=function(t){return{ctor:"OverlayMsg",_0:t}},vu=function(t){return{ctor:"Upload",_0:t}},gu=_(Ot,vu,zn.upload),mu={ctor:"Export"},yu={ctor:"Import"},bu={ctor:"Open"},wu=function(t){return{ctor:"Jump",_0:t}},ku={ctor:"Resume"},Tu={resume:ku,open:bu,importHistory:yu,exportHistory:mu,wrap:hu},Eu=function(t){var e=t,r=function(){return"Running"!==e.state.ctor}();return h(uu,Tu,r,e.isDebuggerOpen,di(e.history),e.overlay)},Su=_(io,{ctor:"::",_0:Qn(ku),_1:{ctor:"::",_0:eo("debugger-sidebar-controls-resume"),_1:{ctor:"[]"}}},{ctor:"::",_0:oo("Resume"),_1:{ctor:"[]"}}),xu=function(t){return"Nothing"===t.ctor?oo(""):Su},Au=function(t){return _(io,{ctor:"::",_0:eo("debugger-sidebar-controls"),_1:{ctor:"[]"}},{ctor:"::",_0:xu(t),_1:{ctor:"::",_0:_(io,{ctor:"::",_0:eo("debugger-sidebar-controls-import-export"),_1:{ctor:"[]"}},{ctor:"::",_0:_(su,yu,"Import"),_1:{ctor:"::",_0:oo(" / "),_1:{ctor:"::",_0:_(su,mu,"Export"),_1:{ctor:"[]"}}}}),_1:{ctor:"[]"}}})},qu=r(function(t,e){var r=function(){var e=t;return"Running"===e.ctor?N:O(e._0)}();return _(io,{ctor:"::",_0:eo("debugger-sidebar"),_1:{ctor:"[]"}},{ctor:"::",_0:_(no,wu,_(vi,r,e)),_1:{ctor:"::",_0:Au(r),_1:{ctor:"[]"}}})}),Nu=function(t){return{ctor:"ExpandoMsg",_0:t}},Ou=function(t){var e=t;return _(io,{ctor:"::",_0:Zn("debugger"),_1:{ctor:"[]"}},{ctor:"::",_0:au,_1:{ctor:"::",_0:_(qu,e.state,e.history),_1:{ctor:"::",_0:_(no,Nu,_(io,{ctor:"::",_0:Zn("values"),_1:{ctor:"[]"}},{ctor:"::",_0:_(zo,N,e.expando),_1:{ctor:"[]"}})),_1:{ctor:"[]"}}}})},Cu=function(t){return{ctor:"UserMsg",_0:t}},Du=r(function(t,e){var r=e,n=r._0;return _(ut["!"],{history:yi(n),state:du(n),expando:Oo(n),metadata:ni(t),overlay:Qi,isDebuggerOpen:!1},{ctor:"::",_0:_(at,Cu,r._1),_1:{ctor:"[]"}})}),Ru=r(function(t,e){return _(lt,Cu,t(fu(e.state)))}),Iu=r(function(t,e){var r=e,n=function(){var t=r.state;return"Running"===t.ctor?t._0:t._1}();return _(no,Cu,t(n))}),Lu={ctor:"NoOp"},Bu=r(function(t,e){var r=gn({ctor:"::",_0:{ctor:"_Tuple2",_0:"metadata",_1:kc(t)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"history",_1:fi(e)},_1:{ctor:"[]"}}}),n=di(e);return _(Ot,function(t){return Lu},_(zn.download,n,r))}),ju=r(function(t,e){return t?_(Ot,k(Lu),e):it}),Mu=i(function(t,e,r,n){var o=n,c=o.state,i=o,u=fu(c),a=d(ki,r,u,o.history),s=_(t,r,u),f=s._0,l=s._1,p=_(at,Cu,l),h=c;return"Running"===h.ctor?_(ut["!"],b.update(i,{history:a,state:du(f),expando:_(Io,f,o.expando)}),{ctor:"::",_0:p,_1:{ctor:"::",_0:_(ju,i.isDebuggerOpen,e),_1:{ctor:"[]"}}}):_(ut["!"],b.update(i,{history:a,state:d(_u,h._0,h._1,f)}),{ctor:"::",_0:p,_1:{ctor:"[]"}})}),Pu=i(function(t,e,r,n){t:for(;;){var o=r;switch(o.ctor){case"NoOp":return _(ut["!"],n,{ctor:"[]"});case"UserMsg":return p(Mu,t,e,o._0,n);case"ExpandoMsg":return _(ut["!"],b.update(n,{expando:_(Lo,o._0,n.expando)}),{ctor:"[]"});case"Resume":var c=n.state;if("Running"===c.ctor)return _(ut["!"],n,{ctor:"[]"});var i=c._2;return _(ut["!"],b.update(n,{state:du(i),expando:_(Io,i,n.expando)}),{ctor:"::",_0:_(ju,n.isDebuggerOpen,e),_1:{ctor:"[]"}});case"Jump":var u=o._0,a=d(Ai,t,u,n.history),s=a._0;a._1;return _(ut["!"],b.update(n,{state:d(_u,u,s,fu(n.state)),expando:_(Io,s,n.expando)}),{ctor:"[]"});case"Open":return _(ut["!"],b.update(n,{isDebuggerOpen:!0}),{ctor:"[]"});case"Close":return _(ut["!"],b.update(n,{isDebuggerOpen:!1}),{ctor:"[]"});case"Up":var f=function(){var t=n.state;return"Paused"===t.ctor?t._0:di(n.history)}();if(b.cmp(f,0)>0){var l=t,h=e,v=wu(f-1),g=n;t=l,e=h,r=v,n=g;continue t}return _(ut["!"],n,{ctor:"[]"});case"Down":var m=n.state;if("Running"===m.ctor)return _(ut["!"],n,{ctor:"[]"});var y=m._0;if(b.eq(y,di(n.history)-1)){var w=t,k=e,T=ku,E=n;t=w,e=k,r=T,n=E;continue t}var S=t,x=e,A=wu(y+1),q=n;t=S,e=x,r=A,n=q;continue t;case"Import":return _(lu,n,function(t){return _(ut["!"],n,{ctor:"::",_0:gu,_1:{ctor:"[]"}})});case"Export":return _(lu,n,function(t){return _(ut["!"],n,{ctor:"::",_0:_(Bu,t,n.history),_1:{ctor:"[]"}})});case"Upload":return _(lu,n,function(e){var r=_(Ki,e,o._0);return"Err"===r.ctor?_(ut["!"],b.update(n,{overlay:r._0}),{ctor:"[]"}):d(pu,r._0,t,n)});default:var N=_(Ji,o._0,n.overlay);return"Nothing"===N.ctor?_(ut["!"],b.update(n,{overlay:Qi}),{ctor:"[]"}):d(pu,N._0,t,n)}}}),$e=r(function(t,e){var r=e;return{init:_(Du,t,r.init),view:Iu(r.view),update:Pu(r.update),viewIn:Eu,viewOut:Ou,subscriptions:Ru(r.subscriptions)}}),Ye=r(function(t,e){var r=e;return{init:function(e){return _(Du,t,r.init(e))},view:Iu(r.view),update:Pu(r.update),viewIn:Eu,viewOut:Ou,subscriptions:Ru(r.subscriptions)}}),Fu=function(t){return _(Wn.programWithFlags,Ye,t)},Uu=function(t){return _(Wn.program,$e,t)},Ju=(Wn.keyedNode,Wn.lazy3,Wn.lazy2,Wn.lazy,{stopPropagation:!1,preventDefault:!1}),Wu=Wn.on,zu=r(function(t,e){return d(Wu,t,Ju,e)}),Hu=Wn.style,Ku=(Wn.mapProperty,Wn.attributeNS,Wn.attribute),Vu=Wn.property,Xu=Wn.map,Gu=Wn.text,Qu=Wn.node,$u=(r(function(t,e){return{stopPropagation:t,preventDefault:e}}),Fu),Yu=Xu,Zu=Gu,ta=Qu,ea=(ta("body"),ta("section"),ta("nav"),ta("article"),ta("aside"),ta("h1")),ra=(ta("h2"),ta("h3"),ta("h4"),ta("h5"),ta("h6"),ta("header")),na=ta("footer"),oa=(ta("address"),ta("main"),ta("p")),ca=ta("hr"),ia=(ta("pre"),ta("blockquote"),ta("ol"),ta("ul"),ta("li"),ta("dl"),ta("dt"),ta("dd"),ta("figure"),ta("figcaption"),ta("div")),ua=ta("a"),aa=(ta("em"),ta("strong")),sa=(ta("small"),ta("s"),ta("cite"),ta("q"),ta("dfn"),ta("abbr"),ta("time"),ta("code"),ta("var"),ta("samp"),ta("kbd"),ta("sub"),ta("sup"),ta("i"),ta("b"),ta("u"),ta("mark"),ta("ruby"),ta("rt"),ta("rp"),ta("bdi"),ta("bdo"),ta("span")),fa=ta("br"),la=(ta("wbr"),ta("ins"),ta("del"),ta("img"),ta("iframe"),ta("embed"),ta("object"),ta("param"),ta("video"),ta("audio"),ta("source"),ta("track"),ta("canvas"),ta("math"),ta("table")),_a=(ta("caption"),ta("colgroup"),ta("col"),ta("tbody")),da=ta("thead"),pa=(ta("tfoot"),ta("tr")),ha=ta("td"),va=ta("th"),ga=ta("form"),ma=(ta("fieldset"),ta("legend"),ta("label")),ya=ta("input"),ba=ta("button"),wa=(ta("select"),ta("datalist"),ta("optgroup"),ta("option"),ta("textarea"),ta("keygen"),ta("output"),ta("progress"),ta("meter"),ta("details"),ta("summary"),ta("menuitem"),ta("menu"),Ku),ka=function(t){return _(wa,"tabIndex",S(t))},Ta=Vu,Ea=r(function(t,e){return _(Ta,t,wn(e))}),Sa=function(t){return _(Ea,"className",t)},xa=function(t){return _(Ea,"id",t)},Aa=function(t){return _(Ea,"type",t)},qa=function(t){return _(Ea,"value",t)},Na=function(t){return _(Ea,"placeholder",t)},Oa=function(t){return _(Ea,"action",t)},Ca=function(t){return _(Ea,"name",t)},Da=function(t){return _(Ea,"href",t)},Ra=r(function(t,e){return _(Ta,t,yn(e))}),Ia=function(t){return _(Ra,"checked",t)},La=function(t){return Sa(_(zt," ",_(U,Ar,_(J,xr,t))))},Ba=Hu,ja=(_(Ln,"keyCode",Fn),_(Bn,{ctor:"::",_0:"target",_1:{ctor:"::",_0:"checked",_1:{ctor:"[]"}}},Un),_(Bn,{ctor:"::",_0:"target",_1:{ctor:"::",_0:"value",_1:{ctor:"[]"}}},Jn)),Ma=Ju,Pa=Wu,Fa=zu,Ua=function(t){return _(Fa,"focus",xn(t))},Ja=function(t){return _(Fa,"blur",xn(t))},Wa=b.update(Ma,{preventDefault:!0}),za=function(t){return d(Pa,"submit",Wa,xn(t))},Ha=function(t){return _(Fa,"input",_(Rn,t,ja))},Ka=function(t){return _(Fa,"dblclick",xn(t))},Va=function(t){return _(Fa,"click",xn(t))},Xa=(r(function(t,e){return{stopPropagation:t,preventDefault:e}}),Xa||{});Xa["?>"]=w(q);var Ga=r(function(t,e){var r=t;return La(_(U,function(t){var e=t;return{ctor:"_Tuple2",_0:_(E["++"],r.classNamespace,e._0),_1:e._1}},e))}),Qa=r(function(t,e){var r=t;return Sa(_(E["++"],r.classNamespace,e))}),$a=function(t){return p(i(function(t,e,r,n){for(;;){var o=e;if("[]"===o.ctor)return H(n);var c=o._1,i=o._0;if(b.eq(t,6)){var u=c,a={ctor:"[]"},s={ctor:"::",_0:H({ctor:"::",_0:i,_1:r}),_1:n};t=0,e=u,r=a,n=s}else{var f=t+1,l=c,_={ctor:"::",_0:i,_1:r},d=n;t=f,e=l,r=_,n=d}}}),0,t,{ctor:"[]"},{ctor:"[]"})},Ya=r(function(t,e){var r=e,n=_(Xr,6,Hr(t)),o=_(Gr,6,Kr(t));return b.update(r,{currentMonth:t,currentDates:d(Zr,r.settings.firstDayOfWeek,o,n)})}),Za=function(t){return Zu(t)},ts={placeholder:"Please pick a date...",classNamespace:"elm-datepicker--",inputClassList:{ctor:"[]"},inputName:N,inputId:N,isDisabled:k(!1),parser:cr,dateFormatter:rn,dayFormatter:en,monthFormatter:tn,yearFormatter:S,cellFormatter:Za,firstDayOfWeek:ur,pickedDate:N},es=(f(function(t,e,r,n,o,c,i,u){return{open:t,forceOpen:e,today:r,currentMonth:n,currentDates:o,inputText:c,pickedDate:i,settings:u}}),{ctor:"MouseUp"}),rs={ctor:"MouseDown"},ns={ctor:"Blur"},os={ctor:"Focus"},cs={ctor:"Change"},is=function(t){return{ctor:"Text",_0:t}},us=function(t){return{ctor:"Pick",_0:t}},as={ctor:"PrevMonth"},ss={ctor:"NextMonth"},fs=function(t){var e=t,n=e.today,o=e.settings,c=e.currentMonth,i=function(t){return function(e){return d(Pa,t,{preventDefault:!0,stopPropagation:!0},xn(e))}},u=function(t){var r=e.pickedDate;return"Nothing"===r.ctor?b.eq($r(t),$r(n)):b.eq($r(t),$r(r._0))},a=o.firstDayOfWeek,s=Ga(o),f=function(t){var e=o.isDisabled(t),r=e?{ctor:"[]"}:{ctor:"::",_0:Va(us(t)),_1:{ctor:"[]"}};return _(ha,_(E["++"],{ctor:"::",_0:s({ctor:"::",_0:{ctor:"_Tuple2",_0:"day",_1:!0},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"disabled",_1:e},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"picked",_1:u(t)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"today",_1:b.eq($r(t),$r(n))},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"other-month",_1:!b.eq(er(c),er(t))},_1:{ctor:"[]"}}}}}}),_1:{ctor:"[]"}},r),{ctor:"::",_0:o.cellFormatter(S(tr(t))),_1:{ctor:"[]"}})},l=Qa(o),p=r(function(t,e){return _(ua,{ctor:"::",_0:l(t),_1:{ctor:"::",_0:Da("javascript:;"),_1:{ctor:"::",_0:Va(e),_1:{ctor:"::",_0:ka(-1),_1:{ctor:"[]"}}}}},{ctor:"[]"})}),h=function(t){return _(ha,{ctor:"::",_0:l("dow"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(o.dayFormatter(t)),_1:{ctor:"[]"}})},v=function(t){return _(pa,{ctor:"::",_0:l("row"),_1:{ctor:"[]"}},_(U,f,t))},g=_(U,v,$a(e.currentDates));return _(ia,{ctor:"::",_0:l("picker"),_1:{ctor:"::",_0:_(i,"mousedown",rs),_1:{ctor:"::",_0:_(i,"mouseup",es),_1:{ctor:"[]"}}}},{ctor:"::",_0:_(ia,{ctor:"::",_0:l("picker-header"),_1:{ctor:"[]"}},{ctor:"::",_0:_(ia,{ctor:"::",_0:l("prev-container"),_1:{ctor:"[]"}},{ctor:"::",_0:_(p,"prev",as),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(ia,{ctor:"::",_0:l("month-container"),_1:{ctor:"[]"}},{ctor:"::",_0:_(sa,{ctor:"::",_0:l("month"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(o.monthFormatter(er(c))),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(sa,{ctor:"::",_0:l("year"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(o.yearFormatter(rr(c))),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}),_1:{ctor:"::",_0:_(ia,{ctor:"::",_0:l("next-container"),_1:{ctor:"[]"}},{ctor:"::",_0:_(p,"next",ss),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}}),_1:{ctor:"::",_0:_(la,{ctor:"::",_0:l("table"),_1:{ctor:"[]"}},{ctor:"::",_0:_(da,{ctor:"::",_0:l("weekdays"),_1:{ctor:"[]"}},{ctor:"::",_0:_(pa,{ctor:"[]"},{ctor:"::",_0:h(a),_1:{ctor:"::",_0:h(_(Qr,1,a)),_1:{ctor:"::",_0:h(_(Qr,2,a)),_1:{ctor:"::",_0:h(_(Qr,3,a)),_1:{ctor:"::",_0:h(_(Qr,4,a)),_1:{ctor:"::",_0:h(_(Qr,5,a)),_1:{ctor:"::",_0:h(_(Qr,6,a)),_1:{ctor:"[]"}}}}}}}}),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(_a,{ctor:"::",_0:l("days"),_1:{ctor:"[]"}},g),_1:{ctor:"[]"}}}),_1:{ctor:"[]"}}})},ls=function(t){var e=t,r=e._0.settings,n=e._0,o=_(E["++"],{ctor:"::",_0:{ctor:"_Tuple2",_0:_(E["++"],r.classNamespace,"input"),_1:!0},_1:{ctor:"[]"}},r.inputClassList),c=function(t){return _(z,T,R(t))}(_(C,xa,r.inputId)),i=function(t){return _(ya,_(E["++"],{ctor:"::",_0:La(o),_1:{ctor:"::",_0:Ca(_(Xa["?>"],r.inputName,"")),_1:{ctor:"::",_0:Aa("text"),_1:{ctor:"::",_0:_(Fa,"change",xn(cs)),_1:{ctor:"::",_0:Ha(is),_1:{ctor:"::",_0:Ja(ns),_1:{ctor:"::",_0:Va(os),_1:{ctor:"::",_0:Ua(os),_1:{ctor:"[]"}}}}}}}}},_(E["++"],c,t)),{ctor:"[]"})}({ctor:"::",_0:Na(r.placeholder),_1:{ctor:"::",_0:qa(n.inputText),_1:{ctor:"[]"}}}),u=Qa(r);return _(ia,{ctor:"::",_0:u("container"),_1:{ctor:"[]"}},{ctor:"::",_0:i,_1:{ctor:"::",_0:e._0.open?fs(n):Zu(""),_1:{ctor:"[]"}}})},_s=function(t){return{ctor:"CurrentDate",_0:t}},ds=function(t){return{ctor:"DatePicker",_0:t}},ps=function(t){var e=_(Xa["?>"],t.pickedDate,nn);return{ctor:"_Tuple2",_0:ds(_(Ya,e,{open:!1,forceOpen:!1,today:nn,currentMonth:nn,currentDates:{ctor:"[]"},inputText:_(q,"",_(C,t.dateFormatter,t.pickedDate)),pickedDate:t.pickedDate,settings:t})),_1:_(Ot,_s,ir)}},Xa=(r(function(t,e){var r=e,n=r._0;return ds(b.update(n,{pickedDate:O(t),inputText:n.settings.dateFormatter(t)}))}),r(function(t,e){var r=e,n=r._0,o=n.settings,c=b.update(o,{isDisabled:t});return ds(b.update(n,{settings:c}))}),Xa||{});Xa["!"]=r(function(t,e){return{ctor:"_Tuple3",_0:ds(t),_1:ct(e),_2:N}});var hs=r(function(t,e){var r=e,n=r._0.settings,o=r._0.pickedDate,c=r._0,i=r._0.currentMonth,u=t;switch(u.ctor){case"CurrentDate":var a=u._0;return _(Xa["!"],_(Ya,_(Xa["?>"],o,a),b.update(c,{today:a})),{ctor:"[]"});case"NextMonth":return _(Xa["!"],_(Ya,Hr(i),c),{ctor:"[]"});case"PrevMonth":return _(Xa["!"],_(Ya,zr(i),c),{ctor:"[]"});case"Pick":var s=u._0;return{ctor:"_Tuple3",_0:ds(_(Ya,s,b.update(c,{pickedDate:O(s),open:!1,inputText:n.dateFormatter(s)}))),_1:it,_2:O(s)};case"Text":return _(Xa["!"],b.update(c,{inputText:u._0}),{ctor:"[]"});case"Change":var f=function(){var t=n.parser(c.inputText);if("Err"===t.ctor)return{ctor:"_Tuple2",_0:!1,_1:o};var e=t._0;return n.isDisabled(e)?{ctor:"_Tuple2",_0:!1,_1:o}:{ctor:"_Tuple2",_0:!0,_1:O(e)}}(),l=f._0,d=f._1,p=_(Xa["?>"],d,i);return{ctor:"_Tuple3",_0:ds(_(Ya,p,b.update(c,{pickedDate:d,inputText:_(q,"",_(C,n.dateFormatter,d))}))),_1:it,_2:l?d:N};case"Focus":return _(Xa["!"],b.update(c,{open:!0,forceOpen:!1}),{ctor:"[]"});case"Blur":return _(Xa["!"],b.update(c,{open:r._0.forceOpen}),{ctor:"[]"});case"MouseDown":return _(Xa["!"],b.update(c,{forceOpen:!0}),{ctor:"[]"});default:return _(Xa["!"],b.update(c,{forceOpen:!1}),{ctor:"[]"})}}),vs=r(function(t,e){if("EN"===t.ctor)switch(e.ctor){case"Invoice":return"Invoice";case"BilledTo":return"Billed to";case"Name":return"Name";case"TaxId":return"Tax id";case"Address":return"Address";case"Street":return"Street";case"City":return"City";case"ZipCode":return"Zip code";case"InvoiceNumber":return"Invoice number";case"DateOfIssue":return"Date of issue";case"InvoiceTotal":return"Invoice total";case"ProjectBreakdown":return"Project Breakdown";case"ServiceName":return"Service name";case"Price":return"Price";case"Taxes":return"Taxes";case"Quantity":return"Quantity";case"Amount":return"Amount";case"Save":return"Save";case"Delete":return"Delete";case"Subtotal":return"Subtotal";case"Total":return"Total";case"Print":return"Print";case"Spanish":return"Spanish";case"English":return"English";default:return"Deductions"}else switch(e.ctor){case"Invoice":return"Factura";case"BilledTo":return"Cliente";case"Name":return"Nombre";case"TaxId":return"C.I.F.";case"Address":return"Dirección";case"Street":return"Calle";case"City":return"Ciudad";case"ZipCode":return"Código postal";case"InvoiceNumber":return"Número de factura";case"DateOfIssue":return"Fecha de emisión";case"InvoiceTotal":return"Total a pagar";case"ProjectBreakdown":return"Desglose";case"ServiceName":return"Servicio";case"Price":return"Precio";case"Taxes":return"Impuestos";case"Quantity":return"Unidades";case"Amount":return"Cantidad";case"Save":return"Actualizar";case"Delete":return"Borrar";case"Subtotal":return"Subtotal";case"Total":return"Total";case"Print":return"Imprimir";case"Spanish":return"Español";case"English":return"Inglés";default:return"Retenciones"}}),gs={ctor:"Deductions"},ms={ctor:"Spanish"},ys={ctor:"English"},bs={ctor:"Print"},ws={ctor:"Total"},ks={ctor:"Subtotal"},Ts={ctor:"Delete"},Es={ctor:"Save"},Ss={ctor:"Amount"},xs={ctor:"Quantity"},As={ctor:"Taxes"},qs={ctor:"Price"},Ns={ctor:"ServiceName"},Os={ctor:"ProjectBreakdown"},Cs={ctor:"InvoiceTotal"},Ds={ctor:"DateOfIssue"},Rs={ctor:"InvoiceNumber"},Is={ctor:"ZipCode"},Ls={ctor:"City"},Bs={ctor:"Street"},js={ctor:"Address"},Ms={ctor:"TaxId"},Ps={ctor:"Name"},Fs={ctor:"BilledTo"},Us={ctor:"Invoice"},Js={ctor:"ES"},Ws={ctor:"EN"},zs=(u(function(t,e,r,n,o){return{invoice:t,datePicker:e,currentLine:r,currency:n,language:o}}),i(function(t,e,r,n){return{invoicer:t,currency:e,language:r,deduction:n}}),a(function(t,e,r,n,o,c){return{name:t,taxes_id:e,phone:r,email:n,website:o,address:c}})),Hs=u(function(t,e,r,n,o){return{street:t,city:e,state:r,country:n,zip:o}}),Ks=c(function(t,e,r){return{name:t,price:e,taxes:r}}),Vs=c(function(t,e,r){return{product:t,quantity:e,editing:r}}),Xs=(s(function(t,e,r,n,o,c,i){return{id:t,rev:e,invoicer:r,customer:n,invoicelines:o,date:c,deduction:i}}),{ctor:"GBP"}),Gs={ctor:"USD"},Qs={ctor:"EUR"},$s={ctor:"NoOp"},Ys={ctor:"PrintPort"},Zs=function(t){return{ctor:"SavePort",_0:t}},tf=function(t){return{ctor:"SetDeduction",_0:t}},ef={ctor:"ToggleDeductions"},rf=function(t){return{ctor:"SetDate",_0:t}},nf=function(t){return{ctor:"ToDatePicker",_0:t}},of=function(t){return{ctor:"SetCurrency",_0:t}},cf=function(t){return{ctor:"SetLanguage",_0:t}},uf=function(t){return{ctor:"UpdateInvoicer",_0:t}},af=function(t){return{ctor:"UpdateCurrentLine",_0:t}},sf=function(t){return{ctor:"DeleteLine",_0:t}},ff=function(t){return{ctor:"ToggleEditLine",_0:t}},lf=r(function(t,e){return{ctor:"UpdateLine",_0:t,_1:e}}),_f=function(t){return{ctor:"AddLine",_0:t}},df=r(function(t,e){var r=zt("."),n=_(Ht,".",S(e)),o=_(Ft,t,b.chr("0")),c=n;t:{if("::"===c.ctor){if("[]"===c._1.ctor)return r({ctor:"::",_0:c._0,_1:{ctor:"::",_0:o(""),_1:{ctor:"[]"}}});if("[]"===c._1._1.ctor)return r({ctor:"::",_0:c._0,_1:{ctor:"::",_0:o(_(Wt,t,c._1._0)),_1:{ctor:"[]"}}});break t}break t}return r({ctor:"::",_0:"0",_1:{ctor:"::",_0:o(""),_1:{ctor:"[]"}}})}),pf=function(t){var e=t,n=e.product;return _(r(function(t,e){return t*e}),_(r(function(t,e){return t*e}),n.price,_(r(function(t,e){return t/e}),n.taxes,100)),e.quantity)},hf=function(t){return d(B,r(function(t,e){return t+e}),0,_(U,pf,t))},vf=function(t){var e=t;return _(r(function(t,e){return t*e}),e.product.price,e.quantity)},gf=function(t){return _(r(function(t,e){return t+e}),vf(t),pf(t))},mf=function(t){return d(B,r(function(t,e){return t+e}),0,_(U,gf,t))},yf=function(t){return d(B,r(function(t,e){return t+e}),0,_(U,vf,t))},bf=r(function(t,e){return yf(e)*(_(q,0,t)/100)}),wf=r(function(t,e){return b.cmp(t,0)<0?b.update(e,{quantity:0}):b.update(e,{quantity:t})}),kf=r(function(t,e){return _(wf,_(r(function(t,e){return t+e}),e.quantity,t),e)}),Tf=(kf(1),r(function(t,e){return _(wf,_(r(function(t,e){return t-e}),e.quantity,t),e)})),Ef=(Tf(1),r(function(t,e){return{ctor:"::",_0:t,_1:e}}),v(zs,"Sherlock & associates","","+34 600 123 123","sherlock@holmes.co.uk","astudyinpink.com",h(Hs,"Baker St 221B","London","","UK","NW1 6XE"))),Sf=v(zs,"","","","","",h(Hs,"","","","","")),xf=d(Vs,d(Ks,"",0,21),1,!1),Af=function(t){switch(t){case"EN":return vt(Ws);case"ES":return vt(Js);default:return ht("bad language")}},qf=function(t){switch(t){case"USD":return vt(Gs);case"GBP":return vt(Xs);case"EUR":return vt(Qs);default:return ht("bad currency")}},Nf=function(t){switch(t.ctor){case"USD":return"$";case"GBP":return"£";default:return"€"}},Of=function(t){var e=t,r=e._0,n=e._1;return"EUR"===r.ctor?_(E["++"],_(df,2,n),Nf(r)):_(E["++"],Nf(r),_(df,2,n))},Cf=c(function(t,e,n){var o=n,i=o.quantity,u=n,a=u.product,s=r(function(t,e){var r=_(pt,0,Mt(e));switch(t){case"name":return af(b.update(n,{product:b.update(a,{name:e})}));case"price":return af(b.update(n,{product:b.update(a,{price:r})}));case"taxes":return af(b.update(n,{product:b.update(a,{taxes:r})}));case"quantity":return af(b.update(n,{quantity:r}));default:return af(n)}}),f=c(function(e,r,n){var o=e;return _(ma,{ctor:"::",_0:Sa("col-sm-12 col-3"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(E["++"],_(vs,t,r),": ")),_1:{ctor:"::",_0:_(ya,{ctor:"::",_0:Sa("col-sm-12 col-12 b-none b-b-1px h4 ta-right"),_1:{ctor:"::",_0:Aa(o._1),_1:{ctor:"::",_0:Na(_(vs,t,r)),_1:{ctor:"::",_0:qa(n),_1:{ctor:"::",_0:Ha(s(o._0)),_1:{ctor:"[]"}}}}}},{ctor:"[]"}),_1:{ctor:"[]"}}})});return _(ga,{ctor:"::",_0:Sa("row"),_1:{ctor:"::",_0:Oa("javascript:void(0);"),_1:{ctor:"::",_0:za(_f(n)),_1:{ctor:"[]"}}}},{ctor:"::",_0:d(f,{ctor:"_Tuple2",_0:"name",_1:"text"},Ns,n.product.name),_1:{ctor:"::",_0:d(f,{ctor:"_Tuple2",_0:"price",_1:"number"},qs,S(n.product.price)),_1:{ctor:"::",_0:d(f,{ctor:"_Tuple2",_0:"taxes",_1:"number"},As,S(n.product.taxes)),_1:{ctor:"::",_0:d(f,{ctor:"_Tuple2",_0:"quantity",_1:"number"},xs,S(i)),_1:{ctor:"::",_0:_(ya,{ctor:"::",_0:Aa("submit"),_1:{ctor:"::",_0:qa("Add line"),_1:{ctor:"::",_0:Ba({ctor:"::",_0:{ctor:"_Tuple2",_0:"visibility",_1:"hidden"},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"display",_1:"none"},_1:{ctor:"[]"}}}),_1:{ctor:"[]"}}}},{ctor:"[]"}),_1:{ctor:"[]"}}}}}})}),Df=r(function(t,e){var n=e,o=n._1,c=n._0,i=o,u=i.product,a=i.quantity,s=u,f=s.name,l=s.price,d=s.taxes,p=r(function(t,e){var r=_(pt,0,Mt(e));switch(t){case"name":return _(lf,c,b.update(o,{product:b.update(u,{name:e})}));case"price":return _(lf,c,b.update(o,{product:b.update(u,{price:r})}));case"taxes":return _(lf,c,b.update(o,{product:b.update(u,{taxes:r})}));case"quantity":return _(lf,c,b.update(o,{quantity:r}));default:return _(lf,c,o)}});return _(pa,{ctor:"::",_0:Sa("row col-12"),_1:{ctor:"[]"}},{ctor:"::",_0:_(ha,{ctor:"::",_0:Sa("col-3 p-0 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:_(ya,{ctor:"::",_0:Sa("col-12 ta-right"),_1:{ctor:"::",_0:Aa("name"),_1:{ctor:"::",_0:qa(f),_1:{ctor:"::",_0:Ha(p("name")),_1:{ctor:"[]"}}}}},{ctor:"[]"}),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(ha,{ctor:"::",_0:Sa("col-3 p-0 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:_(ya,{ctor:"::",_0:Sa("col-12 ta-right"),_1:{ctor:"::",_0:Aa("number"),_1:{ctor:"::",_0:qa(S(l)),_1:{ctor:"::",_0:Ha(p("price")),_1:{ctor:"[]"}}}}},{ctor:"[]"}),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(ha,{ctor:"::",_0:Sa("col-2 p-0 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:_(ya,{ctor:"::",_0:Sa("col-12 ta-right"),_1:{ctor:"::",_0:Aa("number"),_1:{ctor:"::",_0:qa(S(d)),_1:{ctor:"::",_0:Ha(p("taxes")),_1:{ctor:"[]"}}}}},{ctor:"[]"}),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(ha,{ctor:"::",_0:Sa("col-2 p-0 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:_(ya,{ctor:"::",_0:Sa("col-12 ta-right"),_1:{ctor:"::",_0:Aa("number"),_1:{ctor:"::",_0:qa(S(a)),_1:{ctor:"::",_0:Ha(p("quantity")),_1:{ctor:"[]"}}}}},{ctor:"[]"}),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(ha,{ctor:"::",_0:Ba({ctor:"::",_0:{ctor:"_Tuple2",_0:"float",_1:"right"},_1:{ctor:"[]"}}),_1:{ctor:"[]"}},{ctor:"::",_0:_(ba,{ctor:"::",_0:Va(ff(c)),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(vs,t,Es)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(ba,{ctor:"::",_0:Va(sf(c)),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(vs,t,Ts)),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}),_1:{ctor:"[]"}}}}}})}),Rf=function(t){var e=t,r=e._1,n=r,o=n.product,c=n.quantity,i=o,u=i.name,a=i.price,s=i.taxes;return _(pa,{ctor:"::",_0:Sa("row col-12"),_1:{ctor:"::",_0:Ka(ff(e._0)),_1:{ctor:"[]"}}},{ctor:"::",_0:_(ha,{ctor:"::",_0:Sa("col-3 p-0 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(u),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(ha,{ctor:"::",_0:Sa("col-3 p-0 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(S(a)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(ha,{ctor:"::",_0:Sa("col-2 p-0 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(E["++"],S(s)," %")),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(ha,{ctor:"::",_0:Sa("col-2 p-0 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(S(c)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(ha,{ctor:"::",_0:Sa("col-2 p-0 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(S(vf(r))),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}}}})},If=r(function(t,e){var n=r(function(e,r){return r.editing?_(Df,t,{ctor:"_Tuple2",_0:e,_1:r}):Rf({ctor:"_Tuple2",_0:e,_1:r})}),o=_(rt,n,e),c=_(pa,{ctor:"::",_0:Sa("row col-12"),_1:{ctor:"[]"}},{ctor:"::",_0:_(va,{ctor:"::",_0:Sa("col-3 p-0 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(vs,t,Ns)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(va,{ctor:"::",_0:Sa("col-3 p-0 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(vs,t,qs)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(va,{ctor:"::",_0:Sa("col-2 p-0 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(vs,t,As)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(va,{ctor:"::",_0:Sa("col-2 p-0 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(vs,t,xs)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(va,{ctor:"::",_0:Sa("col-2 p-0 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(vs,t,Ss)),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}}}}),i={ctor:"::",_0:c,_1:o};return _(la,{ctor:"::",_0:Sa("col-12 m-b-2em"),_1:{ctor:"[]"}},i)}),Lf=r(function(t,e){var n=e,o=n.address,c=r(function(t,e){return _(ya,{ctor:"::",_0:Sa("b-none m-b-0-5em"),_1:{ctor:"::",_0:Aa("text"),_1:{ctor:"::",_0:Na(t),_1:{ctor:"::",_0:qa(e),_1:{ctor:"[]"}}}}},{ctor:"[]"})});return _(ia,{ctor:"[]"},{ctor:"::",_0:_(oa,{ctor:"::",_0:Sa("m-b-0-5em"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(E["++"],_(vs,t,Ps)," :")),_1:{ctor:"::",_0:_(c,_(vs,t,Ps),n.name),_1:{ctor:"[]"}}}),_1:{ctor:"::",_0:_(oa,{ctor:"::",_0:Sa("m-b-0-5em"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(E["++"],_(vs,t,Ms),": ")),_1:{ctor:"::",_0:_(c,_(vs,t,Ms),n.taxes_id),_1:{ctor:"[]"}}}),_1:{ctor:"::",_0:_(oa,{ctor:"::",_0:Sa("m-b-0-5em"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(E["++"],_(vs,t,js),": ")),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(ia,{ctor:"::",_0:Sa("p-lr-1em"),_1:{ctor:"[]"}},_(G,_(fa,{ctor:"[]"},{ctor:"[]"}),_(U,function(e){var r=e;return _(c,_(vs,t,r._1),r._0)},{ctor:"::",_0:{ctor:"_Tuple2",_0:o.street,_1:Bs},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:o.city,_1:Ls},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:o.zip,_1:Is},_1:{ctor:"[]"}}}}))),_1:{ctor:"[]"}}}}})}),Bf=r(function(t,e){var r=c(function(t,e,r){return _(ya,{ctor:"::",_0:Sa(_(E["++"],"d-block col-12 bc-transparent b-none c-white p ",t)),_1:{ctor:"::",_0:Aa("text"),_1:{ctor:"::",_0:qa(e),_1:{ctor:"::",_0:Ha(r),_1:{ctor:"[]"}}}}},{ctor:"[]"})}),n=r("m-1em"),o=r("h4 m-0 m-tb-0-75em p-0 ta-left"),i=e,u=i.name,a=(i.taxes_id,i.phone),s=i.email,f=i.website,l=i.address;return _(ra,{ctor:"::",_0:Sa("row header p-tb-1-5em p-lr-3em"),_1:{ctor:"[]"}},{ctor:"::",_0:_(ia,{ctor:"::",_0:Sa("col-4"),_1:{ctor:"[]"}},{ctor:"::",_0:_(o,u,function(t){return uf(b.update(e,{name:t}))}),_1:{ctor:"::",_0:_(ea,{ctor:"[]"},{ctor:"::",_0:Zu(_(vs,t,Us)),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}),_1:{ctor:"::",_0:_(ia,{ctor:"::",_0:Sa("col-sm-6 col-4 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:_(n,a,function(t){return uf(b.update(e,{phone:t}))}),_1:{ctor:"::",_0:_(n,s,function(t){return uf(b.update(e,{email:t}))}),_1:{ctor:"::",_0:_(n,f,function(t){return uf(b.update(e,{website:t}))}),_1:{ctor:"[]"}}}}),_1:{ctor:"::",_0:_(ia,{ctor:"::",_0:Sa("col-sm-6 col-4 ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:_(n,l.street,function(t){return uf(b.update(e,{address:b.update(l,{street:t})}))}),_1:{ctor:"::",_0:_(n,l.city,function(t){return uf(b.update(e,{address:b.update(l,{city:t})}))}),_1:{ctor:"::",_0:_(n,l.zip,function(t){return uf(b.update(e,{address:b.update(l,{zip:t})}))}),_1:{ctor:"[]"}}}}),_1:{ctor:"[]"}}}})}),jf=function(t){var e=t,r=e.language,n=e.invoice,o=function(){return"Just"===n.deduction.ctor}();return _(ia,{ctor:"::",_0:Sa("no-print m-tb-1em"),_1:{ctor:"[]"}},{ctor:"::",_0:_(ba,{ctor:"::",_0:Va(cf(Ws)),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(vs,r,ys)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:Zu("|"),_1:{ctor:"::",_0:_(ba,{ctor:"::",_0:Va(cf(Js)),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(vs,r,ms)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:Zu("|"),_1:{ctor:"::",_0:_(ba,{ctor:"::",_0:Va(of(Qs)),_1:{ctor:"[]"}},{ctor:"::",_0:Zu("€"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:Zu("|"),_1:{ctor:"::",_0:_(ba,{ctor:"::",_0:Va(of(Xs)),_1:{ctor:"[]"}},{ctor:"::",_0:Zu("£"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:Zu("|"),_1:{ctor:"::",_0:_(ba,{ctor:"::",_0:Va(of(Gs)),_1:{ctor:"[]"}},{ctor:"::",_0:Zu("$"),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:Zu("|"),_1:{ctor:"::",_0:_(ba,{ctor:"::",_0:Va(Zs(n)),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(vs,r,Es)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:Zu("|"),_1:{ctor:"::",_0:_(ba,{ctor:"::",_0:Va(Ys),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(vs,r,bs)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:Zu("|"),_1:{ctor:"::",_0:_(ma,{ctor:"::",_0:Sa("p"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(vs,r,gs)),_1:{ctor:"::",_0:_(ya,{ctor:"::",_0:Aa("checkbox"),_1:{ctor:"::",_0:Ia(o),_1:{ctor:"::",_0:Va(ef),_1:{ctor:"[]"}}}},{ctor:"[]"}),_1:{ctor:"[]"}}}),_1:{ctor:"[]"}}}}}}}}}}}}}}}})},Mf=function(t){var e=t,r=e.invoice,n=e.currentLine,o=e.currency,c=e.language,i=e.datePicker,u=r,a=u.invoicer,s=u.customer,f=u.invoicelines,l=_(bf,r.deduction,f),p=Of({ctor:"_Tuple2",_0:o,_1:yf(f)}),h=Of({ctor:"_Tuple2",_0:o,_1:hf(f)}),v=Of({ctor:"_Tuple2",_0:o,_1:l}),g=Of({ctor:"_Tuple2",_0:o,_1:mf(f)-l});return _(ia,{ctor:"::",_0:Sa("wrapper"),_1:{ctor:"[]"}},{ctor:"::",_0:jf(t),_1:{ctor:"::",_0:_(ia,{ctor:"::",_0:xa("invoice"),_1:{ctor:"[]"}},{ctor:"::",_0:_(Bf,c,a),_1:{ctor:"::",_0:_(ia,{ctor:"::",_0:Sa("row p-lr-3em p-tb-1-5em"),_1:{ctor:"[]"}},{ctor:"::",_0:_(ia,{ctor:"::",_0:Sa("col-4 h5"),_1:{ctor:"[]"}},{ctor:"::",_0:_(aa,{ctor:"[]"},{ctor:"::",_0:Zu(_(E["++"],_(vs,c,Fs),": ")),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(Lf,c,s),_1:{ctor:"[]"}}}),_1:{ctor:"::",_0:_(ia,{ctor:"::",_0:Sa("col-4 h5"),_1:{ctor:"[]"}},{ctor:"::",_0:_(aa,{ctor:"[]"},{ctor:"::",_0:Zu(_(E["++"],_(vs,c,Rs),": ")),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:function(t){return _(ya,{ctor:"::",_0:Sa("b-none col-12 col-sm-12 d-block h4 m-tb-1em"),_1:{ctor:"::",_0:Aa("text"),_1:{ctor:"::",_0:qa(t),_1:{ctor:"[]"}}}},{ctor:"[]"})}("#000001"),_1:{ctor:"::",_0:_(oa,{ctor:"[]"},{ctor:"::",_0:_(aa,{ctor:"[]"},{ctor:"::",_0:Zu(_(E["++"],_(vs,c,Ds),": ")),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(Yu,nf,ls(i)),_1:{ctor:"[]"}}}}}),_1:{ctor:"::",_0:_(ia,{ctor:"::",_0:Sa("col-4"),_1:{ctor:"[]"}},{ctor:"::",_0:_(oa,{ctor:"::",_0:Sa("ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(E["++"],_(vs,c,Cs),": ")),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(ea,{ctor:"::",_0:Sa("ta-right h1 total"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(g),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}),_1:{ctor:"[]"}}}}),_1:{ctor:"::",_0:_(ca,{ctor:"::",_0:Sa("m-lr-3em b-none b-b-1px"),_1:{ctor:"[]"}},{ctor:"[]"}),_1:{ctor:"::",_0:_(ia,{ctor:"::",_0:Sa("p-lr-3em p-b-1em"),_1:{ctor:"[]"}},{ctor:"::",_0:_(ia,{ctor:"::",_0:Sa("h5"),_1:{ctor:"[]"}},{ctor:"::",_0:_(oa,{ctor:"::",_0:Sa("h3"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(vs,c,Os)),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(If,c,f),_1:{ctor:"[]"}}}),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(ia,{ctor:"::",_0:Sa("p-lr-3em p-b-1em no-print"),_1:{ctor:"[]"}},{ctor:"::",_0:d(Cf,c,o,n),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(ia,{ctor:"::",_0:Sa("p-lr-3em"),_1:{ctor:"[]"}},{ctor:"::",_0:_(oa,{ctor:"::",_0:Sa("ta-right p"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(E["++"],_(vs,c,ks),_(E["++"],": ",p))),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(oa,{ctor:"::",_0:Sa("ta-right p"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(E["++"],_(vs,c,As),_(E["++"],": ",h))),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:function(){var t=r.deduction;return"Just"===t.ctor?_(ia,{ctor:"::",_0:Sa("ta-right p"),_1:{ctor:"[]"}},{ctor:"::",_0:_(ma,{ctor:"::",_0:Sa("no-print"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu(_(E["++"],_(vs,c,gs),": ")),_1:{ctor:"::",_0:_(ya,{ctor:"::",_0:Sa("ta-right"),_1:{ctor:"::",_0:Aa("number"),_1:{ctor:"::",_0:qa(S(t._0)),_1:{ctor:"::",_0:Ha(function(t){return tf(_(pt,0,Mt(t)))}),_1:{ctor:"[]"}}}}},{ctor:"[]"}),_1:{ctor:"[]"}}}),_1:{ctor:"::",_0:_(oa,{ctor:"[]"},{ctor:"::",_0:Zu(_(E["++"],_(vs,c,gs),_(E["++"],": ",v))),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}):Zu("")}(),_1:{ctor:"[]"}}}}),_1:{ctor:"::",_0:_(oa,{ctor:"::",_0:Sa("p-lr-3em ta-right"),_1:{ctor:"[]"}},{ctor:"::",_0:_(aa,{ctor:"[]"},{ctor:"::",_0:Zu(_(E["++"],_(vs,c,ws),_(E["++"],": ",g))),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(na,{ctor:"::",_0:Sa("footer p-1em p-lr-3em"),_1:{ctor:"[]"}},{ctor:"::",_0:_(oa,{ctor:"::",_0:Sa("h6 ta-justify"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu("IMPORTANT: The above invoice may be paid by Bank Transfer.\n                      Payment is due within 30 days from the date of this invoice, late payment is subject to a fee of 5% per month."),_1:{ctor:"[]"}}),_1:{ctor:"::",_0:_(oa,{ctor:"::",_0:Sa("ta-center copyright h6"),_1:{ctor:"[]"}},{ctor:"::",_0:Zu("Gabriel Perales ® 2017"),_1:{ctor:"[]"}}),_1:{ctor:"[]"}}}),_1:{ctor:"[]"}}}}}}}}}),_1:{ctor:"[]"}}})},Pf=ot.outgoingPort("print",function(t){return null}),Ff=ot.outgoingPort("saveInvoicerDetails",function(t){return t}),Uf=ot.outgoingPort("saveCurrency",function(t){return t}),Jf=ot.outgoingPort("saveLanguage",function(t){return t}),Wf=ot.outgoingPort("saveDeduction",function(t){return"Nothing"===t.ctor?null:t._0}),zf=ot.outgoingPort("createInvoice",function(t){return t}),Hf=(ot.outgoingPort("saveInvoice",function(t){return t}),ot.outgoingPort("deleteInvoice",function(t){return t}),ot.outgoingPort("getInvoice",function(t){return t}),ot.outgoingPort("getInvoices",function(t){return null}),ot.incomingPort("invoice",En),ot.incomingPort("invoices",En),function(t){var e=Jn;return _(qn,g(Nn,zs,_(Ln,"name",e),_(Ln,"taxes_id",e),_(Ln,"phone",e),_(Ln,"email",e),_(Ln,"website",e),_(Ln,"address",v(On,Hs,_(Ln,"street",e),_(Ln,"city",e),_(Ln,"state",e),_(Ln,"country",e),_(Ln,"zip",e)))),t)}),Kf=function(t){var e=wn;return gn({ctor:"::",_0:{ctor:"_Tuple2",_0:"name",_1:e(t.name)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"taxes_id",_1:e(t.taxes_id)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"phone",_1:e(t.phone)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"email",_1:e(t.email)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"website",_1:e(t.website)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"address",_1:gn({ctor:"::",_0:{ctor:"_Tuple2",_0:"street",_1:e(t.address.street)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"city",_1:e(t.address.city)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"state",_1:e(t.address.state)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"country",_1:e(t.address.country)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"zip",_1:e(t.address.zip)},_1:{ctor:"[]"}}}}}})},_1:{ctor:"[]"}}}}}}})},Vf=function(t){var e=Kf,r=bn,n=vn,o=wn;return gn({ctor:"::",_0:{ctor:"_Tuple2",_0:"invoicer",_1:e(t.invoicer)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"customer",_1:e(t.customer)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"invoicelines",_1:n(_(U,function(t){return gn({ctor:"::",_0:{ctor:"_Tuple2",_0:"quantity",_1:r(t.quantity)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"product",_1:gn({ctor:"::",_0:{ctor:"_Tuple2",_0:"name",_1:o(t.product.name)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"price",_1:r(t.product.price)},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"taxes",_1:r(t.product.taxes)},_1:{ctor:"[]"}}}})},_1:{ctor:"[]"}}})},t.invoicelines))},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"date",_1:function(){var e=t.date;return"Just"===e.ctor?r(or(e._0)):mn}()},_1:{ctor:"::",_0:{ctor:"_Tuple2",_0:"deduction",_1:function(){var e=t.deduction;return"Just"===e.ctor?r(e._0):mn}()},_1:{ctor:"[]"}}}}}})},Xf=function(t){switch(t.ctor){case"Jan":return 1;case"Feb":return 2;case"Mar":return 3;case"Apr":return 4;case"May":return 5;case"Jun":return 6;case"Jul":return 7;case"Aug":return 8;case"Sep":return 9;case"Oct":return 10;case"Nov":return 11;default:return 12}},Gf=function(t){return _(zt,"/",_(U,function(t){return d(Ut,2,b.chr("0"),S(t))},{ctor:"::",_0:tr(t),_1:{ctor:"::",_0:Xf(er(t)),_1:{ctor:"::",_0:rr(t),_1:{ctor:"[]"}}}}))},Qf=function(t){return Ar(ps(b.update(ts,{firstDayOfWeek:dr,pickedDate:t,dateFormatter:Gf})))},$f=r(function(t,e){var n=e,o=n.invoice,c=t;switch(c.ctor){case"AddLine":return _(ut["!"],b.update(e,{invoice:b.update(o,{invoicelines:{ctor:"::",_0:c._0,_1:o.invoicelines}}),currentLine:xf}),{ctor:"::",_0:it,_1:{ctor:"[]"}});case"UpdateCurrentLine":return _(ut["!"],b.update(e,{currentLine:c._0}),{ctor:"::",_0:it,_1:{ctor:"[]"}});case"UpdateInvoicer":var i=c._0;return _(ut["!"],b.update(e,{invoice:b.update(o,{invoicer:i})}),{ctor:"::",_0:Ff(_(kn,0,Kf(i))),_1:{ctor:"[]"}});case"ToggleEditLine":var u=r(function(t,e){return b.eq(t,c._0)?b.update(e,{editing:!e.editing}):e});return _(ut["!"],b.update(e,{invoice:b.update(o,{invoicelines:_(rt,u,o.invoicelines)})}),{ctor:"::",_0:it,_1:{ctor:"[]"}});case"UpdateLine":var u=r(function(t,e){return b.eq(t,c._0)?c._1:e});return _(ut["!"],b.update(e,{invoice:b.update(o,{invoicelines:_(rt,u,o.invoicelines)})}),{ctor:"::",_0:it,_1:{ctor:"[]"}});case"DeleteLine":var a=function(t){var e=t;return b.eq(e._0,c._0)?N:O(e._1)};return _(ut["!"],b.update(e,{invoice:b.update(o,{invoicelines:_(z,a,_(rt,r(function(t,e){return{ctor:"_Tuple2",_0:t,_1:e}}),o.invoicelines))})}),{ctor:"::",_0:it,_1:{ctor:"[]"}});case"SetLanguage":var s=c._0;return _(ut["!"],b.update(e,{language:s}),{ctor:"::",_0:Jf(S(s)),_1:{ctor:"[]"}});case"SetCurrency":var f=c._0;return _(ut["!"],b.update(e,{currency:f}),{ctor:"::",_0:Uf(S(f)),_1:{ctor:"[]"}});case"ToDatePicker":var l=_(hs,c._0,e.datePicker),d=l._0,p=l._1,h=l._2,v=function(){var t=h;return"Nothing"===t.ctor?e.invoice.date:t}();return _(ut["!"],b.update(e,{invoice:b.update(o,{date:v}),datePicker:d}),{ctor:"::",_0:_(at,nf,p),_1:{ctor:"[]"}});case"SetDate":var g=c._0;return _(ut["!"],b.update(e,{invoice:b.update(o,{date:O(g)}),datePicker:Qf(O(g))}),{ctor:"::",_0:it,_1:{ctor:"[]"}});case"ToggleDeductions":var m=function(){return"Just"===o.deduction.ctor?N:O(0)}();return _(ut["!"],b.update(e,{invoice:b.update(o,{deduction:m})}),{ctor:"::",_0:Wf(m),_1:{ctor:"[]"}});case"SetDeduction":var y=c._0;return _(ut["!"],b.update(e,{invoice:b.update(o,{deduction:O(y)})}),{ctor:"::",_0:Wf(O(y)),_1:{ctor:"[]"}});case"SavePort":return _(ut["!"],e,{ctor:"::",_0:zf(Vf(c._0)),_1:{ctor:"[]"}});case"PrintPort":return _(ut["!"],e,{ctor:"::",_0:Pf({ctor:"_Tuple0"}),_1:{ctor:"[]"}});default:return _(ut["!"],e,{ctor:"[]"})}}),Yf={invoice:{id:N,rev:N,invoicelines:{ctor:"[]"},invoicer:Ef,customer:Sf,date:N,deduction:N},datePicker:Qf(N),currentLine:xf,currency:Qs,language:Ws},Zf=function(t){var e=_(Ct,function(t){var e=t;return"Ok"===e.ctor?tf(e._0):$s},function(){var e=t.deduction;return"Just"===e.ctor?wt(_(pt,0,Mt(e._0))):bt("not stored deduction")}()),r=_(Ot,uf,wt(_(pt,Yf.invoice.invoicer,Hf(_(q,"",t.invoicer))))),n=_(Ot,cf,wt(_(pt,Yf.language,Af(_(q,"",t.language))))),o=_(Ot,of,wt(_(pt,Yf.currency,qf(_(q,"",t.currency))))),c=_(Ot,rf,ir);return _(ut["!"],Yf,{ctor:"::",_0:c,_1:{ctor:"::",_0:o,_1:{ctor:"::",_0:n,_1:{ctor:"::",_0:r,_1:{ctor:"::",_0:e,_1:{ctor:"[]"}}}}}})},tl=$u({init:Zf,view:Mf,subscriptions:k(ft),update:$f})(_(Sn,function(t){return _(Sn,function(e){return _(Sn,function(r){return _(Sn,function(n){return xn({currency:t,deduction:e,invoicer:r,language:n})},_(Ln,"language",In({ctor:"::",_0:Tn(N),_1:{ctor:"::",_0:_(Rn,O,Jn),_1:{ctor:"[]"}}})))},_(Ln,"invoicer",In({ctor:"::",_0:Tn(N),_1:{ctor:"::",_0:_(Rn,O,Jn),_1:{ctor:"[]"}}})))},_(Ln,"deduction",In({ctor:"::",_0:Tn(N),_1:{ctor:"::",_0:_(Rn,O,Jn),_1:{ctor:"[]"}}})))},_(Ln,"currency",In({ctor:"::",_0:Tn(N),_1:{ctor:"::",_0:_(Rn,O,Jn),_1:{ctor:"[]"}}})))),el={};return el.App=el.App||{},void 0!==tl&&tl(el.App,"App",{types:{unions:{"I18n.Language":{args:[],tags:{ES:[],EN:[]}},"DatePicker.Msg":{args:[],tags:{MouseUp:[],Focus:[],NextMonth:[],Text:["String"],MouseDown:[],Change:[],Blur:[],CurrentDate:["Date.Date"],PrevMonth:[],Pick:["Date.Date"]}},"Date.Date":{args:[],tags:{Date:[]}},"Maybe.Maybe":{args:["a"],tags:{Just:["a"],Nothing:[]}},"Types.Msg":{args:[],tags:{UpdateLine:["Int","Types.Line"],DeleteLine:["Int"],SetDeduction:["Float"],SavePort:["Types.Invoice"],UpdateCurrentLine:["Types.Line"],SetDate:["Date.Date"],AddLine:["Types.Line"],UpdateInvoicer:["Types.ContactDetails"],SetCurrency:["Types.Currency"],SetLanguage:["I18n.Language"],ToggleEditLine:["Int"],PrintPort:[],ToggleDeductions:[],NoOp:[],ToDatePicker:["DatePicker.Msg"]}},"Types.Currency":{args:[],tags:{USD:[],EUR:[],GBP:[]}}},aliases:{"Types.Address":{args:[],type:"{ street : String , city : String , state : String , country : String , zip : String }"},"Types.Invoice":{args:[],type:"{ id : Maybe.Maybe String , rev : Maybe.Maybe String , invoicer : Types.ContactDetails , customer : Types.ContactDetails , invoicelines : Types.InvoiceLines , date : Maybe.Maybe Date.Date , deduction : Maybe.Maybe Types.Deduction }"},"Types.ContactDetails":{args:[],type:"{ name : String , taxes_id : String , phone : String , email : String , website : String , address : Types.Address }"},"Types.Deduction":{args:[],type:"Float"},"Types.Line":{args:[],type:"{ product : Types.Product, quantity : Float, editing : Bool }"},"Types.Product":{args:[],type:"{ name : String, price : Float, taxes : Float }"},"Types.InvoiceLines":{args:[],type:"List Types.Line"}},message:"Types.Msg"},versions:{elm:"0.18.0"}}),n=[],void(void 0!==(o=function(){return el}.apply(e,n))&&(t.exports=o))}).call(this)},function(t,e,r){(function(e){t.exports=e.PouchDB=r(8)}).call(e,r(0))},function(t,e,r){"use strict";function n(t){return function(){var e=arguments.length;if(e){for(var r=[],n=-1;++n<e;)r[n]=arguments[n];return t.call(this,r)}return t.call(this,[])}}t.exports=n},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function o(t){return"number"==typeof t}function c(t){return"object"==typeof t&&null!==t}function i(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,o,u,a,s;if(this._events||(this._events={}),"error"===t&&(!this._events.error||c(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var f=new Error('Uncaught, unspecified "error" event. ('+e+")");throw f.context=e,f}if(r=this._events[t],i(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),r.apply(this,u)}else if(c(r))for(u=Array.prototype.slice.call(arguments,1),s=r.slice(),o=s.length,a=0;a<o;a++)s[a].apply(this,u);return!0},r.prototype.addListener=function(t,e){var o;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?c(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,c(this._events[t])&&!this._events[t].warned&&(o=i(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),o||(o=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var o=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,o,i,u;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],i=r.length,o=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(c(r)){for(u=i;u-- >0;)if(r[u]===e||r[u].listener&&r[u].listener===e){o=u;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){"use strict";function n(){}function o(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,t!==n&&a(this,t)}function c(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function i(t,e,r){p(function(){var n;try{n=e(r)}catch(e){return h.reject(t,e)}n===t?h.reject(t,new TypeError("Cannot resolve promise with itself")):h.resolve(t,n)})}function u(t){var e=t&&t.then;if(t&&"object"==typeof t&&"function"==typeof e)return function(){e.apply(t,arguments)}}function a(t,e){function r(e){c||(c=!0,h.reject(t,e))}function n(e){c||(c=!0,h.resolve(t,e))}function o(){e(n,r)}var c=!1,i=s(o);"error"===i.status&&r(i.value)}function s(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}function f(t){return t instanceof this?t:h.resolve(new this(n),t)}function l(t){var e=new this(n);return h.reject(e,t)}function _(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,o=!1;if(!r)return this.resolve([]);for(var c=new Array(r),i=0,u=-1,a=new this(n);++u<r;)!function(t,n){function u(t){c[n]=t,++i!==r||o||(o=!0,h.resolve(a,c))}e.resolve(t).then(u,function(t){o||(o=!0,h.reject(a,t))})}(t[u],u);return a}function d(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,o=!1;if(!r)return this.resolve([]);for(var c=-1,i=new this(n);++c<r;)!function(t){e.resolve(t).then(function(t){o||(o=!0,h.resolve(i,t))},function(t){o||(o=!0,h.reject(i,t))})}(t[c]);return i}var p=r(1),h={},v=["REJECTED"],g=["FULFILLED"],m=["PENDING"];t.exports=o,o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){if("function"!=typeof t&&this.state===g||"function"!=typeof e&&this.state===v)return this;var r=new this.constructor(n);if(this.state!==m){i(r,this.state===g?t:e,this.outcome)}else this.queue.push(new c(r,t,e));return r},c.prototype.callFulfilled=function(t){h.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){i(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){h.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){i(this.promise,this.onRejected,t)},h.resolve=function(t,e){var r=s(u,e);if("error"===r.status)return h.reject(t,r.value);var n=r.value;if(n)a(t,n);else{t.state=g,t.outcome=e;for(var o=-1,c=t.queue.length;++o<c;)t.queue[o].callFulfilled(e)}return t},h.reject=function(t,e){t.state=v,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},o.resolve=f,o.reject=l,o.all=_,o.race=d},function(t,e,r){"use strict";(function(e){function n(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function o(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"undefined"!=typeof Blob&&t instanceof Blob}function c(t){if("function"==typeof t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength),r=new Uint8Array(e),n=new Uint8Array(t);return r.set(n),e}function i(t){if(t instanceof ArrayBuffer)return c(t);var e=t.size,r=t.type;return"function"==typeof t.slice?t.slice(0,e,r):t.webkitSlice(0,e,r)}function u(t){var e=Object.getPrototypeOf(t);if(null===e)return!0;var r=e.constructor;return"function"==typeof r&&r instanceof r&&Cn.call(r)==Dn}function a(t){var e,r,n;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(e=[],r=0,n=t.length;r<n;r++)e[r]=a(t[r]);return e}if(t instanceof Date)return t.toISOString();if(o(t))return i(t);if(!u(t))return t;e={};for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var c=a(t[r]);void 0!==c&&(e[r]=c)}return e}function s(t){var e=!1;return kn(function(r){if(e)throw new Error("once called more than once");e=!0,t.apply(this,r)})}function f(t){return kn(function(e){e=a(e);var r=this,n="function"==typeof e[e.length-1]&&e.pop(),o=new On(function(n,o){var c;try{var i=s(function(t,e){t?o(t):n(e)});e.push(i),c=t.apply(r,e),c&&"function"==typeof c.then&&n(c)}catch(t){o(t)}});return n&&o.then(function(t){n(null,t)},n),o})}function l(t,e){function r(t,e,r){if(Rn.enabled){for(var n=[t.name,e],o=0;o<r.length-1;o++)n.push(r[o]);Rn.apply(null,n);var c=r[r.length-1];r[r.length-1]=function(r,n){var o=[t.name,e];o=o.concat(r?["error",r]:["success",n]),Rn.apply(null,o),c(r,n)}}}return f(kn(function(n){if(this._closed)return On.reject(new Error("database is closed"));if(this._destroyed)return On.reject(new Error("database is destroyed"));var o=this;return r(o,t,n),this.taskqueue.isReady?e.apply(this,n):new On(function(e,r){o.taskqueue.addTask(function(c){c?r(c):e(o[t].apply(o,n))})})}))}function _(t){return"$"+t}function d(t){return t.substring(1)}function p(){this._store={}}function h(t){if(this._store=new p,t&&Array.isArray(t))for(var e=0,r=t.length;e<r;e++)this.add(t[e])}function v(t,e){for(var r={},n=0,o=e.length;n<o;n++){var c=e[n];c in t&&(r[c]=t[c])}return r}function g(t){return t}function m(t){return[{ok:t}]}function y(t,e,r){function n(){var t=[];_.forEach(function(e){e.docs.forEach(function(r){t.push({id:e.id,docs:[r]})})}),r(null,{results:t})}function o(){++l===f&&n()}function c(t,e,r){_[t]={id:e,docs:r},o()}function i(){if(!(p>=d.length)){var t=Math.min(p+jn,d.length),e=d.slice(p,t);u(e,p),p+=e.length}}function u(r,n){r.forEach(function(r,o){var u=n+o,a=s.get(r),f=v(a[0],["atts_since","attachments"]);f.open_revs=a.map(function(t){return t.rev}),f.open_revs=f.open_revs.filter(g);var l=g;0===f.open_revs.length&&(delete f.open_revs,l=m),["revs","attachments","binary","ajax","latest"].forEach(function(t){t in e&&(f[t]=e[t])}),t.get(r,f,function(t,e){var n;n=t?[{error:t}]:l(e),c(u,r,n),i()})})}var a=e.docs,s=new Ln;a.forEach(function(t){s.has(t.id)?s.get(t.id).push(t):s.set(t.id,[t])});var f=s.size,l=0,_=new Array(f),d=[];s.forEach(function(t,e){d.push(e)});var p=0;i()}function b(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local}function w(){return Bn}function k(t){b()?chrome.storage.onChanged.addListener(function(e){null!=e.db_name&&t.emit(e.dbName.newValue)}):w()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(e){t.emit(e.key)}):window.attachEvent("storage",function(e){t.emit(e.key)}))}function T(){En.EventEmitter.call(this),this._listeners={},k(this)}function E(t){if("undefined"!==console&&t in console){var e=Array.prototype.slice.call(arguments,1);console[t].apply(console,e)}}function S(t,e){return t=parseInt(t,10)||0,e=parseInt(e,10),e!==e||e<=t?e=(t||1)<<1:e+=1,e>6e5&&(t=3e5,e=6e5),~~((e-t)*Math.random()+t)}function x(t){var e=0;return t||(e=2e3),S(t,e)}function A(t,e){E("info","The above "+t+" is totally normal. "+e)}function q(t,e,r){Error.call(this,r),this.status=t,this.name=e,this.message=r,this.error=!0}function N(t,e){function r(e){for(var r in t)"function"!=typeof t[r]&&(this[r]=t[r]);void 0!==e&&(this.reason=e)}return r.prototype=q.prototype,new r(e)}function O(t){if("object"!=typeof t){var e=t;t=Kn,t.data=e}return"error"in t&&"conflict"===t.error&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),t}function C(t,e,r){try{return!t(e,r)}catch(t){var n="Filter function threw: "+t.toString();return N(Qn,n)}}function D(t){var e={},r=t.filter&&"function"==typeof t.filter;return e.query=t.query_params,function(n){n.doc||(n.doc={});var o=r&&C(t.filter,n.doc,e);if("object"==typeof o)return o;if(o)return!1;if(t.include_docs){if(!t.attachments)for(var c in n.doc._attachments)n.doc._attachments.hasOwnProperty(c)&&(n.doc._attachments[c].stub=!0)}else delete n.doc;return!0}}function R(t){for(var e=[],r=0,n=t.length;r<n;r++)e=e.concat(t[r]);return e}function I(){}function L(t){var e;if(t?"string"!=typeof t?e=N(Wn):/^_/.test(t)&&!/^_(design|local)/.test(t)&&(e=N(Hn)):e=N(zn),e)throw e}function B(t,e){return"listenerCount"in t?t.listenerCount(e):En.EventEmitter.listenerCount(t,e)}function j(t){if(!t)return null;var e=t.split("/");return 2===e.length?e:1===e.length?[t,t]:null}function M(t){var e=j(t);return e?e.join("/"):null}function P(t){for(var e=io.exec(t),r={},n=14;n--;){var o=no[n],c=e[n]||"",i=-1!==["user","password"].indexOf(o);r[o]=i?decodeURIComponent(c):c}return r[oo]={},r[no[12]].replace(co,function(t,e,n){e&&(r[oo][e]=n)}),r}function F(t,e,r){return new On(function(n,o){t.get(e,function(c,i){if(c){if(404!==c.status)return o(c);i={}}var u=i._rev,a=r(i);if(!a)return n({updated:!1,rev:u});a._id=e,a._rev=u,n(U(t,a,r))})})}function U(t,e,r){return t.put(e).then(function(t){return{updated:!0,rev:t.rev}},function(n){if(409!==n.status)throw n;return F(t,e._id,r)})}function J(t){return 0|Math.random()*t}function W(t,e){e=e||uo.length;var r="",n=-1;if(t){for(;++n<t;)r+=uo[J(e)];return r}for(;++n<36;)switch(n){case 8:case 13:case 18:case 23:r+="-";break;case 19:r+=uo[3&J(16)|8];break;default:r+=uo[J(16)]}return r}function z(t){for(var e,r,n,o,c=t.rev_tree.slice();o=c.pop();){var i=o.ids,u=i[2],a=o.pos;if(u.length)for(var s=0,f=u.length;s<f;s++)c.push({pos:a+1,ids:u[s]});else{var l=!!i[1].deleted,_=i[0];e&&!(n!==l?n:r!==a?r<a:e<_)||(e=_,r=a,n=l)}}return r+"-"+e}function H(t,e){for(var r,n=t.slice();r=n.pop();)for(var o=r.pos,c=r.ids,i=c[2],u=e(0===i.length,o,c[0],r.ctx,c[1]),a=0,s=i.length;a<s;a++)n.push({pos:o+1,ids:i[a],ctx:u})}function K(t,e){return t.pos-e.pos}function V(t){var e=[];H(t,function(t,r,n,o,c){t&&e.push({rev:r+"-"+n,pos:r,opts:c})}),e.sort(K).reverse();for(var r=0,n=e.length;r<n;r++)delete e[r].pos;return e}function X(t){for(var e=z(t),r=V(t.rev_tree),n=[],o=0,c=r.length;o<c;o++){var i=r[o];i.rev===e||i.opts.deleted||n.push(i.rev)}return n}function G(t){var e=[];return H(t.rev_tree,function(t,r,n,o,c){"available"!==c.status||t||(e.push(r+"-"+n),c.status="missing")}),e}function Q(t){for(var e,r=[],n=t.slice();e=n.pop();){var o=e.pos,c=e.ids,i=c[0],u=c[1],a=c[2],s=0===a.length,f=e.history?e.history.slice():[];f.push({id:i,opts:u}),s&&r.push({pos:o+1-f.length,ids:f});for(var l=0,_=a.length;l<_;l++)n.push({pos:o+1,ids:a[l],history:f})}return r.reverse()}function $(t,e){return t.pos-e.pos}function Y(t,e,r){for(var n,o=0,c=t.length;o<c;)n=o+c>>>1,r(t[n],e)<0?o=n+1:c=n;return o}function Z(t,e,r){var n=Y(t,e,r);t.splice(n,0,e)}function tt(t,e){for(var r,n,o=e,c=t.length;o<c;o++){var i=t[o],u=[i.id,i.opts,[]];n?(n[2].push(u),n=u):r=n=u}return r}function et(t,e){return t[0]<e[0]?-1:1}function rt(t,e){for(var r=[{tree1:t,tree2:e}],n=!1;r.length>0;){var o=r.pop(),c=o.tree1,i=o.tree2;(c[1].status||i[1].status)&&(c[1].status="available"===c[1].status||"available"===i[1].status?"available":"missing");for(var u=0;u<i[2].length;u++)if(c[2][0]){for(var a=!1,s=0;s<c[2].length;s++)c[2][s][0]===i[2][u][0]&&(r.push({tree1:c[2][s],tree2:i[2][u]}),a=!0);a||(n="new_branch",Z(c[2],i[2][u],et))}else n="new_leaf",c[2][0]=i[2][u]}return{conflicts:n,tree:t}}function nt(t,e,r){var n,o=[],c=!1,i=!1;if(!t.length)return{tree:[e],conflicts:"new_leaf"};for(var u=0,a=t.length;u<a;u++){var s=t[u];if(s.pos===e.pos&&s.ids[0]===e.ids[0])n=rt(s.ids,e.ids),o.push({pos:s.pos,ids:n.tree}),c=c||n.conflicts,i=!0;else if(!0!==r){var f=s.pos<e.pos?s:e,l=s.pos<e.pos?e:s,_=l.pos-f.pos,d=[],p=[];for(p.push({ids:f.ids,diff:_,parent:null,parentIdx:null});p.length>0;){var h=p.pop();if(0!==h.diff)for(var v=h.ids[2],g=0,m=v.length;g<m;g++)p.push({ids:v[g],diff:h.diff-1,parent:h.ids,parentIdx:g});else h.ids[0]===l.ids[0]&&d.push(h)}var y=d[0];y?(n=rt(y.ids,l.ids),y.parent[2][y.parentIdx]=n.tree,o.push({pos:f.pos,ids:f.ids}),c=c||n.conflicts,i=!0):o.push(s)}else o.push(s)}return i||o.push(e),o.sort($),{tree:o,conflicts:c||"internal_node"}}function ot(t,e){for(var r,n,o=Q(t),c=0,i=o.length;c<i;c++){var u,a=o[c],s=a.ids;if(s.length>e){r||(r={});var f=s.length-e;u={pos:a.pos+f,ids:tt(s,f)};for(var l=0;l<f;l++){var _=a.pos+l+"-"+s[l].id;r[_]=!0}}else u={pos:a.pos,ids:tt(s,0)};n=n?nt(n,u,!0).tree:[u]}return r&&H(n,function(t,e,n){delete r[e+"-"+n]}),{tree:n,revs:r?Object.keys(r):[]}}function ct(t,e,r){var n=nt(t,e),o=ot(n.tree,r);return{tree:o.tree,stemmedRevs:o.revs,conflicts:n.conflicts}}function it(t,e){for(var r,n=t.slice(),o=e.split("-"),c=parseInt(o[0],10),i=o[1];r=n.pop();){if(r.pos===c&&r.ids[0]===i)return!0;for(var u=r.ids[2],a=0,s=u.length;a<s;a++)n.push({pos:r.pos+1,ids:u[a]})}return!1}function ut(t){return t.ids}function at(t,e){e||(e=z(t));for(var r,n=e.substring(e.indexOf("-")+1),o=t.rev_tree.map(ut);r=o.pop();){if(r[0]===n)return!!r[1].deleted;o=o.concat(r[2])}}function st(t){return/^_local/.test(t)}function ft(t,e){for(var r,n=e.rev_tree.slice();r=n.pop();){var o=r.pos,c=r.ids,i=c[0],u=c[1],a=c[2],s=0===a.length,f=r.history?r.history.slice():[];if(f.push({id:i,pos:o,opts:u}),s)for(var l=0,_=f.length;l<_;l++){var d=f[l],p=d.pos+"-"+d.id;if(p===t)return o+"-"+i}for(var h=0,v=a.length;h<v;h++)n.push({pos:o+1,ids:a[h],history:f})}throw new Error("Unable to resolve latest revision for id "+e.id+", rev "+t)}function lt(t){return An('"use strict";\nreturn '+t+";",{})}function _t(t){var e=["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+t+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n");return An(e,{})}function dt(t,e){try{t.emit("change",e)}catch(t){E("error",'Error in .on("change", function):',t)}}function pt(t,e,r){function n(){o.cancel()}En.EventEmitter.call(this);var o=this;this.db=t,e=e?a(e):{};var c=e.complete=s(function(e,r){e?B(o,"error")>0&&o.emit("error",e):o.emit("complete",r),o.removeAllListeners(),t.removeListener("destroyed",n)});r&&(o.on("complete",function(t){r(null,t)}),o.on("error",r)),t.once("destroyed",n),e.onChange=function(t){o.isCancelled||dt(o,t)};var i=new On(function(t,r){e.complete=function(e,n){e?r(e):t(n)}});o.once("cancel",function(){t.removeListener("destroyed",n),e.complete(null,{status:"cancelled"})}),this.then=i.then.bind(i),this.catch=i.catch.bind(i),this.then(function(t){c(null,t)},c),t.taskqueue.isReady?o.doChanges(e):t.taskqueue.addTask(function(t){t?e.complete(t):o.isCancelled?o.emit("cancel"):o.doChanges(e)})}function ht(t,e,r){var n=[{rev:t._rev}];"all_docs"===r.style&&(n=V(e.rev_tree).map(function(t){return{rev:t.rev}}));var o={id:e.id,changes:n,doc:t};return at(e,t._rev)&&(o.deleted=!0),r.conflicts&&(o.doc._conflicts=X(e),o.doc._conflicts.length||delete o.doc._conflicts),o}function vt(t,e){return t<e?-1:t>e?1:0}function gt(t){return function(e,r){e||r[0]&&r[0].error?t(e||r[0]):t(null,r.length?r[0]:r)}}function mt(t){for(var e=0;e<t.length;e++){var r=t[e];if(r._deleted)delete r._attachments;else if(r._attachments)for(var n=Object.keys(r._attachments),o=0;o<n.length;o++){var c=n[o];r._attachments[c]=v(r._attachments[c],["data","digest","content_type","length","revpos","stub"])}}}function yt(t,e){var r=vt(t._id,e._id);return 0!==r?r:vt(t._revisions?t._revisions.start:0,e._revisions?e._revisions.start:0)}function bt(t){var e={},r=[];return H(t,function(t,n,o,c){var i=n+"-"+o;return t&&(e[i]=0),void 0!==c&&r.push({from:c,to:i}),i}),r.reverse(),r.forEach(function(t){void 0===e[t.from]?e[t.from]=1+e[t.to]:e[t.from]=Math.min(e[t.from],1+e[t.to])}),e}function wt(t,e,r){var n="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;if(e.descending&&n.reverse(),!n.length)return t._allDocs({limit:0},r);var o={offset:e.skip};return On.all(n.map(function(r){var n=Pn({key:r,deleted:"ok"},e);return["limit","skip","keys"].forEach(function(t){delete n[t]}),new On(function(e,c){t._allDocs(n,function(t,n){if(t)return c(t);o.total_rows=n.total_rows,e(n.rows[0]||{key:r,error:"not_found"})})})})).then(function(t){return o.rows=t,o})}function kt(t){var e=t._compactionQueue[0],r=e.opts,n=e.callback;t.get("_local/compaction").catch(function(){return!1}).then(function(e){e&&e.last_seq&&(r.last_seq=e.last_seq),t._compact(r,function(e,r){e?n(e):n(null,r),xn(function(){t._compactionQueue.shift(),t._compactionQueue.length&&kt(t)})})})}function Tt(t){return"_"===t.charAt(0)&&t+" is not a valid attachment name, attachment names cannot start with '_'"}function Et(){En.EventEmitter.call(this)}function St(){this.isReady=!1,this.failed=!1,this.queue=[]}function xt(t,e){var r=t.match(/([a-z\-]*):\/\/(.*)/);if(r)return{name:/https?/.test(r[1])?r[1]+"://"+r[2]:r[2],adapter:r[1]};var n=qt.adapters,o=qt.preferredAdapters,c=qt.prefix,i=e.adapter;if(!i)for(var u=0;u<o.length;++u){i=o[u];{if(!("idb"===i&&"websql"in n&&w()&&localStorage["_pouch__websqldb_"+c+t]))break;E("log",'PouchDB is downgrading "'+t+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.')}}var a=n[i];return{name:a&&"use_prefix"in a&&!a.use_prefix?t:c+t,adapter:i}}function At(t){function e(){t.removeListener("closed",n),t.constructor.emit("destroyed",t.name)}function r(){t.removeListener("destroyed",e),t.removeListener("closed",n),t.emit("destroyed")}function n(){t.removeListener("destroyed",e),o.delete(t.name)}var o=t.constructor._destructionListeners;t.once("destroyed",e),t.once("closed",n),o.has(t.name)||o.set(t.name,[]),o.get(t.name).push(r)}function qt(t,e){if(!(this instanceof qt))return new qt(t,e);var r=this;if(e=e||{},t&&"object"==typeof t&&(e=t,t=e.name,delete e.name),this.__opts=e=a(e),r.auto_compaction=e.auto_compaction,r.prefix=qt.prefix,"string"!=typeof t)throw new Error("Missing/invalid DB name");var n=(e.prefix||"")+t,o=xt(n,e);if(e.name=o.name,e.adapter=e.adapter||o.adapter,r.name=t,r._adapter=e.adapter,Tn("pouchdb:adapter")("Picked adapter: "+e.adapter),!qt.adapters[e.adapter]||!qt.adapters[e.adapter].valid())throw new Error("Invalid Adapter: "+e.adapter);Et.call(r),r.taskqueue=new St,r.adapter=e.adapter,qt.adapters[e.adapter].call(r,e,function(t){if(t)return r.taskqueue.fail(t);At(r),r.emit("created",r),qt.emit("created",r.name),r.taskqueue.ready(r)})}function Nt(t){return t.reduce(function(t,e){return t[e]=!0,t},{})}function Ot(t){if(!/^\d+\-./.test(t))return N(to);var e=t.indexOf("-"),r=t.substring(0,e),n=t.substring(e+1);return{prefix:parseInt(r,10),id:n}}function Ct(t,e){for(var r=t.start-t.ids.length+1,n=t.ids,o=[n[0],e,[]],c=1,i=n.length;c<i;c++)o=[n[c],{status:"missing"},[o]];return[{pos:r,ids:o}]}function Dt(t,e){var r,n,o,c={status:"available"};if(t._deleted&&(c.deleted=!0),e)if(t._id||(t._id=W()),n=W(32,16).toLowerCase(),t._rev){if(o=Ot(t._rev),o.error)return o;t._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[n,c,[]]]]}],r=o.prefix+1}else t._rev_tree=[{pos:1,ids:[n,c,[]]}],r=1;else if(t._revisions&&(t._rev_tree=Ct(t._revisions,c),r=t._revisions.start,n=t._revisions.ids[0]),!t._rev_tree){if(o=Ot(t._rev),o.error)return o;r=o.prefix,n=o.id,t._rev_tree=[{pos:r,ids:[n,c,[]]}]}L(t._id),t._rev=r+"-"+n;var i={metadata:{},data:{}};for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var a="_"===u[0];if(a&&!fo[u]){var s=N(Gn,u);throw s.message=Gn.message+": "+u,s}a&&!lo[u]?i.metadata[u.slice(1)]=t[u]:i.data[u]=t[u]}return i}function Rt(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(c){if("TypeError"!==c.name)throw c;for(var r="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,n=new r,o=0;o<t.length;o+=1)n.append(t[o]);return n.getBlob(e.type)}}function It(t){for(var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r),o=0;o<e;o++)n[o]=t.charCodeAt(o);return r}function Lt(t,e){return Rt([It(t)],{type:e})}function Bt(t,e){return Lt(_o(t),e)}function jt(t){for(var e="",r=new Uint8Array(t),n=r.byteLength,o=0;o<n;o++)e+=String.fromCharCode(r[o]);return e}function Mt(t,e){if("undefined"==typeof FileReader)return e(jt((new FileReaderSync).readAsArrayBuffer(t)));var r=new FileReader,n="function"==typeof r.readAsBinaryString;r.onloadend=function(t){var r=t.target.result||"";if(n)return e(r);e(jt(r))},n?r.readAsBinaryString(t):r.readAsArrayBuffer(t)}function Pt(t,e){Mt(t,function(t){e(t)})}function Ft(t,e){Pt(t,function(t){e(po(t))})}function Ut(t,e){if("undefined"==typeof FileReader)return e((new FileReaderSync).readAsArrayBuffer(t));var r=new FileReader;r.onloadend=function(t){var r=t.target.result||new ArrayBuffer(0);e(r)},r.readAsArrayBuffer(t)}function Jt(t){return po(t)}function Wt(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.slice(e,r)}function zt(t,e,r,n,o){(r>0||n<e.size)&&(e=Wt(e,r,n)),Ut(e,function(e){t.append(e),o()})}function Ht(t,e,r,n,o){(r>0||n<e.length)&&(e=e.substring(r,n)),t.appendBinary(e),o()}function Kt(t,e){function r(){ho(o)}function n(){var t=f.end(!0),r=Jt(t);e(r),f.destroy()}function o(){var e=s*u,o=e+u;s++,s<a?l(f,t,e,o,r):l(f,t,e,o,n)}var c="string"==typeof t,i=c?t.length:t.size,u=Math.min(vo,i),a=Math.ceil(i/u),s=0,f=c?new qn:new qn.ArrayBuffer,l=c?Ht:zt;o()}function Vt(t){return qn.hash(t)}function Xt(t){try{return _o(t)}catch(t){var e=N(Vn,"Attachment is not a valid base64 string");return{error:e}}}function Gt(t,e,r){var n=Xt(t.data);if(n.error)return r(n.error);t.length=n.length,t.data="blob"===e?Lt(n,t.content_type):"base64"===e?po(n):n,Kt(n,function(e){t.digest="md5-"+e,r()})}function Qt(t,e,r){Kt(t.data,function(n){t.digest="md5-"+n,t.length=t.data.size||t.data.length||0,"binary"===e?Pt(t.data,function(e){t.data=e,r()}):"base64"===e?Ft(t.data,function(e){t.data=e,r()}):r()})}function $t(t,e,r){if(t.stub)return r();"string"==typeof t.data?Gt(t,e,r):Qt(t,e,r)}function Yt(t,e,r){function n(){c++,t.length===c&&(o?r(o):r())}if(!t.length)return r();var o,c=0;t.forEach(function(t){function r(t){o=t,++i===c.length&&n()}var c=t.data&&t.data._attachments?Object.keys(t.data._attachments):[],i=0;if(!c.length)return n();for(var u in t.data._attachments)t.data._attachments.hasOwnProperty(u)&&$t(t.data._attachments[u],e,r)})}function Zt(t,e,r,n,o,c,i,u){if(it(e.rev_tree,r.metadata.rev))return n[o]=r,c();var a=e.winningRev||z(e),s="deleted"in e?e.deleted:at(e,a),f="deleted"in r.metadata?r.metadata.deleted:at(r.metadata),l=/^1-/.test(r.metadata.rev);if(s&&!f&&u&&l){var _=r.data;_._rev=a,_._id=r.metadata.id,r=Dt(_,u)}var d=ct(e.rev_tree,r.metadata.rev_tree[0],t);if(u&&(s&&f&&"new_leaf"!==d.conflicts||!s&&"new_leaf"!==d.conflicts||s&&!f&&"new_branch"===d.conflicts)){var p=N(Jn);return n[o]=p,c()}var h=r.metadata.rev;r.metadata.rev_tree=d.tree,r.stemmedRevs=d.stemmedRevs||[],e.rev_map&&(r.metadata.rev_map=e.rev_map);var v,g=z(r.metadata),m=at(r.metadata,g),y=s===m?0:s<m?-1:1;v=h===g?m:at(r.metadata,h),i(r,g,m,v,!0,y,o,c)}function te(t){return"missing"===t.metadata.rev_tree[0].ids[1].status}function ee(t,e,r,n,o,c,i,u,a){function s(t,e,r){var n=z(t.metadata),o=at(t.metadata,n);if("was_delete"in u&&o)return c[e]=N(Un,"deleted"),r();if(l&&te(t)){var a=N(Jn);return c[e]=a,r()}i(t,n,o,o,!1,o?0:1,e,r)}function f(){++d===p&&a&&a()}t=t||1e3;var l=u.new_edits,_=new Ln,d=0,p=e.length;e.forEach(function(t,e){if(t._id&&st(t._id)){var n=t._deleted?"_removeLocal":"_putLocal";return void r[n](t,{ctx:o},function(t,r){c[e]=t||r,f()})}var i=t.metadata.id;_.has(i)?(p--,_.get(i).push([t,e])):_.set(i,[[t,e]])}),_.forEach(function(e,r){function o(){++a<e.length?u():f()}function u(){var u=e[a],f=u[0],_=u[1];if(n.has(r))Zt(t,n.get(r),f,c,_,o,i,l);else{var d=ct([],f.metadata.rev_tree[0],t);f.metadata.rev_tree=d.tree,f.stemmedRevs=d.stemmedRevs||[],s(f,_,o)}}var a=0;u()})}function re(t){try{return JSON.parse(t)}catch(e){return Nn.parse(t)}}function ne(t){try{return JSON.stringify(t)}catch(e){return Nn.stringify(t)}}function oe(t){return function(e){var r="unknown_error";e.target&&e.target.error&&(r=e.target.error.name||e.target.error.message),t(N(Yn,r,e.type))}}function ce(t,e,r){return{data:ne(t),winningRev:e,deletedOrLocal:r?"1":"0",seq:t.seq,id:t.id}}function ie(t){if(!t)return null;var e=re(t.data);return e.winningRev=t.winningRev,e.deleted="1"===t.deletedOrLocal,e.seq=t.seq,e}function ue(t){if(!t)return t;var e=t._doc_id_rev.lastIndexOf(":");return t._id=t._doc_id_rev.substring(0,e-1),t._rev=t._doc_id_rev.substring(e+1),delete t._doc_id_rev,t}function ae(t,e,r,n){r?n(t?"string"!=typeof t?t:Bt(t,e):Rt([""],{type:e})):t?"string"!=typeof t?Mt(t,function(t){n(po(t))}):n(t):n("")}function se(t,e,r,n){function o(){++u===i.length&&n&&n()}function c(t,e){var n=t._attachments[e],c=n.digest;r.objectStore(bo).get(c).onsuccess=function(t){n.body=t.target.result.body,o()}}var i=Object.keys(t._attachments||{});if(!i.length)return n&&n();var u=0;i.forEach(function(r){e.attachments&&e.include_docs?c(t,r):(t._attachments[r].stub=!0,o())})}function fe(t,e){return On.all(t.map(function(t){if(t.doc&&t.doc._attachments){var r=Object.keys(t.doc._attachments);return On.all(r.map(function(r){var n=t.doc._attachments[r];if("body"in n){var o=n.body,c=n.content_type;return new On(function(i){ae(o,c,e,function(e){t.doc._attachments[r]=Pn(v(n,["digest","content_type"]),{data:e}),i()})})}}))}}))}function le(t,e,r){function n(){--s||o()}function o(){c.length&&c.forEach(function(t){a.index("digestSeq").count(IDBKeyRange.bound(t+"::",t+"::￿",!1,!1)).onsuccess=function(e){e.target.result||u.delete(t)}})}var c=[],i=r.objectStore(yo),u=r.objectStore(bo),a=r.objectStore(wo),s=t.length;t.forEach(function(t){var r=i.index("_doc_id_rev"),o=e+"::"+t;r.getKey(o).onsuccess=function(t){var e=t.target.result;if("number"!=typeof e)return n();i.delete(e),a.index("seq").openCursor(IDBKeyRange.only(e)).onsuccess=function(t){var e=t.target.result;if(e){var r=e.value.digestSeq.split("::")[0];c.push(r),a.delete(e.primaryKey),e.continue()}else n()}}})}function _e(t,e,r){try{return{txn:t.transaction(e,r)}}catch(t){return{error:t}}}function de(t,e,r,n,o,c){function i(){var t=[mo,yo,bo,To,wo,ko],e=_e(o,t,"readwrite");if(e.error)return c(e.error);y=e.txn,y.onabort=oe(c),y.ontimeout=oe(c),y.oncomplete=l,b=y.objectStore(mo),w=y.objectStore(yo),k=y.objectStore(bo),T=y.objectStore(wo),E=y.objectStore(ko),E.get(ko).onsuccess=function(t){x=t.target.result,s()},d(function(t){if(t)return B=!0,c(t);f()})}function u(){D=!0,s()}function a(){ee(t.revs_limit,A,n,L,y,I,p,r,u)}function s(){x&&D&&(x.docCount+=R,E.put(x))}function f(){function t(){++r===A.length&&a()}function e(e){var r=ie(e.target.result);r&&L.set(r.id,r),t()}if(A.length)for(var r=0,n=0,o=A.length;n<o;n++){var c=A[n];if(c._id&&st(c._id))t();else{var i=b.get(c.metadata.id);i.onsuccess=e}}}function l(){B||(So.notify(n._meta.name),c(null,I))}function _(t,e){k.get(t).onsuccess=function(r){if(r.target.result)e();else{var n=N(eo,"unknown stub attachment with digest "+t);n.status=412,e(n)}}}function d(t){function e(){++o===r.length&&t(n)}var r=[];if(A.forEach(function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach(function(e){var n=t.data._attachments[e];n.stub&&r.push(n.digest)})}),!r.length)return t();var n,o=0;r.forEach(function(t){_(t,function(t){t&&!n&&(n=t),e()})})}function p(t,e,r,n,o,c,i,u){t.metadata.winningRev=e,t.metadata.deleted=r;var a=t.data;if(a._id=t.metadata.id,a._rev=t.metadata.rev,n&&(a._deleted=!0),a._attachments&&Object.keys(a._attachments).length)return v(t,e,r,o,i,u);R+=c,s(),h(t,e,r,o,i,u)}function h(t,e,r,o,c,i){function u(c){var i=t.stemmedRevs||[];o&&n.auto_compaction&&(i=i.concat(G(t.metadata))),i&&i.length&&le(i,t.metadata.id,y),l.seq=c.target.result;var u=ce(l,e,r);b.put(u).onsuccess=s}function a(t){t.preventDefault(),t.stopPropagation(),w.index("_doc_id_rev").getKey(f._doc_id_rev).onsuccess=function(t){w.put(f,t.target.result).onsuccess=u}}function s(){I[c]={ok:!0,id:l.id,rev:l.rev},L.set(t.metadata.id,t.metadata),g(t,l.seq,i)}var f=t.data,l=t.metadata;f._doc_id_rev=l.id+"::"+l.rev,delete f._id,delete f._rev;var _=w.put(f);_.onsuccess=u,_.onerror=a}function v(t,e,r,n,o,c){function i(){s===f.length&&h(t,e,r,n,o,c)}function u(){s++,i()}var a=t.data,s=0,f=Object.keys(a._attachments);f.forEach(function(r){var n=t.data._attachments[r];if(n.stub)s++,i();else{var o=n.data;delete n.data,n.revpos=parseInt(e,10);m(n.digest,o,u)}})}function g(t,e,r){function n(){++o===c.length&&r()}var o=0,c=Object.keys(t.data._attachments||{});if(!c.length)return r();for(var i=0;i<c.length;i++)!function(r){var o=t.data._attachments[r].digest,c=T.put({seq:e,digestSeq:o+"::"+e});c.onsuccess=n,c.onerror=function(t){t.preventDefault(),t.stopPropagation(),n()}}(c[i])}function m(t,e,r){k.count(t).onsuccess=function(n){if(n.target.result)return r();var o={digest:t,body:e};k.put(o).onsuccess=r}}for(var y,b,w,k,T,E,S,x,A=e.docs,q=0,O=A.length;q<O;q++){var C=A[q];C._id&&st(C._id)||(C=A[q]=Dt(C,r.new_edits),C.error&&!S&&(S=C))}if(S)return c(S);var D=!1,R=0,I=new Array(A.length),L=new Ln,B=!1,j=n._meta.blobSupport?"blob":"base64";Yt(A,j,function(t){if(t)return c(t);i()})}function pe(t,e,r,n,o){function c(t){f=t.target.result,s&&o(s,f,l)}function i(t){s=t.target.result,f&&o(s,f,l)}function u(){if(!s.length)return o();var r,u=s[s.length-1];if(e&&e.upper)try{r=IDBKeyRange.bound(u,e.upper,!0,e.upperOpen)}catch(t){if("DataError"===t.name&&0===t.code)return o()}else r=IDBKeyRange.lowerBound(u,!0);e=r,s=null,f=null,t.getAll(e,n).onsuccess=c,t.getAllKeys(e,n).onsuccess=i}function a(t){var e=t.target.result;if(!e)return o();o([e.key],[e.value],e)}var s,f,l,_="function"==typeof t.getAll&&"function"==typeof t.getAllKeys&&n>1&&!r;_?(l={continue:u},t.getAll(e,n).onsuccess=c,t.getAllKeys(e,n).onsuccess=i):r?t.openCursor(e,"prev").onsuccess=a:t.openCursor(e).onsuccess=a}function he(t,e,r){function n(t){var e=t.target.result;e?(o.push(e.value),e.continue()):r({target:{result:o}})}if("function"==typeof t.getAll)return void(t.getAll(e).onsuccess=r);var o=[];t.openCursor(e).onsuccess=n}function ve(t,e,r,n,o){try{if(t&&e)return o?IDBKeyRange.bound(e,t,!r,!1):IDBKeyRange.bound(t,e,!1,!r);if(t)return o?IDBKeyRange.upperBound(t):IDBKeyRange.lowerBound(t);if(e)return o?IDBKeyRange.lowerBound(e,!r):IDBKeyRange.upperBound(e,!r);if(n)return IDBKeyRange.only(n)}catch(t){return{error:t}}return null}function ge(t,e,r){function n(e,r,n){var o=e.id+"::"+n;S.get(o).onsuccess=function(n){if(r.doc=ue(n.target.result),t.conflicts){var o=X(e);o.length&&(r.doc._conflicts=o)}se(r.doc,t,b)}}function o(e,r){var o={id:r.id,key:r.id,value:{rev:e}},c=r.deleted;"ok"===t.deleted?(x.push(o),c?(o.value.deleted=!0,o.doc=null):t.include_docs&&n(r,o,e)):!c&&d--<=0&&(x.push(o),t.include_docs&&n(r,o,e))}function c(t){for(var e=0,r=t.length;e<r&&x.length!==p;e++){var n=t[e],c=ie(n);o(c.winningRev,c)}}function i(t,e,r){r&&(c(e),x.length<p&&r.continue())}function u(e){var r=e.target.result;t.descending&&(r=r.reverse()),c(r)}function a(){r(null,{total_rows:w,offset:t.skip,rows:x})}function s(){t.attachments?fe(x,t.binary).then(a):a()}var f="startkey"in t&&t.startkey,l="endkey"in t&&t.endkey,_="key"in t&&t.key,d=t.skip||0,p="number"==typeof t.limit?t.limit:-1,h=!1!==t.inclusive_end,v=ve(f,l,h,_,t.descending),g=v&&v.error;if(g&&("DataError"!==g.name||0!==g.code))return r(N(Yn,g.name,g.message));var m=[mo,yo,ko];t.attachments&&m.push(bo);var y=_e(e,m,"readonly");if(y.error)return r(y.error);var b=y.txn;b.oncomplete=s,b.onabort=oe(r);var w,k=b.objectStore(mo),T=b.objectStore(yo),E=b.objectStore(ko),S=T.index("_doc_id_rev"),x=[];return E.get(ko).onsuccess=function(t){w=t.target.result.docCount},g||0===p?void 0:-1===p?he(k,v,u):void pe(k,v,t.descending,p+d,i)}function me(t){return new On(function(e){var r=Rt([""]);t.objectStore(Eo).put(r,"key").onsuccess=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||parseInt(t[1],10)>=43)},t.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)}}).catch(function(){return!1})}function ye(t,e){t.objectStore(mo).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(t){e(t.target.result)}}function be(t,e,r,n){try{t(e,r)}catch(e){n.emit("error",e)}}function we(){!xo&&Ao.length&&(xo=!0,Ao.shift()())}function ke(t,e,r){Ao.push(function(){t(function(t,n){be(e,t,n,r),xo=!1,xn(function(){we(r)})})}),we()}function Te(t,e,r,n){function o(e,r,n){function o(e,r){var n=t.processChange(r,e,t);_=n.seq=e.seq;var o=w(n);if("object"==typeof o)return t.complete(o);o&&(b++,p&&y.push(n),t.attachments&&t.include_docs?se(r,t,h,function(){fe([n],t.binary).then(function(){t.onChange(n)})}):t.onChange(n))}function c(){for(var t=0,e=u.length;t<e&&b!==d;t++){var r=u[t];if(r){o(a[t],r)}}b!==d&&n.continue()}if(n&&e.length){var u=new Array(e.length),a=new Array(e.length),s=0;r.forEach(function(t,r){i(ue(t),e[r],function(t,n){a[r]=t,u[r]=n,++s===e.length&&c()})})}}function c(t,e,r,n){if(r.seq!==e)return n();if(r.winningRev===t._rev)return n(r,t);var o=t._id+"::"+r.winningRev;m.get(o).onsuccess=function(t){n(r,ue(t.target.result))}}function i(t,e,r){if(l&&!l.has(t._id))return r();var n=k.get(t._id);if(n)return c(t,e,n,r);g.get(t._id).onsuccess=function(o){n=ie(o.target.result),k.set(t._id,n),c(t,e,n,r)}}function u(){t.complete(null,{results:y,last_seq:_})}function s(){!t.continuous&&t.attachments?fe(y).then(u):u()}if(t=a(t),t.continuous){var f=r+":"+W();return So.addListener(r,f,e,t),So.notify(r),{cancel:function(){So.removeListener(r,f)}}}var l=t.doc_ids&&new In(t.doc_ids);t.since=t.since||0;var _=t.since,d="limit"in t?t.limit:-1;0===d&&(d=1);var p;p="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var h,v,g,m,y=[],b=0,w=D(t),k=new Ln,T=[mo,yo];t.attachments&&T.push(bo);var E=_e(n,T,"readonly");if(E.error)return t.complete(E.error);h=E.txn,h.onabort=oe(t.complete),h.oncomplete=s,v=h.objectStore(yo),g=h.objectStore(mo),m=v.index("_doc_id_rev"),pe(v,t.since&&!t.descending?IDBKeyRange.lowerBound(t.since,!0):null,t.descending,d,o)}function Ee(t,e){var r=this;ke(function(e){Se(r,t,e)},e,r.constructor)}function Se(t,e,r){function n(t){var e=t.createObjectStore(mo,{keyPath:"id"});t.createObjectStore(yo,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),t.createObjectStore(bo,{keyPath:"digest"}),t.createObjectStore(ko,{keyPath:"id",autoIncrement:!1}),t.createObjectStore(Eo),e.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),t.createObjectStore(To,{keyPath:"_id"});var r=t.createObjectStore(wo,{autoIncrement:!0});r.createIndex("seq","seq"),r.createIndex("digestSeq","digestSeq",{unique:!0})}function o(t,e){var r=t.objectStore(mo);r.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),r.openCursor().onsuccess=function(t){var n=t.target.result;if(n){var o=n.value,c=at(o);o.deletedOrLocal=c?"1":"0",r.put(o),n.continue()}else e()}}function c(t){t.createObjectStore(To,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function i(t,e){var r=t.objectStore(To),n=t.objectStore(mo),o=t.objectStore(yo);n.openCursor().onsuccess=function(t){var c=t.target.result;if(c){var i=c.value,u=i.id,a=st(u),s=z(i);if(a){var f=u+"::"+s,l=u+"::",_=u+"::~",d=o.index("_doc_id_rev"),p=IDBKeyRange.bound(l,_,!1,!1),h=d.openCursor(p);h.onsuccess=function(t){if(h=t.target.result){var e=h.value;e._doc_id_rev===f&&r.put(e),o.delete(h.primaryKey),h.continue()}else n.delete(c.primaryKey),c.continue()}}else c.continue()}else e&&e()}}function u(t){var e=t.createObjectStore(wo,{autoIncrement:!0});e.createIndex("seq","seq"),e.createIndex("digestSeq","digestSeq",{unique:!0})}function a(t,e){var r=t.objectStore(yo),n=t.objectStore(bo),o=t.objectStore(wo);n.count().onsuccess=function(t){if(!t.target.result)return e();r.openCursor().onsuccess=function(t){var r=t.target.result;if(!r)return e();for(var n=r.value,c=r.primaryKey,i=Object.keys(n._attachments||{}),u={},a=0;a<i.length;a++)u[n._attachments[i[a]].digest]=!0;var s=Object.keys(u);for(a=0;a<s.length;a++){var f=s[a];o.put({seq:c,digestSeq:f+"::"+c})}r.continue()}}}function s(t){function e(t){return t.data?ie(t):(t.deleted="1"===t.deletedOrLocal,t)}var r=t.objectStore(yo),n=t.objectStore(mo);n.openCursor().onsuccess=function(t){function o(){var t=ce(i,i.winningRev,i.deleted);n.put(t).onsuccess=function(){c.continue()}}var c=t.target.result;if(c){var i=e(c.value);if(i.winningRev=i.winningRev||z(i),i.seq)return o();!function(){var t=i.id+"::",e=i.id+"::￿",n=r.index("_doc_id_rev").openCursor(IDBKeyRange.bound(t,e)),c=0;n.onsuccess=function(t){var e=t.target.result;if(!e)return i.seq=c,o();var r=e.primaryKey;r>c&&(c=r),e.continue()}}()}}}var l=e.name,_=null;t._meta=null,t.type=function(){return"idb"},t._id=f(function(e){e(null,t._meta.instanceId)}),t._bulkDocs=function(r,n,o){de(e,r,n,t,_,o)},t._get=function(t,e,r){function n(){r(i,{doc:o,metadata:c,ctx:u})}var o,c,i,u=e.ctx;if(!u){var a=_e(_,[mo,yo,bo],"readonly");if(a.error)return r(a.error);u=a.txn}u.objectStore(mo).get(t).onsuccess=function(t){if(!(c=ie(t.target.result)))return i=N(Un,"missing"),n();var r;if(e.rev)r=e.latest?ft(e.rev,c):e.rev;else{r=c.winningRev;if(at(c))return i=N(Un,"deleted"),n()}var a=u.objectStore(yo),s=c.id+"::"+r;a.index("_doc_id_rev").get(s).onsuccess=function(t){if(o=t.target.result,o&&(o=ue(o)),!o)return i=N(Un,"missing"),n();n()}}},t._getAttachment=function(t,e,r,n,o){var c;if(n.ctx)c=n.ctx;else{var i=_e(_,[mo,yo,bo],"readonly");if(i.error)return o(i.error);c=i.txn}var u=r.digest,a=r.content_type;c.objectStore(bo).get(u).onsuccess=function(t){ae(t.target.result.body,a,n.binary,function(t){o(null,t)})}},t._info=function(e){var r,n,o=_e(_,[ko,yo],"readonly");if(o.error)return e(o.error);var c=o.txn;c.objectStore(ko).get(ko).onsuccess=function(t){n=t.target.result.docCount},c.objectStore(yo).openCursor(null,"prev").onsuccess=function(t){var e=t.target.result;r=e?e.key:0},c.oncomplete=function(){e(null,{doc_count:n,update_seq:r,idb_attachment_format:t._meta.blobSupport?"binary":"base64"})}},t._allDocs=function(t,e){ge(t,_,e)},t._changes=function(e){Te(e,t,l,_)},t._close=function(t){_.close(),qo.delete(l),t()},t._getRevisionTree=function(t,e){var r=_e(_,[mo],"readonly");if(r.error)return e(r.error);r.txn.objectStore(mo).get(t).onsuccess=function(t){var r=ie(t.target.result);r?e(null,r.rev_tree):e(N(Un))}},t._doCompaction=function(t,e,r){var n=[mo,yo,bo,wo],o=_e(_,n,"readwrite");if(o.error)return r(o.error);var c=o.txn;c.objectStore(mo).get(t).onsuccess=function(r){var n=ie(r.target.result);H(n.rev_tree,function(t,r,n,o,c){var i=r+"-"+n;-1!==e.indexOf(i)&&(c.status="missing")}),le(e,t,c);var o=n.winningRev,i=n.deleted;c.objectStore(mo).put(ce(n,o,i))},c.onabort=oe(r),c.oncomplete=function(){r()}},t._getLocal=function(t,e){var r=_e(_,[To],"readonly");if(r.error)return e(r.error);var n=r.txn,o=n.objectStore(To).get(t);o.onerror=oe(e),o.onsuccess=function(t){var r=t.target.result;r?(delete r._doc_id_rev,e(null,r)):e(N(Un))}},t._putLocal=function(t,e,r){"function"==typeof e&&(r=e,e={}),delete t._revisions;var n=t._rev,o=t._id;t._rev=n?"0-"+(parseInt(n.split("-")[1],10)+1):"0-1";var c,i=e.ctx;if(!i){var u=_e(_,[To],"readwrite");if(u.error)return r(u.error);i=u.txn,i.onerror=oe(r),i.oncomplete=function(){c&&r(null,c)}}var a,s=i.objectStore(To);n?(a=s.get(o),a.onsuccess=function(o){var i=o.target.result;if(i&&i._rev===n){s.put(t).onsuccess=function(){c={ok:!0,id:t._id,rev:t._rev},e.ctx&&r(null,c)}}else r(N(Jn))}):(a=s.add(t),a.onerror=function(t){r(N(Jn)),t.preventDefault(),t.stopPropagation()},a.onsuccess=function(){c={ok:!0,id:t._id,rev:t._rev},e.ctx&&r(null,c)})},t._removeLocal=function(t,e,r){"function"==typeof e&&(r=e,e={});var n=e.ctx;if(!n){var o=_e(_,[To],"readwrite");if(o.error)return r(o.error);n=o.txn,n.oncomplete=function(){c&&r(null,c)}}var c,i=t._id,u=n.objectStore(To),a=u.get(i);a.onerror=oe(r),a.onsuccess=function(n){var o=n.target.result;o&&o._rev===t._rev?(u.delete(i),c={ok:!0,id:i,rev:"0-0"},e.ctx&&r(null,c)):r(N(Un))}},t._destroy=function(t,e){So.removeAllListeners(l);var r=No.get(l);r&&r.result&&(r.result.close(),qo.delete(l));var n=indexedDB.deleteDatabase(l);n.onsuccess=function(){No.delete(l),w()&&l in localStorage&&delete localStorage[l],e(null,{ok:!0})},n.onerror=oe(e)};var d=qo.get(l);if(d)return _=d.idb,t._meta=d.global,xn(function(){r(null,t)});var p;p=e.storage?xe(l,e.storage):indexedDB.open(l,go),No.set(l,p),p.onupgradeneeded=function(t){function e(){var t=l[_-1];_++,t&&t(f,e)}var r=t.target.result;if(t.oldVersion<1)return n(r);var f=t.currentTarget.transaction;t.oldVersion<3&&c(r),t.oldVersion<4&&u(r);var l=[o,i,a,s],_=t.oldVersion;e()},p.onsuccess=function(e){function n(){void 0!==u&&f&&(t._meta={name:l,instanceId:a,blobSupport:u},qo.set(l,{idb:_,global:t._meta}),r(null,t))}function o(){if(void 0!==i&&void 0!==c){var t=l+"_id";t in c?a=c[t]:c[t]=a=W(),c.docCount=i,s.objectStore(ko).put(c)}}_=e.target.result,_.onversionchange=function(){_.close(),qo.delete(l)},_.onabort=function(t){E("error","Database has a global failure",t.target.error),_.close(),qo.delete(l)};var c,i,u,a,s=_.transaction([ko,Eo,mo],"readwrite"),f=!1;s.objectStore(ko).get(ko).onsuccess=function(t){c=t.target.result||{id:ko},o()},ye(s,function(t){i=t,o()}),so||(so=me(s)),so.then(function(t){u=t,n()}),s.oncomplete=function(){f=!0,n()}},p.onerror=function(){var t="Failed to open indexedDB, are you in private browsing mode?";E("error",t),r(N(Yn,t))}}function xe(t,e){try{return indexedDB.open(t,{version:go,storage:e})}catch(e){return indexedDB.open(t,go)}}function Ae(t){return decodeURIComponent(escape(t))}function qe(t){return t<65?t-48:t-55}function Ne(t,e,r){for(var n="";e<r;)n+=String.fromCharCode(qe(t.charCodeAt(e++))<<4|qe(t.charCodeAt(e++)));return n}function Oe(t,e,r){for(var n="";e<r;)n+=String.fromCharCode(qe(t.charCodeAt(e+2))<<12|qe(t.charCodeAt(e+3))<<8|qe(t.charCodeAt(e))<<4|qe(t.charCodeAt(e+1))),e+=4;return n}function Ce(t,e){return"UTF-8"===e?Ae(Ne(t,0,t.length)):Oe(t,0,t.length)}function De(t){return"'"+t+"'"}function Re(t){return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function Ie(t){return t.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function Le(t){return delete t._id,delete t._rev,JSON.stringify(t)}function Be(t,e,r){return t=JSON.parse(t),t._id=e,t._rev=r,t}function je(t){for(var e="(";t--;)e+="?",t&&(e+=",");return e+")"}function Me(t,e,r,n,o){return"SELECT "+t+" FROM "+("string"==typeof e?e:e.join(" JOIN "))+(r?" ON "+r:"")+(n?" WHERE "+("string"==typeof n?n:n.join(" AND ")):"")+(o?" ORDER BY "+o:"")}function Pe(t,e,r){function n(){++c===t.length&&o()}function o(){if(i.length){var t="SELECT DISTINCT digest AS digest FROM "+jo+" WHERE seq IN "+je(i.length);r.executeSql(t,i,function(t,e){for(var r=[],n=0;n<e.rows.length;n++)r.push(e.rows.item(n).digest);if(r.length){var o="DELETE FROM "+jo+" WHERE seq IN ("+i.map(function(){return"?"}).join(",")+")";t.executeSql(o,i,function(t){var e="SELECT digest FROM "+jo+" WHERE digest IN ("+r.map(function(){return"?"}).join(",")+")";t.executeSql(e,r,function(t,e){for(var n=new In,o=0;o<e.rows.length;o++)n.add(e.rows.item(o).digest);r.forEach(function(e){n.has(e)||(t.executeSql("DELETE FROM "+jo+" WHERE digest=?",[e]),t.executeSql("DELETE FROM "+Io+" WHERE digest=?",[e]))})})})}})}}if(t.length){var c=0,i=[];t.forEach(function(t){var o="SELECT seq FROM "+Ro+" WHERE doc_id=? AND rev=?";r.executeSql(o,[e,t],function(t,e){if(!e.rows.length)return n();var r=e.rows.item(0).seq;i.push(r),t.executeSql("DELETE FROM "+Ro+" WHERE seq=?",[r],n)})})}}function Fe(t){return function(e){E("error","WebSQL threw an error",e);var r=e&&e.constructor.toString().match(/function ([^\(]+)/),n=r&&r[1]||e.type,o=e.target||e.message;t(N(Zn,o,n))}}function Ue(t){return"size"in t?1e6*t.size:"undefined"!=typeof navigator&&/Android/.test(navigator.userAgent)?5e6:1}function Je(t,e,r,n,o,c,i){function u(){if(y)return i(y);c.notify(n._name),i(null,b)}function a(t,e){var r="SELECT count(*) as cnt FROM "+Io+" WHERE digest=?";m.executeSql(r,[t],function(r,n){if(0===n.rows.item(0).cnt){var o=N(eo,"unknown stub attachment with digest "+t);e(o)}else e()})}function s(t){function e(){++o===r.length&&t(n)}var r=[];if(v.forEach(function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach(function(e){var n=t.data._attachments[e];n.stub&&r.push(n.digest)})}),!r.length)return t();var n,o=0;r.forEach(function(t){a(t,function(t){t&&!n&&(n=t),e()})})}function f(t,e,r,o,c,i,u,a){function s(){function e(t,e){function n(){return++o===c.length&&e(),!1}var o=0,c=Object.keys(r._attachments||{});if(!c.length)return e();for(var i=0;i<c.length;i++)!function(e){var o="INSERT INTO "+jo+" (digest, seq) VALUES (?,?)",c=[r._attachments[e].digest,t];m.executeSql(o,c,n,n)}(c[i])}var r=t.data,n=o?1:0,c=r._id,i=r._rev,u=Le(r),a="INSERT INTO "+Ro+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",s=[c,i,u,n];m.executeSql(a,s,function(t,r){var n=r.insertId;e(n,function(){_(t,n)})},function(){var t=Me("seq",Ro,null,"doc_id=? AND rev=?");return m.executeSql(t,[c,i],function(t,r){var o=r.rows.item(0).seq,a="UPDATE "+Ro+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",s=[u,n,c,i];t.executeSql(a,s,function(t){e(o,function(){_(t,o)})})}),!1})}function f(t){p||(t?(p=t,a(p)):h===v.length&&s())}function l(t){h++,f(t)}function _(r,o){var i=t.metadata.id,s=t.stemmedRevs||[];c&&n.auto_compaction&&(s=G(t.metadata).concat(s)),s.length&&Pe(s,i,r),t.metadata.seq=o;var f=t.metadata.rev;delete t.metadata.rev;var l=c?"UPDATE "+Do+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+Ro+" WHERE doc_id="+Do+".id AND rev=?) WHERE id=?":"INSERT INTO "+Do+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",_=ne(t.metadata),d=c?[_,o,e,i]:[i,o,o,_];r.executeSql(l,d,function(){b[u]={ok:!0,id:t.metadata.id,rev:f},w.set(i,t.metadata),a()})}var p=null,h=0;t.data._id=t.metadata.id,t.data._rev=t.metadata.rev;var v=Object.keys(t.data._attachments||{});o&&(t.data._deleted=!0),v.forEach(function(r){var n=t.data._attachments[r];if(n.stub)h++,f();else{var o=n.data;delete n.data,n.revpos=parseInt(e,10);d(n.digest,o,l)}}),v.length||s()}function l(){ee(t.revs_limit,v,n,w,m,b,f,r)}function _(t){function e(){++r===v.length&&t()}if(!v.length)return t();var r=0;v.forEach(function(t){if(t._id&&st(t._id))return e();var r=t.metadata.id;m.executeSql("SELECT json FROM "+Do+" WHERE id = ?",[r],function(t,n){if(n.rows.length){var o=re(n.rows.item(0).json);w.set(r,o)}e()})})}function d(t,e,r){var n="SELECT digest FROM "+Io+" WHERE digest=?";m.executeSql(n,[t],function(o,c){if(c.rows.length)return r();n="INSERT INTO "+Io+" (digest, body, escaped) VALUES (?,?,1)",o.executeSql(n,[t,Re(e)],function(){r()},function(){return r(),!1})})}var p=r.new_edits,h=e.docs,v=h.map(function(t){return t._id&&st(t._id)?t:Dt(t,p)}),g=v.filter(function(t){return t.error});if(g.length)return i(g[0]);var m,y,b=new Array(v.length),w=new Ln;Yt(v,"binary",function(t){if(t)return i(t);o.transaction(function(t){m=t,s(function(t){t?y=t:_(l)})},Fe(i),u)})}function We(t){return t.websql(t.name,t.version,t.description,t.size)}function ze(t){try{return{db:We(t)}}catch(t){return{error:t}}}function He(t){var e=Mo.get(t.name);return e||(e=ze(t),Mo.set(t.name,e)),e}function Ke(t,e,r,n,o){function c(){++a===u.length&&o&&o()}function i(t,o){var i=t._attachments[o],u={binary:e.binary,ctx:n};r._getAttachment(t._id,o,i,u,function(e,r){t._attachments[o]=Pn(v(i,["digest","content_type"]),{data:r}),c()})}var u=Object.keys(t._attachments||{});if(!u.length)return o&&o();var a=0;u.forEach(function(r){e.attachments&&e.include_docs?i(t,r):(t._attachments[r].stub=!0,c())})}function Ve(t,e){function r(){w()&&(window.localStorage["_pouch__websqldb_"+y._name]=!0),e(null,y)}function n(t,e){t.executeSql(Wo),t.executeSql("ALTER TABLE "+Ro+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){t.executeSql(Uo),t.executeSql("ALTER TABLE "+Do+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){t.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+Do+" (local, id)");var r="SELECT "+Do+".winningseq AS seq, "+Do+".json AS metadata FROM "+Ro+" JOIN "+Do+" ON "+Ro+".seq = "+Do+".winningseq";t.executeSql(r,[],function(t,r){for(var n=[],o=[],c=0;c<r.rows.length;c++){var i=r.rows.item(c),u=i.seq,a=JSON.parse(i.metadata);at(a)&&n.push(u),st(a.id)&&o.push(a.id)}t.executeSql("UPDATE "+Do+"SET local = 1 WHERE id IN "+je(o.length),o,function(){t.executeSql("UPDATE "+Ro+" SET deleted = 1 WHERE seq IN "+je(n.length),n,e)})})})})}function o(t,e){var r="CREATE TABLE IF NOT EXISTS "+Lo+" (id UNIQUE, rev, json)";t.executeSql(r,[],function(){var r="SELECT "+Do+".id AS id, "+Ro+".json AS data FROM "+Ro+" JOIN "+Do+" ON "+Ro+".seq = "+Do+".winningseq WHERE local = 1";t.executeSql(r,[],function(t,r){function n(){if(!o.length)return e(t);var r=o.shift(),c=JSON.parse(r.data)._rev;t.executeSql("INSERT INTO "+Lo+" (id, rev, json) VALUES (?,?,?)",[r.id,c,r.data],function(t){t.executeSql("DELETE FROM "+Do+" WHERE id=?",[r.id],function(t){t.executeSql("DELETE FROM "+Ro+" WHERE seq=?",[r.seq],function(){n()})})})}for(var o=[],c=0;c<r.rows.length;c++)o.push(r.rows.item(c));n()})})}function c(t,e){function r(r){function n(){if(!r.length)return e(t);var o=r.shift(),c=Ce(o.hex,m),i=c.lastIndexOf("::"),u=c.substring(0,i),a=c.substring(i+2),s="UPDATE "+Ro+" SET doc_id=?, rev=? WHERE doc_id_rev=?";t.executeSql(s,[u,a,c],function(){n()})}n()}var n="ALTER TABLE "+Ro+" ADD COLUMN doc_id";t.executeSql(n,[],function(t){var e="ALTER TABLE "+Ro+" ADD COLUMN rev";t.executeSql(e,[],function(t){t.executeSql(Jo,[],function(t){var e="SELECT hex(doc_id_rev) as hex FROM "+Ro;t.executeSql(e,[],function(t,e){for(var n=[],o=0;o<e.rows.length;o++)n.push(e.rows.item(o));r(n)})})})})}function i(t,e){function r(t){var r="SELECT COUNT(*) AS cnt FROM "+Io;t.executeSql(r,[],function(t,r){function n(){var r=Me(Vo+", "+Do+".id AS id",[Do,Ro],Ko,null,Do+".id ");r+=" LIMIT "+c+" OFFSET "+o,o+=c,t.executeSql(r,[],function(t,r){if(!r.rows.length)return e(t);for(var o={},c=0;c<r.rows.length;c++)for(var i=r.rows.item(c),u=Be(i.data,i.id,i.rev),a=Object.keys(u._attachments||{}),s=0;s<a.length;s++){var f=u._attachments[a[s]];!function(t,e){var r=o[t]=o[t]||[];-1===r.indexOf(e)&&r.push(e)}(f.digest,i.seq)}var l=[];if(Object.keys(o).forEach(function(t){o[t].forEach(function(e){l.push([t,e])})}),!l.length)return n();var _=0;l.forEach(function(e){var r="INSERT INTO "+jo+" (digest, seq) VALUES (?,?)";t.executeSql(r,e,function(){++_===l.length&&n()})})})}if(!r.rows.item(0).cnt)return e(t);var o=0,c=10;n()})}var n="CREATE TABLE IF NOT EXISTS "+jo+" (digest, seq INTEGER)";t.executeSql(n,[],function(t){t.executeSql(Ho,[],function(t){t.executeSql(zo,[],r)})})}function u(t,e){var r="ALTER TABLE "+Io+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";t.executeSql(r,[],e)}function s(t,e){var r="ALTER TABLE "+Do+" ADD COLUMN max_seq INTEGER";t.executeSql(r,[],function(t){var r="UPDATE "+Do+" SET max_seq=(SELECT MAX(seq) FROM "+Ro+" WHERE doc_id=id)";t.executeSql(r,[],function(t){var r="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+Do+" (max_seq)";t.executeSql(r,[],e)})})}function l(t,e){t.executeSql('SELECT HEX("a") AS hex',[],function(t,r){var n=r.rows.item(0).hex;m=2===n.length?"UTF-8":"UTF-16",e()})}function _(){for(;T.length>0;){T.pop()(null,b)}}function d(t,e){if(0===e){var r="CREATE TABLE IF NOT EXISTS "+Bo+" (dbid, db_version INTEGER)",a="CREATE TABLE IF NOT EXISTS "+Io+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",f="CREATE TABLE IF NOT EXISTS "+jo+" (digest, seq INTEGER)",l="CREATE TABLE IF NOT EXISTS "+Do+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",d="CREATE TABLE IF NOT EXISTS "+Ro+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",p="CREATE TABLE IF NOT EXISTS "+Lo+" (id UNIQUE, rev, json)";t.executeSql(a),t.executeSql(p),t.executeSql(f,[],function(){t.executeSql(zo),t.executeSql(Ho)}),t.executeSql(l,[],function(){t.executeSql(Wo),t.executeSql(d,[],function(){t.executeSql(Uo),t.executeSql(Jo),t.executeSql(r,[],function(){var e="INSERT INTO "+Bo+" (db_version, dbid) VALUES (?,?)";b=W();var r=[Co,b];t.executeSql(e,r,function(){_()})})})})}else{var h=function(){e<Co&&t.executeSql("UPDATE "+Bo+" SET db_version = "+Co);var r="SELECT dbid FROM "+Bo;t.executeSql(r,[],function(t,e){b=e.rows.item(0).dbid,_()})},v=[n,o,c,i,u,s,h],g=e,m=function(t){v[g-1](t,m),g++};m(t)}}function p(t){var e="SELECT sql FROM sqlite_master WHERE tbl_name = "+Bo;t.executeSql(e,[],function(t,e){e.rows.length?/db_version/.test(e.rows.item(0).sql)?t.executeSql("SELECT db_version FROM "+Bo,[],function(t,e){d(t,e.rows.item(0).db_version)}):t.executeSql("ALTER TABLE "+Bo+" ADD COLUMN db_version INTEGER",[],function(){d(t,1)}):d(t,0)})}function h(t,e){var r="SELECT MAX(seq) AS seq FROM "+Ro;t.executeSql(r,[],function(t,r){var n=r.rows.item(0).seq||0;e(n)})}function v(t,e){var r=Me("COUNT("+Do+".id) AS 'num'",[Do,Ro],Ko,Ro+".deleted=0");t.executeSql(r,[],function(t,r){e(r.rows.item(0).num)})}function g(t,e,r,n,o){var c=Me(Vo,[Do,Ro],Ko,Do+".id=?"),i=[e];t.executeSql(c,i,function(t,e){if(!e.rows.length){var c=N(Un,"missing");return o(c)}var i=e.rows.item(0),u=re(i.metadata);n(ft(r,u))})}var m,y=this,b=null,k=Ue(t),T=[];y._name=t.name;var E=Pn({},t,{version:Fo,description:t.name,size:k}),S=He(E);if(S.error)return Fe(e)(S.error);var x=S.db;"function"!=typeof x.readTransaction&&(x.readTransaction=x.transaction),function(){x.transaction(function(t){l(t,function(){p(t)})},Fe(e),r)}(),y.type=function(){return"websql"},y._id=f(function(t){t(null,b)}),y._info=function(t){var e,r;x.readTransaction(function(t){h(t,function(t){e=t}),v(t,function(t){r=t})},Fe(t),function(){t(null,{doc_count:r,update_seq:e,websql_encoding:m})})},y._bulkDocs=function(e,r,n){Je(t,e,r,y,x,Po,n)},y._get=function(t,e,r){function n(t){r(t,{doc:o,metadata:c,ctx:i})}var o,c,i=e.ctx;if(!i)return x.readTransaction(function(n){y._get(t,Pn({ctx:n},e),r)});var u,a;if(e.rev){if(e.latest)return void g(i,t,e.rev,function(n){e.latest=!1,e.rev=n,y._get(t,e,r)},n);u=Me(Vo,[Do,Ro],Do+".id="+Ro+".doc_id",[Ro+".doc_id=?",Ro+".rev=?"]),a=[t,e.rev]}else u=Me(Vo,[Do,Ro],Ko,Do+".id=?"),a=[t];i.executeSql(u,a,function(t,r){if(!r.rows.length){return n(N(Un,"missing"))}var i=r.rows.item(0);if(c=re(i.metadata),i.deleted&&!e.rev){return n(N(Un,"deleted"))}o=Be(i.data,c.id,i.rev),n()})},y._allDocs=function(t,e){var r,n=[],o="startkey"in t&&t.startkey,c="endkey"in t&&t.endkey,i="key"in t&&t.key,u="descending"in t&&t.descending,a="limit"in t?t.limit:-1,s="skip"in t?t.skip:0,f=!1!==t.inclusive_end,l=[],_=[];if(!1!==i)_.push(Do+".id = ?"),l.push(i);else if(!1!==o||!1!==c){if(!1!==o&&(_.push(Do+".id "+(u?"<=":">=")+" ?"),l.push(o)),!1!==c){var d=u?">":"<";f&&(d+="="),_.push(Do+".id "+d+" ?"),l.push(c)}!1!==i&&(_.push(Do+".id = ?"),l.push(i))}"ok"!==t.deleted&&_.push(Ro+".deleted = 0"),x.readTransaction(function(e){if(v(e,function(t){r=t}),0!==a){var o=Me(Vo,[Do,Ro],Ko,_,Do+".id "+(u?"DESC":"ASC"));o+=" LIMIT "+a+" OFFSET "+s,e.executeSql(o,l,function(e,r){for(var o=0,c=r.rows.length;o<c;o++){var i=r.rows.item(o),u=re(i.metadata),a=u.id,s=Be(i.data,a,i.rev),f=s._rev,l={id:a,key:a,value:{rev:f}};if(t.include_docs){if(l.doc=s,l.doc._rev=f,t.conflicts){var _=X(u);_.length&&(l.doc._conflicts=_)}Ke(l.doc,t,y,e)}if(i.deleted){if("ok"!==t.deleted)continue;l.value.deleted=!0,l.doc=null}n.push(l)}})}},Fe(e),function(){e(null,{total_rows:r,offset:t.skip,rows:n})})},y._changes=function(t){if(t=a(t),t.continuous){var e=y._name+":"+W();return Po.addListener(y._name,e,y,t),Po.notify(y._name),{cancel:function(){Po.removeListener(y._name,e)}}}var r=t.descending;t.since=t.since&&!r?t.since:0;var n="limit"in t?t.limit:-1;0===n&&(n=1);var o;o="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var c=[],i=0;!function(){var e=Do+".json AS metadata, "+Do+".max_seq AS maxSeq, "+Ro+".json AS winningDoc, "+Ro+".rev AS winningRev ",u=Do+" JOIN "+Ro,a=Do+".id="+Ro+".doc_id AND "+Do+".winningseq="+Ro+".seq",s=["maxSeq > ?"],f=[t.since];t.doc_ids&&(s.push(Do+".id IN "+je(t.doc_ids.length)),f=f.concat(t.doc_ids));var l="maxSeq "+(r?"DESC":"ASC"),_=Me(e,u,a,s,l),d=D(t);t.view||t.filter||(_+=" LIMIT "+n);var p=t.since||0;x.readTransaction(function(e){e.executeSql(_,f,function(e,r){function u(e){return function(){t.onChange(e)}}for(var a=0,s=r.rows.length;a<s;a++){var f=r.rows.item(a),l=re(f.metadata);p=f.maxSeq;var _=Be(f.winningDoc,l.id,f.winningRev),h=t.processChange(_,l,t);h.seq=f.maxSeq;var v=d(h);if("object"==typeof v)return t.complete(v);if(v&&(i++,o&&c.push(h),t.attachments&&t.include_docs?Ke(_,t,y,e,u(h)):u(h)()),i===n)break}})},Fe(t.complete),function(){t.continuous||t.complete(null,{results:c,last_seq:p})})}()},y._close=function(t){t()},y._getAttachment=function(t,e,r,n,o){var c,i=n.ctx,u=r.digest,a=r.content_type,s="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+Io+" WHERE digest=?";i.executeSql(s,[u],function(t,e){var r=e.rows.item(0),i=r.escaped?Ie(r.body):Ce(r.body,m);c=n.binary?Lt(i,a):po(i),o(null,c)})},y._getRevisionTree=function(t,e){x.readTransaction(function(r){var n="SELECT json AS metadata FROM "+Do+" WHERE id = ?";r.executeSql(n,[t],function(t,r){if(r.rows.length){var n=re(r.rows.item(0).metadata);e(null,n.rev_tree)}else e(N(Un))})})},y._doCompaction=function(t,e,r){if(!e.length)return r();x.transaction(function(r){var n="SELECT json AS metadata FROM "+Do+" WHERE id = ?";r.executeSql(n,[t],function(r,n){var o=re(n.rows.item(0).metadata);H(o.rev_tree,function(t,r,n,o,c){var i=r+"-"+n;-1!==e.indexOf(i)&&(c.status="missing")});var c="UPDATE "+Do+" SET json = ? WHERE id = ?";r.executeSql(c,[ne(o),t])}),Pe(e,t,r)},Fe(r),function(){r()})},y._getLocal=function(t,e){x.readTransaction(function(r){var n="SELECT json, rev FROM "+Lo+" WHERE id=?";r.executeSql(n,[t],function(r,n){if(n.rows.length){var o=n.rows.item(0),c=Be(o.json,t,o.rev);e(null,c)}else e(N(Un))})})},y._putLocal=function(t,e,r){function n(t){var n,s;c?(n="UPDATE "+Lo+" SET rev=?, json=? WHERE id=? AND rev=?",s=[o,a,i,c]):(n="INSERT INTO "+Lo+" (id, rev, json) VALUES (?,?,?)",s=[i,o,a]),t.executeSql(n,s,function(t,n){n.rowsAffected?(u={ok:!0,id:i,rev:o},e.ctx&&r(null,u)):r(N(Jn))},function(){return r(N(Jn)),!1})}"function"==typeof e&&(r=e,e={}),delete t._revisions;var o,c=t._rev,i=t._id;o=t._rev=c?"0-"+(parseInt(c.split("-")[1],10)+1):"0-1";var u,a=Le(t);e.ctx?n(e.ctx):x.transaction(n,Fe(r),function(){u&&r(null,u)})},y._removeLocal=function(t,e,r){function n(n){var c="DELETE FROM "+Lo+" WHERE id=? AND rev=?",i=[t._id,t._rev];n.executeSql(c,i,function(n,c){if(!c.rowsAffected)return r(N(Un));o={ok:!0,id:t._id,rev:"0-0"},e.ctx&&r(null,o)})}"function"==typeof e&&(r=e,e={});var o;e.ctx?n(e.ctx):x.transaction(n,Fe(r),function(){o&&r(null,o)})},y._destroy=function(t,e){Po.removeAllListeners(y._name),x.transaction(function(t){[Do,Ro,Io,Bo,Lo,jo].forEach(function(e){t.executeSql("DROP TABLE IF EXISTS "+e,[])})},Fe(e),function(){w()&&(delete window.localStorage["_pouch__websqldb_"+y._name],delete window.localStorage[y._name]),e(null,{ok:!0})})}}function Xe(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(t){return!1}}function Ge(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var t=w(),e="_pouch__websqldb_valid_"+navigator.userAgent;if(t&&localStorage[e])return"1"===localStorage[e];var r=Xe();return t&&(localStorage[e]=r?"1":"0"),r}function Qe(){return"function"==typeof openDatabase&&Ge()}function $e(t,e,r,n){return openDatabase(t,e,r,n)}function Ye(t,e){var r=Pn({websql:$e},t);Ve.call(this,r,e)}function Ze(){for(var t={},e=new On(function(e,r){t.resolve=e,t.reject=r}),r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.promise=e,On.resolve().then(function(){return fetch.apply(null,r)}).then(function(e){t.resolve(e)}).catch(function(e){t.reject(e)}),t}function tr(t,e){var r,n,o,c=new Headers,i={method:t.method,credentials:"include",headers:c};return t.json&&(c.set("Accept","application/json"),c.set("Content-Type",t.headers["Content-Type"]||"application/json")),t.body&&t.processData&&"string"!=typeof t.body?i.body=JSON.stringify(t.body):i.body="body"in t?t.body:null,Object.keys(t.headers).forEach(function(e){t.headers.hasOwnProperty(e)&&c.set(e,t.headers[e])}),r=Ze(t.url,i),t.timeout>0&&(n=setTimeout(function(){r.reject(new Error("Load timeout for resource: "+t.url))},t.timeout)),r.promise.then(function(e){return o={statusCode:e.status},t.timeout>0&&clearTimeout(n),o.statusCode>=200&&o.statusCode<300?t.binary?e.blob():e.text():e.json()}).then(function(t){o.statusCode>=200&&o.statusCode<300?e(null,o,t):(t.status=o.statusCode,e(t))}).catch(function(t){t||(t=new Error("canceled")),e(t)}),{abort:r.reject}}function er(t,e){var r,n,o=!1,c=function(){r.abort(),a()},i=function(){o=!0,r.abort(),a()},u={abort:c},a=function(){clearTimeout(n),u.abort=function(){},r&&(r.onprogress=void 0,r.upload&&(r.upload.onprogress=void 0),r.onreadystatechange=void 0,r=void 0)};r=t.xhr?new t.xhr:new XMLHttpRequest;try{r.open(t.method,t.url)}catch(t){return e(new Error(t.name||"Url is invalid"))}r.withCredentials=!("withCredentials"in t)||t.withCredentials,"GET"===t.method?delete t.headers["Content-Type"]:t.json&&(t.headers.Accept="application/json",t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.body&&t.processData&&"string"!=typeof t.body&&(t.body=JSON.stringify(t.body))),t.binary&&(r.responseType="arraybuffer"),"body"in t||(t.body=null);for(var s in t.headers)t.headers.hasOwnProperty(s)&&r.setRequestHeader(s,t.headers[s]);return t.timeout>0&&(n=setTimeout(i,t.timeout),r.onprogress=function(){clearTimeout(n),4!==r.readyState&&(n=setTimeout(i,t.timeout))},void 0!==r.upload&&(r.upload.onprogress=r.onprogress)),r.onreadystatechange=function(){if(4===r.readyState){var n={statusCode:r.status};if(r.status>=200&&r.status<300){var c;c=t.binary?Rt([r.response||""],{type:r.getResponseHeader("Content-Type")}):r.responseText,e(null,n,c)}else{var i={};if(o)i=new Error("ETIMEDOUT"),i.code="ETIMEDOUT";else if("string"==typeof r.response)try{i=JSON.parse(r.response)}catch(t){}i.status=r.status,e(i)}a()}},t.body&&t.body instanceof Blob?Ut(t.body,function(t){r.send(t)}):r.send(t.body),u}function rr(t,e){return Go||t.xhr?er(t,e):tr(t,e)}function nr(){return""}function or(t,e){function r(e,r,n){if(!t.binary&&t.json&&"string"==typeof e)try{e=JSON.parse(e)}catch(t){return n(t)}Array.isArray(e)&&(e=e.map(function(t){return t.error||t.missing?O(t):t})),t.binary&&Qo(e,r),n(null,e,r)}return t=a(t),t=Pn({method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1},t),t.json&&(t.binary||(t.headers.Accept="application/json"),t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json"),t.binary&&(t.encoding=null,t.json=!1),t.processData||(t.json=!1),rr(t,function(n,o,c){if(n)return e(O(n));var i,u=o.headers&&o.headers["content-type"],a=c||nr();if(!t.binary&&(t.json||!t.processData)&&"object"!=typeof a&&(/json/.test(u)||/^[\s]*\{/.test(a)&&/\}[\s]*$/.test(a)))try{a=JSON.parse(a.toString())}catch(t){}o.statusCode>=200&&o.statusCode<300?r(a,o,e):(i=O(a),i.status=o.statusCode,e(i))})}function cr(t,e){var r=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=-1!==r.indexOf("safari")&&-1===r.indexOf("chrome"),o=-1!==r.indexOf("msie"),c=-1!==r.indexOf("edge"),i=n||(o||c)&&"GET"===t.method,u=!("cache"in t)||t.cache;if(!/^blob:/.test(t.url)&&(i||!u)){var a=-1!==t.url.indexOf("?");t.url+=(a?"&":"?")+"_nonce="+Date.now()}return or(t,e)}function ir(t,e){return new On(function(r,n){function o(){f++,t[l++]().then(i,u)}function c(){++_===d?s?n(s):r():a()}function i(){f--,c()}function u(t){f--,s=s||t,c()}function a(){for(;f<e&&l<d;)o()}var s,f=0,l=0,_=0,d=t.length;a()})}function ur(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach(function(t){var r=e[t];r.data=Bt(r.data,r.content_type)})}function ar(t){return/^_design/.test(t)?"_design/"+encodeURIComponent(t.slice(8)):/^_local/.test(t)?"_local/"+encodeURIComponent(t.slice(7)):encodeURIComponent(t)}function sr(t){return t._attachments&&Object.keys(t._attachments)?On.all(Object.keys(t._attachments).map(function(e){var r=t._attachments[e];if(r.data&&"string"!=typeof r.data)return new On(function(t){Ft(r.data,t)}).then(function(t){r.data=t})})):On.resolve()}function fr(t){if(!t.prefix)return!1;var e=P(t.prefix).protocol;return"http"===e||"https"===e}function lr(t,e){if(fr(e)){var r=e.name.substr(e.prefix.length);t=e.prefix+encodeURIComponent(r)}var n=P(t);(n.user||n.password)&&(n.auth={username:n.user,password:n.password});var o=n.path.replace(/(^\/|\/$)/g,"").split("/");return n.db=o.pop(),-1===n.db.indexOf("%")&&(n.db=encodeURIComponent(n.db)),n.path=o.join("/"),n}function _r(t,e){return dr(t,t.db+"/"+e)}function dr(t,e){var r=t.path?"/":"";return t.protocol+"://"+t.host+(t.port?":"+t.port:"")+"/"+t.path+r+e}function pr(t){return"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function hr(t,e){function r(t,e,r){var n=t.ajax||{},o=Pn(a(_),n,e),c=a(_.headers||{});return o.headers=Pn(c,n.headers,e.headers||{}),tc(o.method+" "+o.url),u._ajax(o,r)}function n(t,e){return new On(function(n,o){r(t,e,function(t,e){if(t)return o(t);n(e)})})}function o(t,e){return l(t,kn(function(t){c().then(function(){return e.apply(this,t)}).catch(function(e){t.pop()(e)})}))}function c(){return t.skipSetup||t.skip_setup?On.resolve():g||(g=n({},{method:"GET",url:f}).catch(function(t){return t&&t.status&&404===t.status?(A(404,"PouchDB is just detecting if the remote exists."),n({},{method:"PUT",url:f})):On.reject(t)}).catch(function(t){return!(!t||!t.status||412!==t.status)||On.reject(t)}),g.catch(function(){g=null}),g)}function i(t){return t.split("/").map(encodeURIComponent).join("/")}var u=this,s=lr(t.name,t),f=_r(s,"");t=a(t);var _=t.ajax||{};if(t.auth||s.auth){var d=t.auth||s.auth,p=d.username+":"+d.password,h=po(unescape(encodeURIComponent(p)));_.headers=_.headers||{},_.headers.Authorization="Basic "+h}u._ajax=cr;var g;xn(function(){e(null,u)}),u.type=function(){return"http"},u.id=o("id",function(t){r({},{method:"GET",url:dr(s,"")},function(e,r){var n=r&&r.uuid?r.uuid+s.db:_r(s,"");t(null,n)})}),u.request=o("request",function(t,e){t.url=_r(s,t.url),r({},t,e)}),u.compact=o("compact",function(t,e){"function"==typeof t&&(e=t,t={}),t=a(t),r(t,{url:_r(s,"_compact"),method:"POST"},function(){function r(){u.info(function(n,o){o&&!o.compact_running?e(null,{ok:!0}):setTimeout(r,t.interval||200)})}r()})}),u.bulkGet=l("bulkGet",function(t,e){function n(e){var n={};t.revs&&(n.revs=!0),t.attachments&&(n.attachments=!0),t.latest&&(n.latest=!0),r(t,{url:_r(s,"_bulk_get"+pr(n)),method:"POST",body:{docs:t.docs}},e)}function o(){for(var r=Yo,n=Math.ceil(t.docs.length/r),o=0,i=new Array(n),u=0;u<n;u++){var a=v(t,["revs","attachments","latest"]);a.ajax=_,a.docs=t.docs.slice(u*r,Math.min(t.docs.length,(u+1)*r)),y(c,a,function(t){return function(r,c){i[t]=c.results,++o===n&&e(null,{results:R(i)})}}(u))}}var c=this,i=dr(s,""),u=Zo[i];"boolean"!=typeof u?n(function(t,r){t?(Zo[i]=!1,A(t.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),o()):(Zo[i]=!0,e(null,r))}):u?n(e):o()}),u._info=function(t){c().then(function(){r({},{method:"GET",url:_r(s,"")},function(e,r){if(e)return t(e);r.host=_r(s,""),t(null,r)})}).catch(t)},u.get=o("get",function(t,e,r){function o(t){function r(r){var c=o[r],u=ar(t._id)+"/"+i(r)+"?rev="+t._rev;return n(e,{method:"GET",url:_r(s,u),binary:!0}).then(function(t){return e.binary?t:new On(function(e){Ft(t,e)})}).then(function(t){delete c.stub,delete c.length,c.data=t})}var o=t._attachments,c=o&&Object.keys(o);if(o&&c.length){return ir(c.map(function(t){return function(){return r(t)}}),5)}}function c(t){return Array.isArray(t)?On.all(t.map(function(t){if(t.ok)return o(t.ok)})):o(t)}"function"==typeof e&&(r=e,e={}),e=a(e);var u={};e.revs&&(u.revs=!0),e.revs_info&&(u.revs_info=!0),e.latest&&(u.latest=!0),e.open_revs&&("all"!==e.open_revs&&(e.open_revs=JSON.stringify(e.open_revs)),u.open_revs=e.open_revs),e.rev&&(u.rev=e.rev),e.conflicts&&(u.conflicts=e.conflicts),t=ar(t);var f={method:"GET",url:_r(s,t+pr(u))};n(e,f).then(function(t){return On.resolve().then(function(){if(e.attachments)return c(t)}).then(function(){r(null,t)})}).catch(r)}),u.remove=o("remove",function(t,e,n,o){var c;"string"==typeof e?(c={_id:t,_rev:e},"function"==typeof n&&(o=n,n={})):(c=t,"function"==typeof e?(o=e,n={}):(o=n,n=e));var i=c._rev||n.rev;r(n,{method:"DELETE",url:_r(s,ar(c._id))+"?rev="+i},o)}),u.getAttachment=o("getAttachment",function(t,e,n,o){"function"==typeof n&&(o=n,n={});var c=n.rev?"?rev="+n.rev:"";r(n,{method:"GET",url:_r(s,ar(t))+"/"+i(e)+c,binary:!0},o)}),u.removeAttachment=o("removeAttachment",function(t,e,n,o){r({},{method:"DELETE",url:_r(s,ar(t)+"/"+i(e))+"?rev="+n},o)}),u.putAttachment=o("putAttachment",function(t,e,n,o,c,u){"function"==typeof c&&(u=c,c=o,o=n,n=null);var a=ar(t)+"/"+i(e),f=_r(s,a);if(n&&(f+="?rev="+n),"string"==typeof o){var l;try{l=_o(o)}catch(t){return u(N(Vn,"Attachment is not a valid base64 string"))}o=l?Lt(l,c):""}r({},{headers:{"Content-Type":c},method:"PUT",url:f,processData:!1,body:o,timeout:_.timeout||6e4},u)}),u._bulkDocs=function(t,e,n){t.new_edits=e.new_edits,c().then(function(){return On.all(t.docs.map(sr))}).then(function(){r(e,{method:"POST",url:_r(s,"_bulk_docs"),timeout:e.timeout,body:t},function(t,e){if(t)return n(t);e.forEach(function(t){t.ok=!0}),n(null,e)})}).catch(n)},u._put=function(t,e,n){c().then(function(){return sr(t)}).then(function(){r(e,{method:"PUT",url:_r(s,ar(t._id)),body:t},function(t,e){if(t)return n(t);n(null,e)})}).catch(n)},u.allDocs=o("allDocs",function(t,e){"function"==typeof t&&(e=t,t={}),t=a(t);var r,o={},c="GET";t.conflicts&&(o.conflicts=!0),t.descending&&(o.descending=!0),t.include_docs&&(o.include_docs=!0),t.attachments&&(o.attachments=!0),t.key&&(o.key=JSON.stringify(t.key)),t.start_key&&(t.startkey=t.start_key),t.startkey&&(o.startkey=JSON.stringify(t.startkey)),t.end_key&&(t.endkey=t.end_key),t.endkey&&(o.endkey=JSON.stringify(t.endkey)),void 0!==t.inclusive_end&&(o.inclusive_end=!!t.inclusive_end),void 0!==t.limit&&(o.limit=t.limit),void 0!==t.skip&&(o.skip=t.skip);var i=pr(o);void 0!==t.keys&&(c="POST",r={keys:t.keys}),n(t,{method:c,url:_r(s,"_all_docs"+i),body:r}).then(function(r){t.include_docs&&t.attachments&&t.binary&&r.rows.forEach(ur),e(null,r)}).catch(e)}),u._changes=function(t){var e="batch_size"in t?t.batch_size:$o;t=a(t),t.timeout="timeout"in t?t.timeout:"timeout"in _?_.timeout:3e4;var n,o=t.timeout?{timeout:t.timeout-5e3}:{},i=void 0!==t.limit&&t.limit;n="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var u=i;if(t.style&&(o.style=t.style),(t.include_docs||t.filter&&"function"==typeof t.filter)&&(o.include_docs=!0),t.attachments&&(o.attachments=!0),t.continuous&&(o.feed="longpoll"),t.conflicts&&(o.conflicts=!0),t.descending&&(o.descending=!0),"heartbeat"in t?t.heartbeat&&(o.heartbeat=t.heartbeat):t.continuous&&(o.heartbeat=1e4),t.filter&&"string"==typeof t.filter&&(o.filter=t.filter),t.view&&"string"==typeof t.view&&(o.filter="_view",o.view=t.view),t.query_params&&"object"==typeof t.query_params)for(var f in t.query_params)t.query_params.hasOwnProperty(f)&&(o[f]=t.query_params[f]);var l,d="GET";t.doc_ids&&(o.filter="_doc_ids",d="POST",l={doc_ids:t.doc_ids});var p,h,v=function(n,a){if(!t.aborted){o.since=n,"object"==typeof o.since&&(o.since=JSON.stringify(o.since)),t.descending?i&&(o.limit=u):o.limit=!i||u>e?e:u;var f={method:d,url:_r(s,"_changes"+pr(o)),timeout:t.timeout,body:l};h=n,t.aborted||c().then(function(){p=r(t,f,a)}).catch(a)}},g={results:[]},m=function(r,o){if(!t.aborted){var c=0;if(o&&o.results){c=o.results.length,g.last_seq=o.last_seq;({}).query=t.query_params,o.results=o.results.filter(function(e){u--;var r=D(t)(e);return r&&(t.include_docs&&t.attachments&&t.binary&&ur(e),n&&g.results.push(e),t.onChange(e)),r})}else if(r)return t.aborted=!0,void t.complete(r);o&&o.last_seq&&(h=o.last_seq);var a=i&&u<=0||o&&c<e||t.descending;(!t.continuous||i&&u<=0)&&a?t.complete(null,g):xn(function(){v(h,m)})}};return v(t.since||0,m),{cancel:function(){t.aborted=!0,p&&p.abort()}}},u.revsDiff=o("revsDiff",function(t,e,n){"function"==typeof e&&(n=e,e={}),r(e,{method:"POST",url:_r(s,"_revs_diff"),body:t},n)}),u._close=function(t){t()},u._destroy=function(t,e){r(t,{url:_r(s,""),method:"DELETE"},function(t,r){if(t&&t.status&&404!==t.status)return e(t);e(null,r)})}}function vr(t){this.status=400,this.name="query_parse_error",this.message=t,this.error=!0;try{Error.captureStackTrace(this,vr)}catch(t){}}function gr(t){this.status=404,this.name="not_found",this.message=t,this.error=!0;try{Error.captureStackTrace(this,gr)}catch(t){}}function mr(t){this.status=500,this.name="invalid_value",this.message=t,this.error=!0;try{Error.captureStackTrace(this,mr)}catch(t){}}function yr(t,e){return e&&t.then(function(t){xn(function(){e(null,t)})},function(t){xn(function(){e(t)})}),t}function br(t){return kn(function(e){var r=e.pop(),n=t.apply(this,e);return"function"==typeof r&&yr(n,r),n})}function wr(t,e){return t.then(function(t){return e().then(function(){return t})},function(t){return e().then(function(){throw t})})}function kr(t,e){return function(){var r=arguments,n=this;return t.add(function(){return e.apply(n,r)})}}function Tr(t){var e=new In(t),r=new Array(e.size),n=-1;return e.forEach(function(t){r[++n]=t}),r}function Er(t){var e=new Array(t.size),r=-1;return t.forEach(function(t,n){e[++r]=n}),e}function Sr(t){return new mr("builtin "+t+" function requires map values to be numbers or number arrays")}function xr(t){for(var e=0,r=0,n=t.length;r<n;r++){var o=t[r];if("number"!=typeof o){if(!Array.isArray(o))throw Sr("_sum");e="number"==typeof e?[e]:e;for(var c=0,i=o.length;c<i;c++){var u=o[c];if("number"!=typeof u)throw Sr("_sum");void 0===e[c]?e.push(u):e[c]+=u}}else"number"==typeof e?e+=o:e[0]+=o}return e}function Ar(t,e){return An("return ("+t.replace(/;\s*$/,"")+");",{emit:e,sum:xr,log:rc,isArray:nc,toJSON:oc})}function qr(t,e,r){for(var n="",o=r-t.length;n.length<o;)n+=e;return n}function Nr(t,e,r){return qr(t,e,r)+t}function Or(t,e){if(t===e)return 0;t=Cr(t),e=Cr(e);var r=Fr(t),n=Fr(e);if(r-n!=0)return r-n;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return Mr(t,e)}return Array.isArray(t)?jr(t,e):Pr(t,e)}function Cr(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-1/0||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var r=t.length;t=new Array(r);for(var n=0;n<r;n++)t[n]=Cr(e[n])}else{if(t instanceof Date)return t.toJSON();if(null!==t){t={};for(var o in e)if(e.hasOwnProperty(o)){var c=e[o];void 0!==c&&(t[o]=Cr(c))}}}}return t}function Dr(t){if(null!==t)switch(typeof t){case"boolean":return t?1:0;case"number":return Ur(t);case"string":return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(t),r=e?t:Object.keys(t),n=-1,o=r.length,c="";if(e)for(;++n<o;)c+=Rr(r[n]);else for(;++n<o;){var i=r[n];c+=Rr(i)+Rr(t[i])}return c}return""}function Rr(t){return t=Cr(t),Fr(t)+uc+Dr(t)+"\0"}function Ir(t,e){var r,n=e;if("1"===t[e])r=0,e++;else{var o="0"===t[e];e++;var c="",i=t.substring(e,e+ic),u=parseInt(i,10)+cc;for(o&&(u=-u),e+=ic;;){var a=t[e];if("\0"===a)break;c+=a,e++}c=c.split("."),r=1===c.length?parseInt(c,10):parseFloat(c[0]+"."+c[1]),o&&(r-=10),0!==u&&(r=parseFloat(r+"e"+u))}return{num:r,length:e-n}}function Lr(t,e){var r=t.pop();if(e.length){var n=e[e.length-1];r===n.element&&(e.pop(),n=e[e.length-1]);var o=n.element,c=n.index;if(Array.isArray(o))o.push(r);else if(c===t.length-2){var i=t.pop();o[i]=r}else t.push(r)}}function Br(t){for(var e=[],r=[],n=0;;){var o=t[n++];if("\0"!==o)switch(o){case"1":e.push(null);break;case"2":e.push("1"===t[n]),n++;break;case"3":var c=Ir(t,n);e.push(c.num),n+=c.length;break;case"4":for(var i="";;){var u=t[n];if("\0"===u)break;i+=u,n++}i=i.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),e.push(i);break;case"5":var a={element:[],index:e.length};e.push(a.element),r.push(a);break;case"6":var s={element:{},index:e.length};e.push(s.element),r.push(s);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+o)}else{if(1===e.length)return e.pop();Lr(e,r)}}}function jr(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++){var o=Or(t[n],e[n]);if(0!==o)return o}return t.length===e.length?0:t.length>e.length?1:-1}function Mr(t,e){return t===e?0:t>e?1:-1}function Pr(t,e){for(var r=Object.keys(t),n=Object.keys(e),o=Math.min(r.length,n.length),c=0;c<o;c++){var i=Or(r[c],n[c]);if(0!==i)return i;if(0!==(i=Or(t[r[c]],e[n[c]])))return i}return r.length===n.length?0:r.length>n.length?1:-1}function Fr(t){var e=["boolean","number","string","object"],r=e.indexOf(typeof t);return~r?null===t?1:Array.isArray(t)?5:r<3?r+2:r+3:Array.isArray(t)?5:void 0}function Ur(t){if(0===t)return"1";var e=t.toExponential().split(/e\+?/),r=parseInt(e[1],10),n=t<0,o=n?"0":"2",c=(n?-r:r)-cc,i=Nr(c.toString(),"0",ic);o+=uc+i;var u=Math.abs(parseFloat(e[0]));n&&(u=10-u);var a=u.toFixed(20);return a=a.replace(/\.?0+$/,""),o+=uc+a}function Jr(){this.promise=new On(function(t){t()})}function Wr(t,e,r,n,o,c){var i,u=r.toString()+(n&&n.toString())+"undefined";if(!o&&(i=t._cachedViews=t._cachedViews||{},i[u]))return i[u];var a=t.info().then(function(a){function s(t){t.views=t.views||{};var r=e;-1===r.indexOf("/")&&(r=e+"/"+e);var n=t.views[r]=t.views[r]||{};if(!n[f])return n[f]=!0,t}var f=a.db_name+"-mrview-"+(o?"temp":Vt(u));return F(t,"_local/"+c,s).then(function(){return t.registerDependentDatabase(f).then(function(e){var o=e.db;o.auto_compaction=!0;var c={name:f,db:o,sourceDB:t,adapter:t.adapter,mapFun:r,reduceFun:n};return c.db.get("_local/lastSeq").catch(function(t){if(404!==t.status)throw t}).then(function(t){return c.seq=t?t.seq:0,i&&c.db.once("destroyed",function(){delete i[u]}),c})})})});return i&&(i[u]=a),a}function zr(t){return-1===t.indexOf("/")?[t,t]:t.split("/")}function Hr(t){return 1===t.length&&/^1-/.test(t[0].rev)}function Kr(t,e){try{t.emit("error",e)}catch(t){E("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),E("error",e)}}function Vr(t,e){if("function"==typeof t&&2===t.length){var r=t;return function(t){return r(t,e)}}return Ar(t.toString(),e)}function Xr(t){return lc[t]?lc[t]:Ar(t.toString())}function Gr(t,e){var r=t.views&&t.views[e];if("string"!=typeof r.map)throw new gr("ddoc "+t._id+" has no string view named "+e+", instead found object of type: "+typeof r.map)}function Qr(t,e,r){return _c.query.call(this,t,e,r)}function $r(t){return _c.viewCleanup.call(this,t)}function Yr(t){return/^1-/.test(t)}function Zr(t,e,r){return!t._attachments||!t._attachments[r]||t._attachments[r].digest!==e._attachments[r].digest}function tn(t,e){var r=Object.keys(e._attachments);return On.all(r.map(function(r){return t.getAttachment(e._id,r,{rev:e._rev})}))}function en(t,e,r){var n="http"===e.type()&&"http"!==t.type(),o=Object.keys(r._attachments);return n?t.get(r._id).then(function(n){return On.all(o.map(function(o){return Zr(n,r,o)?e.getAttachment(r._id,o):t.getAttachment(n._id,o)}))}).catch(function(t){if(404!==t.status)throw t;return tn(e,r)}):tn(e,r)}function rn(t){var e=[];return Object.keys(t).forEach(function(r){t[r].missing.forEach(function(t){e.push({id:r,rev:t})})}),{docs:e,revs:!0,latest:!0}}function nn(t,e,r,n){function o(){var o=rn(r);if(o.docs.length)return t.bulkGet(o).then(function(r){if(n.cancelled)throw new Error("cancelled");return On.all(r.results.map(function(r){return On.all(r.docs.map(function(r){var n=r.ok;return r.error&&(_=!1),n&&n._attachments?en(e,t,n).then(function(t){var e=Object.keys(n._attachments);return t.forEach(function(t,r){var o=n._attachments[e[r]];delete o.stub,delete o.length,o.data=t}),n}):n}))})).then(function(t){l=l.concat(R(t).filter(Boolean))})})}function c(t){return t._attachments&&Object.keys(t._attachments).length>0}function i(t){return t._conflicts&&t._conflicts.length>0}function u(e){return t.allDocs({keys:e,include_docs:!0,conflicts:!0}).then(function(t){if(n.cancelled)throw new Error("cancelled");t.rows.forEach(function(t){t.deleted||!t.doc||!Yr(t.value.rev)||c(t.doc)||i(t.doc)||(t.doc._conflicts&&delete t.doc._conflicts,l.push(t.doc),delete r[t.id])})})}function s(){var t=Object.keys(r).filter(function(t){var e=r[t].missing;return 1===e.length&&Yr(e[0])});if(t.length>0)return u(t)}function f(){return{ok:_,docs:l}}r=a(r);var l=[],_=!0;return On.resolve().then(s).then(o).then(f)}function on(t,e,r,n,o){return t.get(e).catch(function(r){if(404===r.status)return"http"===t.type()&&A(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:n,_id:e,history:[],replicator:hc,version:pc};throw r}).then(function(c){if(!o.cancelled&&c.last_seq!==r)return c.history=(c.history||[]).filter(function(t){return t.session_id!==n}),c.history.unshift({last_seq:r,session_id:n}),c.history=c.history.slice(0,vc),c.version=pc,c.replicator=hc,c.session_id=n,c.last_seq=r,t.put(c).catch(function(c){if(409===c.status)return on(t,e,r,n,o);throw c})})}function cn(t,e,r,n){this.src=t,this.target=e,this.id=r,this.returnValue=n}function un(t,e){return t.session_id===e.session_id?{last_seq:t.last_seq,history:t.history}:an(t.history,e.history)}function an(t,e){var r=t[0],n=t.slice(1),o=e[0],c=e.slice(1);return r&&0!==e.length?sn(r.session_id,e)?{last_seq:r.last_seq,history:t}:sn(o.session_id,n)?{last_seq:o.last_seq,history:c}:an(n,c):{last_seq:gc,history:[]}}function sn(t,e){var r=e[0],n=e.slice(1);return!(!t||0===e.length)&&(t===r.session_id||sn(t,n))}function fn(t){return"number"==typeof t.status&&4===Math.floor(t.status/100)}function ln(t,e,r,n){if(!1===t.retry)return e.emit("error",r),void e.removeAllListeners();if("function"!=typeof t.back_off_function&&(t.back_off_function=x),e.emit("requestError",r),"active"===e.state||"pending"===e.state){e.emit("paused",r),e.state="stopped";var o=function(){t.current_back_off=yc},c=function(){e.removeListener("active",o)};e.once("paused",c),e.once("active",o)}t.current_back_off=t.current_back_off||yc,t.current_back_off=t.back_off_function(t.current_back_off),setTimeout(n,t.current_back_off)}function _n(t){return Object.keys(t).sort(Or).reduce(function(e,r){return e[r]=t[r],e},{})}function dn(t,e,r){var n=r.doc_ids?r.doc_ids.sort(Or):"",o=r.filter?r.filter.toString():"",c="",i="";return r.filter&&r.query_params&&(c=JSON.stringify(_n(r.query_params))),r.filter&&"_view"===r.filter&&(i=r.view.toString()),On.all([t.id(),e.id()]).then(function(t){var e=t[0]+t[1]+o+i+c+n;return new On(function(t){Kt(e,t)})}).then(function(t){return"_local/"+(t=t.replace(/\//g,".").replace(/\+/g,"_"))})}function pn(t,e,r,n,o){function c(){return T?On.resolve():dn(t,e,r).then(function(r){k=r,T=new cn(t,e,k,n)})}function i(){if(B=[],0!==w.docs.length){var t=w.docs,c={timeout:r.timeout};return e.bulkDocs({docs:t,new_edits:!1},c).then(function(e){if(n.cancelled)throw p(),new Error("cancelled");var r=Object.create(null);e.forEach(function(t){t.error&&(r[t.id]=t)});var c=Object.keys(r).length;o.doc_write_failures+=c,o.docs_written+=t.length-c,t.forEach(function(t){var e=r[t._id];if(e){if(o.errors.push(e),"unauthorized"!==e.name&&"forbidden"!==e.name)throw e;n.emit("denied",a(e))}else B.push(t)})},function(e){throw o.doc_write_failures+=t.length,e})}}function u(){if(w.error)throw new Error("There was a problem getting docs.");o.last_seq=N=w.seq;var t=a(o);return B.length&&(t.docs=B,n.emit("change",t)),x=!0,T.writeCheckpoint(w.seq,j).then(function(){if(x=!1,n.cancelled)throw p(),new Error("cancelled");w=void 0,m()}).catch(function(t){throw b(t),t})}function s(){var t={};return w.changes.forEach(function(e){"_user/"!==e.id&&(t[e.id]=e.changes.map(function(t){return t.rev}))}),e.revsDiff(t).then(function(t){if(n.cancelled)throw p(),new Error("cancelled");w.diffs=t})}function f(){return nn(t,e,w.diffs,n).then(function(t){w.error=!t.ok,t.docs.forEach(function(t){delete w.diffs[t._id],o.docs_read++,w.docs.push(t)})})}function l(){if(!n.cancelled&&!w){if(0===E.length)return void _(!0);w=E.shift(),s().then(f).then(i).then(u).then(l).catch(function(t){d("batch processing terminated with error",t)})}}function _(t){if(0===S.changes.length)return void(0!==E.length||w||((O&&M.live||A)&&(n.state="pending",n.emit("paused")),A&&p()));(t||A||S.changes.length>=C)&&(E.push(S),S={seq:0,changes:[],docs:[]},"pending"!==n.state&&"stopped"!==n.state||(n.state="active",n.emit("active")),l())}function d(t,e){q||(e.message||(e.message=t),o.ok=!1,o.status="aborting",E=[],S={seq:0,changes:[],docs:[]},p(e))}function p(c){q||n.cancelled&&(o.status="cancelled",x)||(o.status=o.status||"complete",o.end_time=new Date,o.last_seq=N,q=!0,c?(c.result=o,"unauthorized"===c.name||"forbidden"===c.name?(n.emit("error",c),n.removeAllListeners()):ln(r,n,c,function(){pn(t,e,r,n)})):(n.emit("complete",o),n.removeAllListeners()))}function h(t){if(n.cancelled)return p();D(r)(t)&&(S.seq=t.seq,S.changes.push(t),_(0===E.length&&M.live))}function v(t){if(I=!1,n.cancelled)return p();if(t.results.length>0)M.since=t.last_seq,m(),_(!0);else{var e=function(){O?(M.live=!0,m()):A=!0,_(!0)};w||0!==t.results.length?e():(x=!0,T.writeCheckpoint(t.last_seq,j).then(function(){x=!1,o.last_seq=N=t.last_seq,e()}).catch(b))}}function g(t){if(I=!1,n.cancelled)return p();d("changes rejected",t)}function m(){function e(){c.cancel()}function o(){n.removeListener("cancel",e)}if(!I&&!A&&E.length<R){I=!0,n._changes&&(n.removeListener("cancel",n._abortChanges),n._changes.cancel()),n.once("cancel",e);var c=t.changes(M).on("change",h);c.then(o,o),c.then(v).catch(g),r.retry&&(n._changes=c,n._abortChanges=e)}}function y(){c().then(function(){return n.cancelled?void p():T.getCheckpoint().then(function(t){N=t,M={since:N,limit:C,batch_size:C,style:"all_docs",doc_ids:L,return_docs:!0},r.filter&&("string"!=typeof r.filter?M.include_docs=!0:M.filter=r.filter),"heartbeat"in r&&(M.heartbeat=r.heartbeat),"timeout"in r&&(M.timeout=r.timeout),r.query_params&&(M.query_params=r.query_params),r.view&&(M.view=r.view),m()})}).catch(function(t){d("getCheckpoint rejected with ",t)})}function b(t){x=!1,d("writeCheckpoint completed with error",t)}var w,k,T,E=[],S={seq:0,changes:[],docs:[]},x=!1,A=!1,q=!1,N=0,O=r.continuous||r.live||!1,C=r.batch_size||100,R=r.batches_limit||10,I=!1,L=r.doc_ids,B=[],j=W();o=o||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var M={};if(n.ready(t,e),n.cancelled)return void p();n._addedListeners||(n.once("cancel",p),"function"==typeof r.complete&&(n.once("error",r.complete),n.once("complete",function(t){r.complete(null,t)})),n._addedListeners=!0),void 0===r.since?y():c().then(function(){return x=!0,T.writeCheckpoint(r.since,j)}).then(function(){if(x=!1,n.cancelled)return void p();N=r.since,y()}).catch(b)}function hn(){En.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var t=this,e=new On(function(e,r){t.once("complete",e),t.once("error",r)});t.then=function(t,r){return e.then(t,r)},t.catch=function(t){return e.catch(t)},t.catch(function(){})}function vn(t,e){var r=e.PouchConstructor;return"string"==typeof t?new r(t,e):t}function gn(t,e,r,n){if("function"==typeof r&&(n=r,r={}),void 0===r&&(r={}),r.doc_ids&&!Array.isArray(r.doc_ids))throw N(Qn,"`doc_ids` filter parameter is not a list.");r.complete=n,r=a(r),r.continuous=r.continuous||r.live,r.retry="retry"in r&&r.retry,r.PouchConstructor=r.PouchConstructor||this;var o=new hn(r);return pn(vn(t,r),vn(e,r),r,o),o}function mn(t,e,r,n){return"function"==typeof r&&(n=r,r={}),void 0===r&&(r={}),r=a(r),r.PouchConstructor=r.PouchConstructor||this,t=vn(t,r),e=vn(e,r),new yn(t,e,r,n)}function yn(t,e,r,n){function o(t){p.emit("change",{direction:"pull",change:t})}function c(t){p.emit("change",{direction:"push",change:t})}function i(t){p.emit("denied",{direction:"push",doc:t})}function u(t){p.emit("denied",{direction:"pull",doc:t})}function a(){p.pushPaused=!0,p.pullPaused&&p.emit("paused")}function s(){p.pullPaused=!0,p.pushPaused&&p.emit("paused")}function f(){p.pushPaused=!1,p.pullPaused&&p.emit("active",{direction:"push"})}function l(){p.pullPaused=!1,p.pushPaused&&p.emit("active",{direction:"pull"})}function _(t){return function(e,r){var n="change"===e&&(r===o||r===c),_="denied"===e&&(r===u||r===i),d="paused"===e&&(r===s||r===a),h="active"===e&&(r===l||r===f);(n||_||d||h)&&(e in g||(g[e]={}),g[e][t]=!0,2===Object.keys(g[e]).length&&p.removeAllListeners(e))}}function d(t,e,r){-1==t.listeners(e).indexOf(r)&&t.on(e,r)}var p=this;this.canceled=!1;var h=r.push?Pn({},r,r.push):r,v=r.pull?Pn({},r,r.pull):r;this.push=gn(t,e,h),this.pull=gn(e,t,v),this.pushPaused=!0,this.pullPaused=!0;var g={};r.live&&(this.push.on("complete",p.pull.cancel.bind(p.pull)),this.pull.on("complete",p.push.cancel.bind(p.push))),this.on("newListener",function(t){"change"===t?(d(p.pull,"change",o),d(p.push,"change",c)):"denied"===t?(d(p.pull,"denied",u),d(p.push,"denied",i)):"active"===t?(d(p.pull,"active",l),d(p.push,"active",f)):"paused"===t&&(d(p.pull,"paused",s),d(p.push,"paused",a))}),this.on("removeListener",function(t){"change"===t?(p.pull.removeListener("change",o),p.push.removeListener("change",c)):"denied"===t?(p.pull.removeListener("denied",u),p.push.removeListener("denied",i)):"active"===t?(p.pull.removeListener("active",l),p.push.removeListener("active",f)):"paused"===t&&(p.pull.removeListener("paused",s),p.push.removeListener("paused",a))}),this.pull.on("removeListener",_("pull")),this.push.on("removeListener",_("push"));var m=On.all([this.push,this.pull]).then(function(t){var e={push:t[0],pull:t[1]};return p.emit("complete",e),n&&n(null,e),p.removeAllListeners(),e},function(t){if(p.cancel(),n?n(t):p.emit("error",t),p.removeAllListeners(),n)throw t});this.then=function(t,e){return m.then(t,e)},this.catch=function(t){return m.catch(t)}}function bn(t){t.replicate=gn,t.sync=mn,Object.defineProperty(t.prototype,"replicate",{get:function(){var t=this;return{from:function(e,r,n){return t.constructor.replicate(e,t,r,n)},to:function(e,r,n){return t.constructor.replicate(t,e,r,n)}}}}),t.prototype.sync=function(t,e,r){return this.constructor.sync(this,t,e,r)}}var wn=n(r(7)),kn=n(r(4)),Tn=n(r(9)),En=r(5),Sn=n(r(6)),xn=n(r(1)),An=n(r(13)),qn=n(r(14)),Nn=n(r(15)),On="function"==typeof Promise?Promise:wn,Cn=Function.prototype.toString,Dn=Cn.call(Object),Rn=Tn("pouchdb:api");p.prototype.get=function(t){var e=_(t);return this._store[e]},p.prototype.set=function(t,e){var r=_(t);return this._store[r]=e,!0},p.prototype.has=function(t){return _(t)in this._store},p.prototype.delete=function(t){var e=_(t),r=e in this._store;return delete this._store[e],r},p.prototype.forEach=function(t){for(var e=Object.keys(this._store),r=0,n=e.length;r<n;r++){var o=e[r],c=this._store[o];o=d(o),t(c,o)}},Object.defineProperty(p.prototype,"size",{get:function(){return Object.keys(this._store).length}}),h.prototype.add=function(t){return this._store.set(t,!0)},h.prototype.has=function(t){return this._store.has(t)},h.prototype.forEach=function(t){this._store.forEach(function(e,r){t(r)})},Object.defineProperty(h.prototype,"size",{get:function(){return this._store.size}});var In,Ln;!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}()?(In=h,Ln=p):(In=Set,Ln=Map);var Bn,jn=6;if(b())Bn=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),Bn=!!localStorage.getItem("_pouch_check_localstorage")}catch(t){Bn=!1}Sn(T,En.EventEmitter),T.prototype.addListener=function(t,e,r,n){function o(){function t(){i=!1}if(c._listeners[e]){if(i)return void(i="waiting");i=!0;var u=v(n,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);r.changes(u).on("change",function(t){t.seq>n.since&&!n.cancelled&&(n.since=t.seq,n.onChange(t))}).on("complete",function(){"waiting"===i&&xn(o),i=!1}).on("error",t)}}if(!this._listeners[e]){var c=this,i=!1;this._listeners[e]=o,this.on(t,o)}},T.prototype.removeListener=function(t,e){e in this._listeners&&(En.EventEmitter.prototype.removeListener.call(this,t,this._listeners[e]),delete this._listeners[e])},T.prototype.notifyLocalWindows=function(t){b()?chrome.storage.local.set({dbName:t}):w()&&(localStorage[t]="a"===localStorage[t]?"b":"a")},T.prototype.notify=function(t){this.emit(t),this.notifyLocalWindows(t)};var Mn;Mn="function"==typeof Object.assign?Object.assign:function(t){for(var e=Object(t),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var Pn=Mn;Sn(q,Error),q.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var Fn=(new q(401,"unauthorized","Name or password is incorrect."),new q(400,"bad_request","Missing JSON list of 'docs'")),Un=new q(404,"not_found","missing"),Jn=new q(409,"conflict","Document update conflict"),Wn=new q(400,"bad_request","_id field must contain a string"),zn=new q(412,"missing_id","_id is required for puts"),Hn=new q(400,"bad_request","Only reserved document ids may start with underscore."),Kn=(new q(412,"precondition_failed","Database not open"),new q(500,"unknown_error","Database encountered an unknown error")),Vn=new q(500,"badarg","Some query argument is invalid"),Xn=(new q(400,"invalid_request","Request was invalid"),new q(400,"query_parse_error","Some query parameter is invalid")),Gn=new q(500,"doc_validation","Bad special document member"),Qn=new q(400,"bad_request","Something wrong with the request"),$n=new q(400,"bad_request","Document must be a JSON object"),Yn=(new q(404,"not_found","Database not found"),new q(500,"indexed_db_went_bad","unknown")),Zn=new q(500,"web_sql_went_bad","unknown"),to=(new q(500,"levelDB_went_went_bad","unknown"),new q(403,"forbidden","Forbidden by design doc validate_doc_update function"),new q(400,"bad_request","Invalid rev format")),eo=(new q(412,"file_exists","The database could not be created, the file already exists."),new q(412,"missing_stub","A pre-existing attachment stub wasn't found")),ro=(new q(413,"invalid_url","Provided URL is invalid"),I.name);var no=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],oo="queryKey",co=/(?:^|&)([^&=]*)=?([^&]*)/g,io=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,uo="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Sn(pt,En.EventEmitter),pt.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},pt.prototype.doChanges=function(t){var e=this,r=t.complete;if(t=a(t),"live"in t&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=ht,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"===t.since)return void this.db.info().then(function(n){if(e.isCancelled)return void r(null,{status:"cancelled"});t.since=n.update_seq,e.doChanges(t)},r);if(t.view&&!t.filter&&(t.filter="_view"),t.filter&&"string"==typeof t.filter&&("_view"===t.filter?t.view=M(t.view):t.filter=M(t.filter),"http"!==this.db.type()&&!t.doc_ids))return this.filterChanges(t);"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=r;var n=this.db._changes(t);if(n&&"function"==typeof n.cancel){var o=e.cancel;e.cancel=kn(function(t){n.cancel(),o.apply(this,t)})}},pt.prototype.filterChanges=function(t){var e=this,r=t.complete;if("_view"===t.filter){if(!t.view||"string"!=typeof t.view){var n=N(Qn,"`view` filter parameter not found or invalid.");return r(n)}var o=j(t.view);this.db.get("_design/"+o[0],function(n,c){if(e.isCancelled)return r(null,{status:"cancelled"});if(n)return r(O(n));var i=c&&c.views&&c.views[o[1]]&&c.views[o[1]].map;if(!i)return r(N(Un,c.views?"missing json key: "+o[1]:"missing json key: views"));t.filter=_t(i),e.doChanges(t)})}else{var c=j(t.filter);if(!c)return e.doChanges(t);this.db.get("_design/"+c[0],function(n,o){if(e.isCancelled)return r(null,{status:"cancelled"});if(n)return r(O(n));var i=o&&o.filters&&o.filters[c[1]];if(!i)return r(N(Un,o&&o.filters?"missing json key: "+c[1]:"missing json key: filters"));t.filter=lt(i),e.doChanges(t)})}},Sn(Et,En.EventEmitter),Et.prototype.post=l("post",function(t,e,r){if("function"==typeof e&&(r=e,e={}),"object"!=typeof t||Array.isArray(t))return r(N($n));this.bulkDocs({docs:[t]},e,gt(r))}),Et.prototype.put=l("put",function(t,e,r){return"function"==typeof e&&(r=e,e={}),"object"!=typeof t||Array.isArray(t)?r(N($n)):(L(t._id),st(t._id)&&"function"==typeof this._putLocal?t._deleted?this._removeLocal(t,r):this._putLocal(t,r):void("function"==typeof this._put&&!1!==e.new_edits?this._put(t,e,r):this.bulkDocs({docs:[t]},e,gt(r))))}),Et.prototype.putAttachment=l("putAttachment",function(t,e,r,n,o){function c(t){var r="_rev"in t?parseInt(t._rev,10):0;return t._attachments=t._attachments||{},t._attachments[e]={content_type:o,data:n,revpos:++r},i.put(t)}var i=this;return"function"==typeof o&&(o=n,n=r,r=null),void 0===o&&(o=n,n=r,r=null),o||E("warn","Attachment",e,"on document",t,"is missing content_type"),i.get(t).then(function(t){if(t._rev!==r)throw N(Jn);return c(t)},function(e){if(e.reason===Un.message)return c({_id:t});throw e})}),Et.prototype.removeAttachment=l("removeAttachment",function(t,e,r,n){var o=this;o.get(t,function(t,c){return t?void n(t):c._rev!==r?void n(N(Jn)):c._attachments?(delete c._attachments[e],0===Object.keys(c._attachments).length&&delete c._attachments,void o.put(c,n)):n()})}),Et.prototype.remove=l("remove",function(t,e,r,n){var o;"string"==typeof e?(o={_id:t,_rev:e},"function"==typeof r&&(n=r,r={})):(o=t,"function"==typeof e?(n=e,r={}):(n=r,r=e)),r=r||{},r.was_delete=!0;var c={_id:o._id,_rev:o._rev||r.rev};if(c._deleted=!0,st(c._id)&&"function"==typeof this._removeLocal)return this._removeLocal(o,n);this.bulkDocs({docs:[c]},r,gt(n))}),Et.prototype.revsDiff=l("revsDiff",function(t,e,r){function n(t,e){u.has(t)||u.set(t,{missing:[]}),u.get(t).missing.push(e)}function o(e,r){var o=t[e].slice(0);H(r,function(t,r,c,i,u){var a=r+"-"+c,s=o.indexOf(a);-1!==s&&(o.splice(s,1),"available"!==u.status&&n(e,a))}),o.forEach(function(t){n(e,t)})}"function"==typeof e&&(r=e,e={});var c=Object.keys(t);if(!c.length)return r(null,{});var i=0,u=new Ln;c.map(function(e){this._getRevisionTree(e,function(n,a){if(n&&404===n.status&&"missing"===n.message)u.set(e,{missing:t[e]});else{if(n)return r(n);o(e,a)}if(++i===c.length){var s={};return u.forEach(function(t,e){s[e]=t}),r(null,s)}})},this)}),Et.prototype.bulkGet=l("bulkGet",function(t,e){y(this,t,e)}),Et.prototype.compactDocument=l("compactDocument",function(t,e,r){var n=this;this._getRevisionTree(t,function(o,c){if(o)return r(o);var i=bt(c),u=[],a=[];Object.keys(i).forEach(function(t){i[t]>e&&u.push(t)}),H(c,function(t,e,r,n,o){var c=e+"-"+r;"available"===o.status&&-1!==u.indexOf(c)&&a.push(c)}),n._doCompaction(t,a,r)})}),Et.prototype.compact=l("compact",function(t,e){"function"==typeof t&&(e=t,t={});var r=this;t=t||{},r._compactionQueue=r._compactionQueue||[],r._compactionQueue.push({opts:t,callback:e}),1===r._compactionQueue.length&&kt(r)}),Et.prototype._compact=function(t,e){function r(t){i.push(o.compactDocument(t.id,0))}function n(t){var r=t.last_seq;On.all(i).then(function(){return F(o,"_local/compaction",function(t){return(!t.last_seq||t.last_seq<r)&&(t.last_seq=r,t)})}).then(function(){e(null,{ok:!0})}).catch(e)}var o=this,c={return_docs:!1,last_seq:t.last_seq||0},i=[];o.changes(c).on("change",r).on("complete",n).on("error",e)},Et.prototype.get=l("get",function(t,e,r){function n(){var n=[],i=o.length;if(!i)return r(null,n);o.forEach(function(o){c.get(t,{rev:o,revs:e.revs,latest:e.latest,attachments:e.attachments},function(t,e){if(t)n.push({missing:o});else{for(var c,u=0,a=n.length;u<a;u++)if(n[u].ok&&n[u].ok._rev===e._rev){c=!0;break}c||n.push({ok:e})}--i||r(null,n)})})}if("function"==typeof e&&(r=e,e={}),"string"!=typeof t)return r(N(Wn));if(st(t)&&"function"==typeof this._getLocal)return this._getLocal(t,r);var o=[],c=this;if(!e.open_revs)return this._get(t,e,function(t,n){if(t)return r(t);var o=n.doc,i=n.metadata,u=n.ctx;if(e.conflicts){var a=X(i);a.length&&(o._conflicts=a)}if(at(i,o._rev)&&(o._deleted=!0),e.revs||e.revs_info){for(var s=o._rev.split("-"),f=parseInt(s[0],10),l=s[1],_=Q(i.rev_tree),d=null,p=0;p<_.length;p++){var h=_[p],v=h.ids.map(function(t){return t.id}).indexOf(l);(v===f-1||!d&&-1!==v)&&(d=h)}var g=d.ids.map(function(t){return t.id}).indexOf(o._rev.split("-")[1])+1,m=d.ids.length-g;if(d.ids.splice(g,m),d.ids.reverse(),e.revs&&(o._revisions={start:d.pos+d.ids.length-1,ids:d.ids.map(function(t){return t.id})}),e.revs_info){var y=d.pos+d.ids.length;o._revs_info=d.ids.map(function(t){return y--,{rev:y+"-"+t.id,status:t.opts.status}})}}if(e.attachments&&o._attachments){var b=o._attachments,w=Object.keys(b).length;if(0===w)return r(null,o);Object.keys(b).forEach(function(t){this._getAttachment(o._id,t,b[t],{rev:o._rev,binary:e.binary,ctx:u},function(e,n){var c=o._attachments[t];c.data=n,delete c.stub,delete c.length,--w||r(null,o)})},c)}else{if(o._attachments)for(var k in o._attachments)o._attachments.hasOwnProperty(k)&&(o._attachments[k].stub=!0);r(null,o)}});if("all"===e.open_revs)this._getRevisionTree(t,function(t,e){if(t)return r(t);o=V(e).map(function(t){return t.rev}),n()});else{if(!Array.isArray(e.open_revs))return r(N(Kn,"function_clause"));o=e.open_revs;for(var i=0;i<o.length;i++){var u=o[i];if("string"!=typeof u||!/^\d+-/.test(u))return r(N(to))}n()}}),Et.prototype.getAttachment=l("getAttachment",function(t,e,r,n){var o=this;r instanceof Function&&(n=r,r={}),this._get(t,r,function(c,i){return c?n(c):i.doc._attachments&&i.doc._attachments[e]?(r.ctx=i.ctx,r.binary=!0,o._getAttachment(t,e,i.doc._attachments[e],r,n),void 0):n(N(Un))})}),Et.prototype.allDocs=l("allDocs",function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip=void 0!==t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var r=["startkey","endkey","key"].filter(function(e){return e in t})[0];if(r)return void e(N(Xn,"Query parameter `"+r+"` is not compatible with multi-get"));if("http"!==this.type())return wt(this,t,e)}return this._allDocs(t,e)}),Et.prototype.changes=function(t,e){return"function"==typeof t&&(e=t,t={}),new pt(this,t,e)},Et.prototype.close=l("close",function(t){return this._closed=!0,this.emit("closed"),this._close(t)}),Et.prototype.info=l("info",function(t){var e=this;this._info(function(r,n){if(r)return t(r);n.db_name=n.db_name||e.name,n.auto_compaction=!(!e.auto_compaction||"http"===e.type()),n.adapter=e.type(),t(null,n)})}),Et.prototype.id=l("id",function(t){return this._id(t)}),Et.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},Et.prototype.bulkDocs=l("bulkDocs",function(t,e,r){if("function"==typeof e&&(r=e,e={}),e=e||{},Array.isArray(t)&&(t={docs:t}),!t||!t.docs||!Array.isArray(t.docs))return r(N(Fn));for(var n=0;n<t.docs.length;++n)if("object"!=typeof t.docs[n]||Array.isArray(t.docs[n]))return r(N($n));var o;if(t.docs.forEach(function(t){t._attachments&&Object.keys(t._attachments).forEach(function(e){o=o||Tt(e),t._attachments[e].content_type||E("warn","Attachment",e,"on document",t._id,"is missing content_type")})}),o)return r(N(Qn,o));"new_edits"in e||(e.new_edits=!("new_edits"in t)||t.new_edits);var c=this;e.new_edits||"http"===c.type()||t.docs.sort(yt),mt(t.docs);var i=t.docs.map(function(t){return t._id});return this._bulkDocs(t,e,function(t,n){if(t)return r(t);if(e.new_edits||(n=n.filter(function(t){return t.error})),"http"!==c.type())for(var o=0,u=n.length;o<u;o++)n[o].id=n[o].id||i[o];r(null,n)})}),Et.prototype.registerDependentDatabase=l("registerDependentDatabase",function(t,e){function r(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)}var n=new this.constructor(t,this.__opts);F(this,"_local/_pouch_dependentDbs",r).then(function(){e(null,{db:n})}).catch(e)}),Et.prototype.destroy=l("destroy",function(t,e){function r(){n._destroy(t,function(t,r){if(t)return e(t);n._destroyed=!0,n.emit("destroyed"),e(null,r||{ok:!0})})}"function"==typeof t&&(e=t,t={});var n=this,o=!("use_prefix"in n)||n.use_prefix;if("http"===n.type())return r();n.get("_local/_pouch_dependentDbs",function(t,c){if(t)return 404!==t.status?e(t):r();var i=c.dependentDbs,u=n.constructor,a=Object.keys(i).map(function(t){var e=o?t.replace(new RegExp("^"+u.prefix),""):t;return new u(e,n.__opts).destroy()});On.all(a).then(r,e)})}),St.prototype.execute=function(){var t;if(this.failed)for(;t=this.queue.shift();)t(this.failed);else for(;t=this.queue.shift();)t()},St.prototype.fail=function(t){this.failed=t,this.execute()},St.prototype.ready=function(t){this.isReady=!0,this.db=t,this.execute()},St.prototype.addTask=function(t){this.queue.push(t),this.failed&&this.execute()},Sn(qt,Et),qt.debug=Tn,qt.adapters={},qt.preferredAdapters=[],qt.prefix="_pouch_";var ao=new En.EventEmitter;!function(t){Object.keys(En.EventEmitter.prototype).forEach(function(e){"function"==typeof En.EventEmitter.prototype[e]&&(t[e]=ao[e].bind(ao))});var e=t._destructionListeners=new Ln;t.on("destroyed",function(t){e.get(t).forEach(function(t){t()}),e.delete(t)})}(qt),qt.adapter=function(t,e,r){e.valid()&&(qt.adapters[t]=e,r&&qt.preferredAdapters.push(t))},qt.plugin=function(t){if("function"==typeof t)t(qt);else{if("object"!=typeof t||0===Object.keys(t).length)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach(function(e){qt.prototype[e]=t[e]})}return this.__defaults&&(qt.__defaults=Pn({},this.__defaults)),qt},qt.defaults=function(t){function e(t,r){if(!(this instanceof e))return new e(t,r);r=r||{},t&&"object"==typeof t&&(r=t,t=r.name,delete r.name),r=Pn({},e.__defaults,r),qt.call(this,t,r)}return Sn(e,qt),e.preferredAdapters=qt.preferredAdapters.slice(),Object.keys(qt).forEach(function(t){t in e||(e[t]=qt[t])}),e.__defaults=Pn({},this.__defaults,t),e};qt.version="6.1.2";var so,fo=Nt(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),lo=Nt(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]),_o=function(t){return atob(t)},po=function(t){return btoa(t)},ho=e.setImmediate||e.setTimeout,vo=32768,go=5,mo="document-store",yo="by-sequence",bo="attach-store",wo="attach-seq-store",ko="meta-store",To="local-store",Eo="detect-blob-support",So=new T,xo=!1,Ao=[],qo=new Ln,No=new Ln;Ee.valid=function(){return!("undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform))&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange};var Oo=function(t){t.adapter("idb",Ee,!0)},Co=7,Do=De("document-store"),Ro=De("by-sequence"),Io=De("attach-store"),Lo=De("local-store"),Bo=De("metadata-store"),jo=De("attach-seq-store"),Mo=new Ln,Po=new T,Fo=1,Uo="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+Ro+" (seq, deleted)",Jo="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+Ro+" (doc_id, rev)",Wo="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+Do+" (winningseq)",zo="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+jo+" (seq)",Ho="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+jo+" (digest, seq)",Ko=Ro+".seq = "+Do+".winningseq",Vo=Ro+".seq AS seq, "+Ro+".deleted AS deleted, "+Ro+".json AS data, "+Ro+".rev AS rev, "+Do+".json AS metadata";Ye.valid=Qe,Ye.use_prefix=!0;var Xo=function(t){t.adapter("websql",Ye,!0)},Go=function(){try{return new XMLHttpRequest,!0}catch(t){return!1}}(),Qo=function(){},$o=25,Yo=50,Zo={},tc=Tn("pouchdb:http");hr.valid=function(){return!0};var ec=function(t){t.adapter("http",hr,!1),t.adapter("https",hr,!1)};Sn(vr,Error),Sn(gr,Error),Sn(mr,Error);var rc=E.bind(null,"log"),nc=Array.isArray,oc=JSON.parse,cc=-324,ic=3,uc="";Jr.prototype.add=function(t){return this.promise=this.promise.catch(function(){}).then(function(){return t()}),this.promise},Jr.prototype.finish=function(){return this.promise};var ac={},sc=new Jr,fc=50,lc={_sum:function(t,e){return xr(e)},_count:function(t,e){return e.length},_stats:function(t,e){return{sum:xr(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:function(t){for(var e=0,r=0,n=t.length;r<n;r++){var o=t[r];e+=o*o}return e}(e)}}},_c=function(t,e,r,n){function o(t,e,r){try{e(r)}catch(e){Kr(t,e)}}function c(t,e,r,n,o){try{return{output:e(r,n,o)}}catch(e){return Kr(t,e),{error:e}}}function i(t,e){var r=Or(t.key,e.key);return 0!==r?r:Or(t.value,e.value)}function u(t,e,r){return r=r||0,"number"==typeof e?t.slice(r,e+r):r>0?t.slice(r):t}function a(t){var e=t.value;return e&&"object"==typeof e&&e._id||t.id}function s(t){t.rows.forEach(function(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach(function(t){var r=e[t];e[t].data=Bt(r.data,r.content_type)})})}function f(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&s(e),e}}function l(t,e,r,n){var o=e[t];void 0!==o&&(n&&(o=encodeURIComponent(JSON.stringify(o))),r.push(t+"="+o))}function _(t){if(void 0!==t){var e=Number(t);return isNaN(e)||e!==parseInt(t,10)?t:e}}function d(t){return t.group_level=_(t.group_level),t.limit=_(t.limit),t.skip=_(t.skip),t}function p(t){if(t){if("number"!=typeof t)return new vr('Invalid value for integer: "'+t+'"');if(t<0)return new vr('Invalid value for positive integer: "'+t+'"')}}function h(t,e){var r=t.descending?"endkey":"startkey",n=t.descending?"startkey":"endkey";if(void 0!==t[r]&&void 0!==t[n]&&Or(t[r],t[n])>0)throw new vr("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&!1!==t.reduce){if(t.include_docs)throw new vr("{include_docs:true} is invalid for reduce");if(t.keys&&t.keys.length>1&&!t.group&&!t.group_level)throw new vr("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(e){var r=p(t[e]);if(r)throw r})}function v(t,e,r){var n,o=[],c="GET";if(l("reduce",r,o),l("include_docs",r,o),l("attachments",r,o),l("limit",r,o),l("descending",r,o),l("group",r,o),l("group_level",r,o),l("skip",r,o),l("stale",r,o),l("conflicts",r,o),l("startkey",r,o,!0),l("start_key",r,o,!0),l("endkey",r,o,!0),l("end_key",r,o,!0),l("inclusive_end",r,o),l("key",r,o,!0),o=o.join("&"),o=""===o?"":"?"+o,void 0!==r.keys){var i="keys="+encodeURIComponent(JSON.stringify(r.keys));i.length+o.length+1<=2e3?o+=("?"===o[0]?"&":"?")+i:(c="POST","string"==typeof e?n={keys:r.keys}:e.keys=r.keys)}if("string"==typeof e){var u=zr(e);return t.request({method:c,url:"_design/"+u[0]+"/_view/"+u[1]+o,body:n}).then(f(r))}return n=n||{},Object.keys(e).forEach(function(t){Array.isArray(e[t])?n[t]=e[t]:n[t]=e[t].toString()}),t.request({method:"POST",url:"_temp_view"+o,body:n}).then(f(r))}function g(t,e,r){return new On(function(n,o){t._query(e,r,function(t,e){if(t)return o(t);n(e)})})}function m(t){return new On(function(e,r){t._viewCleanup(function(t,n){if(t)return r(t);e(n)})})}function y(t){return function(e){if(404===e.status)return t;throw e}}function b(t,e,r){function n(t){return t.keys.length?e.db.allDocs({keys:t.keys,include_docs:!0}):On.resolve({rows:[]})}function o(t,e){for(var r=[],n=new In,o=0,c=e.rows.length;o<c;o++){var i=e.rows[o],u=i.doc;if(u&&(r.push(u),n.add(u._id),u._deleted=!a.has(u._id),!u._deleted)){var s=a.get(u._id);"value"in s&&(u.value=s.value)}}var f=Er(a);return f.forEach(function(t){if(!n.has(t)){var e={_id:t},o=a.get(t);"value"in o&&(e.value=o.value),r.push(e)}}),t.keys=Tr(f.concat(t.keys)),r.push(t),r}var c="_local/doc_"+t,i={_id:c,keys:[]},u=r.get(t),a=u[0],s=u[1];return function(){return Hr(s)?On.resolve(i):e.db.get(c).catch(y(i))}().then(function(t){return n(t).then(function(e){return o(t,e)})})}function w(t,e,r){return t.db.get("_local/lastSeq").catch(y({_id:"_local/lastSeq",seq:0})).then(function(n){var o=Er(e);return On.all(o.map(function(r){return b(r,t,e)})).then(function(e){var o=R(e);return n.seq=r,o.push(n),t.db.bulkDocs({docs:o})})})}function k(t){var e="string"==typeof t?t:t.name,r=ac[e];return r||(r=ac[e]=new Jr),r}function T(t){return kr(k(t),function(){return E(t)})()}function E(t){function r(t,e){var r={id:l._id,key:Cr(t)};void 0!==e&&null!==e&&(r.value=Cr(e)),f.push(r)}function n(e,r){return function(){return w(t,e,r)}}function c(){return t.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:d,limit:fc}).then(u)}function u(t){var e=t.results;if(e.length){var r=a(e);if(p.add(n(r,d)),!(e.length<fc))return c()}}function a(e){for(var r=new Ln,n=0,c=e.length;n<c;n++){var u=e[n];if("_"!==u.doc._id[0]){f=[],l=u.doc,l._deleted||o(t.sourceDB,_,l),f.sort(i);var a=s(f);r.set(u.doc._id,[a,u.changes])}d=u.seq}return r}function s(t){for(var e,r=new Ln,n=0,o=t.length;n<o;n++){var c=t[n],i=[c.key,c.id];n>0&&0===Or(c.key,e)&&i.push(n),r.set(Rr(i),c),e=c.key}return r}var f,l,_=e(t.mapFun,r),d=t.seq||0,p=new Jr;return c().then(function(){return p.finish()}).then(function(){t.seq=d})}function S(t,e,n){0===n.group_level&&delete n.group_level;var o=n.group||n.group_level,i=r(t.reduceFun),a=[],s=isNaN(n.group_level)?Number.POSITIVE_INFINITY:n.group_level;e.forEach(function(t){var e=a[a.length-1],r=o?t.key:null;if(o&&Array.isArray(r)&&(r=r.slice(0,s)),e&&0===Or(e.groupKey,r))return e.keys.push([t.key,t.id]),void e.values.push(t.value);a.push({keys:[[t.key,t.id]],values:[t.value],groupKey:r})}),e=[];for(var f=0,l=a.length;f<l;f++){var _=a[f],d=c(t.sourceDB,i,_.keys,_.values,!1);if(d.error&&d.error instanceof mr)throw d.error;e.push({value:d.error?null:d.output,key:_.groupKey})}return{rows:u(e,n.limit,n.skip)}}function x(t,e){return kr(k(t),function(){return A(t,e)})()}function A(t,e){function r(e){return e.include_docs=!0,t.db.allDocs(e).then(function(t){return o=t.total_rows,t.rows.map(function(t){if("value"in t.doc&&"object"==typeof t.doc.value&&null!==t.doc.value){var e=Object.keys(t.doc.value).sort(),r=["id","key","value"];if(!(e<r||e>r))return t.doc.value}var n=Br(t.doc._id);return{key:n[0],id:n[1],value:"value"in t.doc?t.doc.value:null}})})}function n(r){var n;if(n=c?S(t,r,e):{total_rows:o,offset:i,rows:r},e.include_docs){var u=Tr(r.map(a));return t.sourceDB.allDocs({keys:u,include_docs:!0,conflicts:e.conflicts,attachments:e.attachments,binary:e.binary}).then(function(t){var e=new Ln;return t.rows.forEach(function(t){e.set(t.id,t.doc)}),r.forEach(function(t){var r=a(t),n=e.get(r);n&&(t.doc=n)}),n})}return n}var o,c=t.reduceFun&&!1!==e.reduce,i=e.skip||0;if(void 0===e.keys||e.keys.length||(e.limit=0,delete e.keys),void 0!==e.keys){var u=e.keys,s=u.map(function(t){return r({startkey:Rr([t]),endkey:Rr([t,{}])})});return On.all(s).then(R).then(n)}var f={descending:e.descending};if(e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),void 0!==e.startkey&&(f.startkey=Rr(e.descending?[e.startkey,{}]:[e.startkey])),void 0!==e.endkey){var l=!1!==e.inclusive_end;e.descending&&(l=!l),f.endkey=Rr(l?[e.endkey,{}]:[e.endkey])}if(void 0!==e.key){var _=Rr([e.key]),d=Rr([e.key,{}]);f.descending?(f.endkey=_,f.startkey=d):(f.startkey=_,f.endkey=d)}return c||("number"==typeof e.limit&&(f.limit=e.limit),f.skip=i),r(f).then(n)}function q(t){return t.request({method:"POST",url:"_view_cleanup"})}function N(e){return e.get("_local/"+t).then(function(t){var r=new Ln;Object.keys(t.views).forEach(function(t){var e=zr(t),n="_design/"+e[0],o=e[1],c=r.get(n);c||(c=new In,r.set(n,c)),c.add(o)});var n={keys:Er(r),include_docs:!0};return e.allDocs(n).then(function(n){var o={};n.rows.forEach(function(e){var n=e.key.substring(8);r.get(e.key).forEach(function(r){var c=n+"/"+r;t.views[c]||(c=r);var i=Object.keys(t.views[c]),u=e.doc&&e.doc.views&&e.doc.views[r];i.forEach(function(t){o[t]=o[t]||u})})});var c=Object.keys(o).filter(function(t){return!o[t]}),i=c.map(function(t){return kr(k(t),function(){return new e.constructor(t,e.__opts).destroy()})()});return On.all(i).then(function(){return{ok:!0}})})},y({ok:!0}))}function O(e,r,o){if("http"===e.type())return v(e,r,o);if("function"==typeof e._query)return g(e,r,o);if("string"!=typeof r)return h(o,r),sc.add(function(){return Wr(e,"temp_view/temp_view",r.map,r.reduce,!0,t).then(function(t){return wr(T(t).then(function(){return x(t,o)}),function(){return t.db.destroy()})})}),sc.finish();var c=r,i=zr(c),u=i[0],a=i[1];return e.get("_design/"+u).then(function(r){var i=r.views&&r.views[a];if(!i)throw new gr("ddoc "+r._id+" has no view named "+a);return n(r,a),h(o,i),Wr(e,c,i.map,i.reduce,!1,t).then(function(t){return"ok"===o.stale||"update_after"===o.stale?("update_after"===o.stale&&xn(function(){T(t)}),x(t,o)):T(t).then(function(){return x(t,o)})})})}function C(t,e,r){var n=this;"function"==typeof e&&(r=e,e={}),e=e?d(e):{},"function"==typeof t&&(t={map:t});var o=On.resolve().then(function(){return O(n,t,e)});return yr(o,r),o}return{query:C,viewCleanup:br(function(){var t=this;return"http"===t.type()?q(t):"function"==typeof t._viewCleanup?m(t):N(t)})}}("mrviews",Vr,Xr,Gr),dc={query:Qr,viewCleanup:$r},pc=1,hc="pouchdb",vc=5,gc=0;cn.prototype.writeCheckpoint=function(t,e){var r=this;return this.updateTarget(t,e).then(function(){return r.updateSource(t,e)})},cn.prototype.updateTarget=function(t,e){return on(this.target,this.id,t,e,this.returnValue)},cn.prototype.updateSource=function(t,e){var r=this;return this.readOnlySource?On.resolve(!0):on(this.src,this.id,t,e,this.returnValue).catch(function(t){if(fn(t))return r.readOnlySource=!0,!0;throw t})};var mc={undefined:function(t,e){return 0===Or(t.last_seq,e.last_seq)?e.last_seq:0},1:function(t,e){return un(e,t).last_seq}};cn.prototype.getCheckpoint=function(){var t=this;return t.target.get(t.id).then(function(e){return t.readOnlySource?On.resolve(e.last_seq):t.src.get(t.id).then(function(t){if(e.version!==t.version)return gc;var r;return r=e.version?e.version.toString():"undefined",r in mc?mc[r](e,t):gc},function(r){if(404===r.status&&e.last_seq)return t.src.put({_id:t.id,last_seq:gc}).then(function(){return gc},function(r){return fn(r)?(t.readOnlySource=!0,e.last_seq):gc});throw r})}).catch(function(t){if(404!==t.status)throw t;return gc})};var yc=0;Sn(hn,En.EventEmitter),hn.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},hn.prototype.ready=function(t,e){function r(){o.cancel()}function n(){t.removeListener("destroyed",r),e.removeListener("destroyed",r)}var o=this;o._readyCalled||(o._readyCalled=!0,t.once("destroyed",r),e.once("destroyed",r),o.once("complete",n))},Sn(yn,En.EventEmitter),yn.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},qt.plugin(Oo).plugin(Xo).plugin(ec).plugin(dc).plugin(bn),t.exports=qt}).call(e,r(0))},function(t,e,r){(function(n){function o(){return!("undefined"==typeof window||!window||void 0===window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function c(t){var r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),r){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var o=0,c=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(c=o))}),t.splice(c,0,n)}}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function u(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function a(){try{return e.storage.debug}catch(t){}if(void 0!==n&&"env"in n)return n.env.DEBUG}e=t.exports=r(10),e.log=i,e.formatArgs=c,e.save=u,e.load=a,e.useColors=o,e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(a())}).call(e,r(12))},function(t,e,r){function n(t){var r,n=0;for(r in t)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]}function o(t){function r(){if(r.enabled){var t=r,n=+new Date,o=n-(s||n);t.diff=o,t.prev=s,t.curr=n,s=n;for(var c=new Array(arguments.length),i=0;i<c.length;i++)c[i]=arguments[i];c[0]=e.coerce(c[0]),"string"!=typeof c[0]&&c.unshift("%O");var u=0;c[0]=c[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;u++;var o=e.formatters[n];if("function"==typeof o){var i=c[u];r=o.call(t,i),c.splice(u,1),u--}return r}),e.formatArgs.call(t,c);(r.log||e.log||console.log.bind(console)).apply(t,c)}}return r.namespace=t,r.enabled=e.enabled(t),r.useColors=e.useColors(),r.color=n(t),"function"==typeof e.init&&e.init(r),r}function c(t){e.save(t);for(var r=(t||"").split(/[\s,]+/),n=r.length,o=0;o<n;o++)r[o]&&(t=r[o].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function i(){e.enable("")}function u(t){var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1}function a(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o.debug=o.default=o,e.coerce=a,e.disable=i,e.enable=c,e.enabled=u,e.humanize=r(11),e.names=[],e.skips=[],e.formatters={};var s},function(t,e){function r(t){if(t=String(t),!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*f;case"days":case"day":case"d":return r*s;case"hours":case"hour":case"hrs":case"hr":case"h":return r*a;case"minutes":case"minute":case"mins":case"min":case"m":return r*u;case"seconds":case"second":case"secs":case"sec":case"s":return r*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function n(t){return t>=s?Math.round(t/s)+"d":t>=a?Math.round(t/a)+"h":t>=u?Math.round(t/u)+"m":t>=i?Math.round(t/i)+"s":t+"ms"}function o(t){return c(t,s,"day")||c(t,a,"hour")||c(t,u,"minute")||c(t,i,"second")||t+" ms"}function c(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var i=1e3,u=60*i,a=60*u,s=24*a,f=365.25*s;t.exports=function(t,e){e=e||{};var c=typeof t;if("string"===c&&t.length>0)return r(t);if("number"===c&&!1===isNaN(t))return e.long?o(t):n(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function c(t){if(l===clearTimeout)return clearTimeout(t);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function i(){h&&d&&(h=!1,d.length?p=d.concat(p):v=-1,p.length&&u())}function u(){if(!h){var t=o(i);h=!0;for(var e=p.length;e;){for(d=p,p=[];++v<e;)d&&d[v].run();v=-1,e=p.length}d=null,h=!1,c(t)}}function a(t,e){this.fun=t,this.array=e}function s(){}var f,l,_=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(t){f=r}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(t){l=n}}();var d,p=[],h=!1,v=-1;_.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];p.push(new a(t,e)),1!==p.length||h||o(u)},a.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=s,_.addListener=s,_.once=s,_.off=s,_.removeListener=s,_.removeAllListeners=s,_.emit=s,_.binding=function(t){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(t){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},function(t,e){(function(){var e={}.hasOwnProperty,r=[].slice;t.exports=function(t,n){var o,c,i,u;c=[],u=[];for(o in n)e.call(n,o)&&(i=n[o],"this"!==o&&(c.push(o),u.push(i)));return Function.apply(null,r.call(c).concat([t])).apply(n.this,u)}}).call(this)},function(t,e,r){!function(e){t.exports=e()}(function(t){"use strict";function e(t,e){var r=t[0],n=t[1],o=t[2],c=t[3];r+=(n&o|~n&c)+e[0]-680876936|0,r=(r<<7|r>>>25)+n|0,c+=(r&n|~r&o)+e[1]-389564586|0,c=(c<<12|c>>>20)+r|0,o+=(c&r|~c&n)+e[2]+606105819|0,o=(o<<17|o>>>15)+c|0,n+=(o&c|~o&r)+e[3]-1044525330|0,n=(n<<22|n>>>10)+o|0,r+=(n&o|~n&c)+e[4]-176418897|0,r=(r<<7|r>>>25)+n|0,c+=(r&n|~r&o)+e[5]+1200080426|0,c=(c<<12|c>>>20)+r|0,o+=(c&r|~c&n)+e[6]-1473231341|0,o=(o<<17|o>>>15)+c|0,n+=(o&c|~o&r)+e[7]-45705983|0,n=(n<<22|n>>>10)+o|0,r+=(n&o|~n&c)+e[8]+1770035416|0,r=(r<<7|r>>>25)+n|0,c+=(r&n|~r&o)+e[9]-1958414417|0,c=(c<<12|c>>>20)+r|0,o+=(c&r|~c&n)+e[10]-42063|0,o=(o<<17|o>>>15)+c|0,n+=(o&c|~o&r)+e[11]-1990404162|0,n=(n<<22|n>>>10)+o|0,r+=(n&o|~n&c)+e[12]+1804603682|0,r=(r<<7|r>>>25)+n|0,c+=(r&n|~r&o)+e[13]-40341101|0,c=(c<<12|c>>>20)+r|0,o+=(c&r|~c&n)+e[14]-1502002290|0,o=(o<<17|o>>>15)+c|0,n+=(o&c|~o&r)+e[15]+1236535329|0,n=(n<<22|n>>>10)+o|0,r+=(n&c|o&~c)+e[1]-165796510|0,r=(r<<5|r>>>27)+n|0,c+=(r&o|n&~o)+e[6]-1069501632|0,c=(c<<9|c>>>23)+r|0,o+=(c&n|r&~n)+e[11]+643717713|0,o=(o<<14|o>>>18)+c|0,n+=(o&r|c&~r)+e[0]-373897302|0,n=(n<<20|n>>>12)+o|0,r+=(n&c|o&~c)+e[5]-701558691|0,r=(r<<5|r>>>27)+n|0,c+=(r&o|n&~o)+e[10]+38016083|0,c=(c<<9|c>>>23)+r|0,o+=(c&n|r&~n)+e[15]-660478335|0,o=(o<<14|o>>>18)+c|0,n+=(o&r|c&~r)+e[4]-405537848|0,n=(n<<20|n>>>12)+o|0,r+=(n&c|o&~c)+e[9]+568446438|0,r=(r<<5|r>>>27)+n|0,c+=(r&o|n&~o)+e[14]-1019803690|0,c=(c<<9|c>>>23)+r|0,o+=(c&n|r&~n)+e[3]-187363961|0,o=(o<<14|o>>>18)+c|0,n+=(o&r|c&~r)+e[8]+1163531501|0,n=(n<<20|n>>>12)+o|0,r+=(n&c|o&~c)+e[13]-1444681467|0,r=(r<<5|r>>>27)+n|0,c+=(r&o|n&~o)+e[2]-51403784|0,c=(c<<9|c>>>23)+r|0,o+=(c&n|r&~n)+e[7]+1735328473|0,o=(o<<14|o>>>18)+c|0,n+=(o&r|c&~r)+e[12]-1926607734|0,n=(n<<20|n>>>12)+o|0,r+=(n^o^c)+e[5]-378558|0,r=(r<<4|r>>>28)+n|0,c+=(r^n^o)+e[8]-2022574463|0,c=(c<<11|c>>>21)+r|0,o+=(c^r^n)+e[11]+1839030562|0,o=(o<<16|o>>>16)+c|0,n+=(o^c^r)+e[14]-35309556|0,n=(n<<23|n>>>9)+o|0,r+=(n^o^c)+e[1]-1530992060|0,r=(r<<4|r>>>28)+n|0,c+=(r^n^o)+e[4]+1272893353|0,c=(c<<11|c>>>21)+r|0,o+=(c^r^n)+e[7]-155497632|0,o=(o<<16|o>>>16)+c|0,n+=(o^c^r)+e[10]-1094730640|0,n=(n<<23|n>>>9)+o|0,r+=(n^o^c)+e[13]+681279174|0,r=(r<<4|r>>>28)+n|0,c+=(r^n^o)+e[0]-358537222|0,c=(c<<11|c>>>21)+r|0,o+=(c^r^n)+e[3]-722521979|0,o=(o<<16|o>>>16)+c|0,n+=(o^c^r)+e[6]+76029189|0,n=(n<<23|n>>>9)+o|0,r+=(n^o^c)+e[9]-640364487|0,r=(r<<4|r>>>28)+n|0,c+=(r^n^o)+e[12]-421815835|0,c=(c<<11|c>>>21)+r|0,o+=(c^r^n)+e[15]+530742520|0,o=(o<<16|o>>>16)+c|0,n+=(o^c^r)+e[2]-995338651|0,n=(n<<23|n>>>9)+o|0,r+=(o^(n|~c))+e[0]-198630844|0,r=(r<<6|r>>>26)+n|0,c+=(n^(r|~o))+e[7]+1126891415|0,c=(c<<10|c>>>22)+r|0,o+=(r^(c|~n))+e[14]-1416354905|0,o=(o<<15|o>>>17)+c|0,n+=(c^(o|~r))+e[5]-57434055|0,n=(n<<21|n>>>11)+o|0,r+=(o^(n|~c))+e[12]+1700485571|0,r=(r<<6|r>>>26)+n|0,c+=(n^(r|~o))+e[3]-1894986606|0,c=(c<<10|c>>>22)+r|0,o+=(r^(c|~n))+e[10]-1051523|0,o=(o<<15|o>>>17)+c|0,n+=(c^(o|~r))+e[1]-2054922799|0,n=(n<<21|n>>>11)+o|0,r+=(o^(n|~c))+e[8]+1873313359|0,r=(r<<6|r>>>26)+n|0,c+=(n^(r|~o))+e[15]-30611744|0,c=(c<<10|c>>>22)+r|0,o+=(r^(c|~n))+e[6]-1560198380|0,o=(o<<15|o>>>17)+c|0,n+=(c^(o|~r))+e[13]+1309151649|0,n=(n<<21|n>>>11)+o|0,r+=(o^(n|~c))+e[4]-145523070|0,r=(r<<6|r>>>26)+n|0,c+=(n^(r|~o))+e[11]-1120210379|0,c=(c<<10|c>>>22)+r|0,o+=(r^(c|~n))+e[2]+718787259|0,o=(o<<15|o>>>17)+c|0,n+=(c^(o|~r))+e[9]-343485551|0,n=(n<<21|n>>>11)+o|0,t[0]=r+t[0]|0,t[1]=n+t[1]|0,t[2]=o+t[2]|0,t[3]=c+t[3]|0}function r(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}function n(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return r}function o(t){var n,o,c,i,u,a,s=t.length,f=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=s;n+=64)e(f,r(t.substring(n-64,n)));for(t=t.substring(n-64),o=t.length,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<o;n+=1)c[n>>2]|=t.charCodeAt(n)<<(n%4<<3);if(c[n>>2]|=128<<(n%4<<3),n>55)for(e(f,c),n=0;n<16;n+=1)c[n]=0;return i=8*s,i=i.toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(i[2],16),a=parseInt(i[1],16)||0,c[14]=u,c[15]=a,e(f,c),f}function c(t){var r,o,c,i,u,a,s=t.length,f=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=s;r+=64)e(f,n(t.subarray(r-64,r)));for(t=r-64<s?t.subarray(r-64):new Uint8Array(0),o=t.length,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<o;r+=1)c[r>>2]|=t[r]<<(r%4<<3);if(c[r>>2]|=128<<(r%4<<3),r>55)for(e(f,c),r=0;r<16;r+=1)c[r]=0;return i=8*s,i=i.toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(i[2],16),a=parseInt(i[1],16)||0,c[14]=u,c[15]=a,e(f,c),f}function i(t){var e,r="";for(e=0;e<4;e+=1)r+=p[t>>8*e+4&15]+p[t>>8*e&15];return r}function u(t){var e;for(e=0;e<t.length;e+=1)t[e]=i(t[e]);return t.join("")}function a(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function s(t,e){var r,n=t.length,o=new ArrayBuffer(n),c=new Uint8Array(o);for(r=0;r<n;r+=1)c[r]=t.charCodeAt(r);return e?c:o}function f(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function l(t,e,r){var n=new Uint8Array(t.byteLength+e.byteLength);return n.set(new Uint8Array(t)),n.set(new Uint8Array(e),t.byteLength),r?n:n.buffer}function _(t){var e,r=[],n=t.length;for(e=0;e<n-1;e+=2)r.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,r)}function d(){this.reset()}var p=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==u(o("hello"))&&function(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r},"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return t=0|t||0,t<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(r,n){var o,c,i,u,a=this.byteLength,s=e(r,a),f=a;return n!==t&&(f=e(n,a)),s>f?new ArrayBuffer(0):(o=f-s,c=new ArrayBuffer(o),i=new Uint8Array(c),u=new Uint8Array(this,s,o),i.set(u),c)}}(),d.prototype.append=function(t){return this.appendBinary(a(t)),this},d.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var n,o=this._buff.length;for(n=64;n<=o;n+=64)e(this._hash,r(this._buff.substring(n-64,n)));return this._buff=this._buff.substring(n-64),this},d.prototype.end=function(t){var e,r,n=this._buff,o=n.length,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)c[e>>2]|=n.charCodeAt(e)<<(e%4<<3);return this._finish(c,o),r=u(this._hash),t&&(r=_(r)),this.reset(),r},d.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},d.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},d.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},d.prototype._finish=function(t,r){var n,o,c,i=r;if(t[i>>2]|=128<<(i%4<<3),i>55)for(e(this._hash,t),i=0;i<16;i+=1)t[i]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(n[2],16),c=parseInt(n[1],16)||0,t[14]=o,t[15]=c,e(this._hash,t)},d.hash=function(t,e){return d.hashBinary(a(t),e)},d.hashBinary=function(t,e){var r=o(t),n=u(r);return e?_(n):n},d.ArrayBuffer=function(){this.reset()},d.ArrayBuffer.prototype.append=function(t){var r,o=l(this._buff.buffer,t,!0),c=o.length;for(this._length+=t.byteLength,r=64;r<=c;r+=64)e(this._hash,n(o.subarray(r-64,r)));return this._buff=r-64<c?new Uint8Array(o.buffer.slice(r-64)):new Uint8Array(0),this},d.ArrayBuffer.prototype.end=function(t){var e,r,n=this._buff,o=n.length,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)c[e>>2]|=n[e]<<(e%4<<3);return this._finish(c,o),r=u(this._hash),t&&(r=_(r)),this.reset(),r},d.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.ArrayBuffer.prototype.getState=function(){var t=d.prototype.getState.call(this);return t.buff=f(t.buff),t},d.ArrayBuffer.prototype.setState=function(t){return t.buff=s(t.buff,!0),d.prototype.setState.call(this,t)},d.ArrayBuffer.prototype.destroy=d.prototype.destroy,d.ArrayBuffer.prototype._finish=d.prototype._finish,d.ArrayBuffer.hash=function(t,e){var r=c(new Uint8Array(t)),n=u(r);return e?_(n):n},d})},function(t,e,r){"use strict";function n(t,e,r){var n=r[r.length-1];t===n.element&&(r.pop(),n=r[r.length-1]);var o=n.element,c=n.index;if(Array.isArray(o))o.push(t);else if(c===e.length-2){var i=e.pop();o[i]=t}else e.push(t)}e.stringify=function(t){var e=[];e.push({obj:t});for(var r,n,o,c,i,u,a,s,f,l,_,d="";r=e.pop();)if(n=r.obj,o=r.prefix||"",c=r.val||"",d+=o,c)d+=c;else if("object"!=typeof n)d+=void 0===n?null:JSON.stringify(n);else if(null===n)d+="null";else if(Array.isArray(n)){for(e.push({val:"]"}),i=n.length-1;i>=0;i--)u=0===i?"":",",e.push({obj:n[i],prefix:u});e.push({val:"["})}else{a=[];for(s in n)n.hasOwnProperty(s)&&a.push(s);for(e.push({val:"}"}),i=a.length-1;i>=0;i--)f=a[i],l=n[f],_=i>0?",":"",_+=JSON.stringify(f)+":",e.push({obj:l,prefix:_});e.push({val:"{"})}return d},e.parse=function(t){for(var e,r,o,c,i,u,a,s,f,l=[],_=[],d=0;;)if("}"!==(e=t[d++])&&"]"!==e&&void 0!==e)switch(e){case" ":case"\t":case"\n":case":":case",":break;case"n":d+=3,n(null,l,_);break;case"t":d+=3,n(!0,l,_);break;case"f":d+=4,n(!1,l,_);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(r="",d--;;){if(o=t[d++],!/[\d\.\-e\+]/.test(o)){d--;break}r+=o}n(parseFloat(r),l,_);break;case'"':for(c="",i=void 0,u=0;;){if('"'===(a=t[d++])&&("\\"!==i||u%2!=1))break;c+=a,i=a,"\\"===i?u++:u=0}n(JSON.parse('"'+c+'"'),l,_);break;case"[":s={element:[],index:l.length},l.push(s.element),_.push(s);break;case"{":f={element:{},index:l.length},l.push(f.element),_.push(f);break;default:throw new Error("unexpectedly reached end of input: "+e)}else{if(1===l.length)return l.pop();n(l.pop(),l,_)}}},function(t,e,r){r(3);var n=r(2),o=new PouchDB("invoices"),c=n.App.fullscreen({invoicer:localStorage.getItem("invoicer"),currency:localStorage.getItem("currency"),language:localStorage.getItem("language"),deduction:localStorage.getItem("deduction")});c.ports.print.subscribe(function(){window.print()}),c.ports.saveInvoicerDetails.subscribe(function(t){localStorage.setItem("invoicer",t)}),c.ports.saveCurrency.subscribe(function(t){localStorage.setItem("currency",t)}),c.ports.saveLanguage.subscribe(function(t){localStorage.setItem("language",t)}),c.ports.saveDeduction.subscribe(function(t){null!==t?localStorage.setItem("deduction",t):localStorage.removeItem("deduction")}),c.ports.createInvoice.subscribe(function(t){o.post(t).then(function(t){c.ports.invoice.send(t)})}),c.ports.saveInvoice.subscribe(function(t){o.put(t).then(function(t){c.ports.invoice.send(t)})}),c.ports.getInvoices.subscribe(function(){o.allDocs().then(function(t){c.ports.invoices.send(t)})}),c.ports.getInvoice.subscribe(function(t){o.get(t).then(function(t){c.ports.invoice.send(t)})}),c.ports.deleteInvoice.subscribe(function(t){o.remove(t)})}]);